(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{119:function(e,t){e.exports="/assets/images/danger.png"},176:function(e,t){e.exports="/assets/images/success.png"},181:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),o=r(78),l=(s=o)&&s.__esModule?s:{default:s},i=r(46);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.signUp=t.signUp.bind(t),t.onFieldChange=t.onFieldChange.bind(t),t.state={fieldsValue:{},fieldsError:{},authorizedError:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),n(r,[{key:"render",value:function(){return e.createElement("form",{onSubmit:this.signUp},e.createElement(l.default,{error:this.state.authorizedError,successRedirect:"/dashboard"}),e.createElement("input",{type:"email",name:"userEmail",onChange:this.onFieldChange,value:this.state.fieldsValue.userEmail||"",className:"form-control",placeholder:"Введите email"}),e.createElement("label",{className:"text-danger",htmlFor:"userEmail"},this.state.fieldsError.userEmail),e.createElement("input",{type:"password",name:"userPassword",onChange:this.onFieldChange,value:this.state.fieldsValue.userPassword||"",className:"form-control",placeholder:"Введите пароль"}),e.createElement("label",{className:"text-danger mb-3 d-block",htmlFor:"userPassword"},this.state.fieldsError.userPassword),e.createElement("button",{type:"submit",name:"authorization",className:"btn btn-primary"},"Авторизироваться"))}},{key:"onFieldChange",value:function(e){var t=e.target;this.setState((function(e){return{fieldsValue:a({},e.fieldsValue,u({},t.name,t.value))}}))}},{key:"signUp",value:function(e){var t=this;e.preventDefault();var r=this.testForm();this.setState({fieldsError:r}),Object.keys(r).length?(0,i.showDangerMessage)("Ошибки в заполнении формы авторизации"):firebaseProj.auth().signInWithEmailAndPassword(this.state.fieldsValue.userEmail,this.state.fieldsValue.userPassword).then((function(){t.setState({authorizedError:""})}),(function(e){(0,i.showDangerMessage)("Ошибка авторизации"),t.setState({authorizedError:e.message})}))}},{key:"testForm",value:function(){var e={};return new RegExp(".+@.{3,8}..{3,8}").test(this.state.fieldsValue.userEmail)||(e.userEmail="Введите корректный email"),(!this.state.fieldsValue.userPassword||this.state.fieldsValue.userPassword.length<8)&&(e.userPassword="Минимальная длина пароля 8 символов"),e}}]),r}(e.Component);t.default=c}).call(this,r(5))},182:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),o=r(78),l=(s=o)&&s.__esModule?s:{default:s},i=r(46);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onFormChange=t.onFormChange.bind(t),t.addUser=t.addUser.bind(t),t.state={fieldsValue:{},fieldsError:{},registrationError:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),n(r,[{key:"render",value:function(){return e.createElement("form",{onSubmit:this.addUser},e.createElement(l.default,{error:this.state.registrationError,successRedirect:"/profile"}),e.createElement("input",{type:"email",name:"userEmail",onChange:this.onFormChange,value:this.state.fieldsValue.userEmail||"",className:"form-control",placeholder:"Введите email"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.userEmail),e.createElement("input",{type:"text",name:"userName",onChange:this.onFormChange,value:this.state.fieldsValue.userName||"",className:"form-control",placeholder:"Введите имя"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.userName),e.createElement("input",{type:"password",name:"userPassword",onChange:this.onFormChange,value:this.state.fieldsValue.userPassword||"",className:"form-control",placeholder:"Введите пароль"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.userPassword),e.createElement("input",{type:"password",name:"confirmPassword",onChange:this.onFormChange,value:this.state.fieldsValue.confirmPassword||"",className:"form-control",placeholder:"Подтвердите пароль"}),e.createElement("label",{className:"text-danger text-small d-block mb-3"},this.state.fieldsError.confirmPassword),e.createElement("button",{type:"submit",name:"registing",className:"btn btn-primary"},"Зарегистрироваться"))}},{key:"onFormChange",value:function(e){var t=e.target;this.setState((function(e){return{fieldsValue:a({},e.fieldsValue,u({},t.name,t.value))}}))}},{key:"addUser",value:function(e){e.preventDefault();var t=this.testForm();this.setState({fieldsError:t}),Object.keys(t).length?(0,i.showDangerMessage)("Ошибки в заполнении формы регистрации"):this.createUser()}},{key:"testForm",value:function(){var e={};return new RegExp(".+@.{3,8}..{3,8}").test(this.state.fieldsValue.userEmail)||(e.userEmail="Введите корректный email"),(!this.state.fieldsValue.userName||this.state.fieldsValue.userName.length<3)&&(e.userName="Минимальная длина имени 3 символа"),(!this.state.fieldsValue.userPassword||this.state.fieldsValue.userPassword.length<8)&&(e.userPassword="Минимальная длина пароля 8 символов"),this.state.fieldsValue.confirmPassword!==this.state.fieldsValue.userPassword&&(e.confirmPassword="Пароли не совпадают"),e}},{key:"createUser",value:function(){var e=this;firebaseProj.auth().createUserWithEmailAndPassword(this.state.fieldsValue.userEmail,this.state.fieldsValue.userPassword).then((function(t){return t.user.updateProfile({displayName:e.state.fieldsValue.userName})})).then((function(){return(0,i.showDangerMessage)("Ошибка сохранения"),e.setState({registrationError:""}),firebaseProj.auth().currentUser.sendEmailVerification()})).catch((function(t){e.setState({registrationError:t.message})}))}}]),r}(e.Component);t.default=c}).call(this,r(5))},407:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),r(79);var s=n(r(181)),a=n(r(182));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return e.createElement("div",{className:"forms"},e.createElement("div",{className:"container w-75 row"},e.createElement("div",{className:"col-sm-6 border-right"},e.createElement("h3",null,"Регистрация"),e.createElement(a.default,null)),e.createElement("div",{className:"col-sm-6"},e.createElement("h3",null,"Авторизация"),e.createElement(s.default,null))))}}).call(this,r(5))},46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=null,a=document.querySelector("#message-window");function n(){a.classList.remove("show"),a.classList.remove("hide"),a.classList.remove("alert-success"),a.classList.remove("alert-danger"),s&&clearTimeout(s),s=setTimeout((function(){a.classList.add("hide")}),5e3)}t.showSuccessMessage=function(e){n(),a.classList.add("show"),a.classList.add("alert-success"),a.querySelector(".img").src=r(176),a.querySelector(".text").textContent=e},t.showDangerMessage=function(e){n(),a.classList.add("show"),a.classList.add("alert-danger"),a.querySelector(".img").src=r(119),a.querySelector(".text").textContent=e}},78:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=r(60);t.default=function(t){return t.error?e.createElement("div",{className:"alert alert-danger"},t.error):""===t.error&&t.successRedirect?e.createElement(s.Redirect,{to:t.successRedirect,push:!0}):""===t.error&&t.successMessage?e.createElement("div",null,t.successMessage):null}}).call(this,r(5))}}]);