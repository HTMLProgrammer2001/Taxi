(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{171:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(63);t.default=function(){return e.createElement("div",{className:"d-flex justify-content-between mb-3 p-2 align-items-center"},e.createElement("div",{className:"logo"},e.createElement("img",{src:n(172),alt:"Logo",className:"ml-3 logo-image"})),e.createElement("div",{className:"menu"},e.createElement(r.NavLink,{activeClassName:"active",className:"mr-3",to:"/profile"},"Профиль"),e.createElement(r.NavLink,{activeClassName:"active",className:"mr-3",to:"/history"},"История"),e.createElement(r.NavLink,{activeClassName:"active",to:"/dashboard",className:"mr-3"},"Доска объявлений"),e.createElement(r.NavLink,{to:"/",onClick:function(){firebaseProj.auth().signOut()},className:"mr-3"},"Выйти")))}}).call(this,n(6))},172:function(e,t,n){e.exports=n.p+"assets/images/logo.jpg"},176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(82),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);function i(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(a,o){try{var s=t[a](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(i)}("next")}))}}var l=[n(177),n(178),n(179),n(180)];n(181);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=null,this.googleMaps=t,this.geodecoder=new t.Geocoder,this.database=firebaseProj.database(),this.dbInfo=this.database.ref("/"),this.selectedAuto=null,this.orders=[],this.auto=[],this.icons={car:{free:n(383),wait:n(384),busy:n(385)},order:{free:n(386),inWait:n(387),inMove:n(388)}},this.areas=[]}var t,u;return a(e,[{key:"animateMove",value:function(){var e=this;this.auto.forEach((function(t){if(t.inMove){var n=t.coords,r=e.orders.find((function(e){return e.orderID===t.orderID}));if((!t.path.steps.length||!t.path.steps[0].distance.value)&&t.path.loaded)if(r.status===s.ORDER_WAIT)t.status=s.AUTO_WAIT,t.path.loaded=!1,t.marker.setIcon(e.icons.car.wait),r.status=s.ORDER_AUTO,r.marker.setMap(null),e.updateAutoData(t.autoID,{status:s.AUTO_WAIT}).then((function(){return e.updateOrderData(r.orderID,{status:s.ORDER_AUTO})}));else if(r.status===s.ORDER_MOVE)return t.inMove=!1,r.status=s.ORDER_PAY,t.status=s.AUTO_PAY,r.marker.setMap(null),t.marker.setIcon(e.icons.car.wait),void e.updateAutoData(t.autoID,{status:s.AUTO_PAY}).then((function(){return e.updateOrderData(r.orderID,{status:s.ORDER_PAY})}));for(var a=.01,o={lat:n.lat,lng:n.lng};a>0&&t.path.steps.length;){var i=t.path.steps[0].end_point,l=Math.sqrt(Math.pow(n.lat-i.lat(),2)+Math.pow(n.lng-i.lng(),2));if(l>a){o=i;for(var u=0;u<t.path.steps[0].path.length;u++){var c=t.path.steps[0].path[u];if(Math.sqrt(Math.pow(n.lat-c.lat(),2)+Math.pow(n.lng-c.lng(),2))>a){o={lat:t.path.steps[0].path[u].lat(),lng:t.path.steps[0].path[u].lng()};break}}a=0}else o={lat:i.lat(),lng:i.lng()},a-=l,t.path.steps.shift()}r.status===s.ORDER_MOVE&&(t.distance+=e.googleMaps.geometry.spherical.computeDistanceBetween(new e.googleMaps.LatLng(t.coords.lat,t.coords.lng),new e.googleMaps.LatLng(o.lat,o.lng))/1e3),t.marker.setPosition(o),t.coords=o,e.updateAutoData(t.autoID,{coords:t.coords,distance:t.distance}),[s.AUTO_PAY,s.AUTO_WAIT,s.AUTO_FREE].includes(t.status)||(t.path.directionServ.route({origin:t.coords,destination:t.path.dest,travelMode:"DRIVING"},(function(e,n){"OK"===n?(t.path.steps=e.routes[0].legs[0].steps,t.path.directionRenderer.setDirections(e),t.path.steps[0].distance.value&&(t.path.loaded=!0)):alert("Directions request failed due to "+n)})),t.messageWindow.setContent(e.createContentForAuto(t)))}}))}},{key:"createMap",value:function(e){var t=this;this.map=new this.googleMaps.Map(e,{center:{lat:46.65,lng:32.58},zoom:12,mapTypeControl:!1}),this.areas=l.map((function(e){var n=new t.googleMaps.Polygon(r({paths:e.paths},e.style));return n.setMap(t.map),n})),this.makeAreaControl(),setInterval(this.animateMove.bind(this),2e3)}},{key:"createOrder",value:(u=i(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.ORDER_FINISHED!==t.status){e.next=2;break}return e.abrupt("return");case 2:return n=this.icons.order.free,r=t.start,[s.ORDER_WAIT,s.ORDER_AUTO].includes(t.status)?n=this.icons.order.inWait:t.status!==s.ORDER_FREE&&(n=this.icons.order.inMove,r=t.destination),e.next=6,this.geocode({address:r});case 6:a=e.sent,t.coords=a[0].geometry.location,t.marker=this.createMarker(t.coords,n),[s.ORDER_PAY,s.ORDER_AUTO].includes(t.status)&&t.marker.setMap(null),t.messageWindow=this.createWindow(this.createContentForOrder(t)),t.marker.addListener("click",this.orderMarkerListener.bind(this,t)),this.orders.push(t);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"createAuto",value:function(e){var t=this.icons.car.free;[s.AUTO_WAIT,s.AUTO_PAY].includes(e.status)?t=this.icons.car.wait:e.status!==s.AUTO_FREE&&(t=this.icons.car.busy),e.marker=this.createMarker(e.coords,t),e.messageWindow=this.createWindow(this.createContentForAuto(e)),e.marker.addListener("click",this.autoMarkerClick.bind(this,e)),e.orderID&&s.AUTO_PAY!==e.status&&this.createPath(e),this.auto.push(e)}},{key:"createWindow",value:function(e){return new this.googleMaps.InfoWindow({content:e})}},{key:"createPath",value:function(e){var t=this,n=this.orders.find((function(t){return t.orderID===e.orderID})),r={dest:n.coords};r.directionServ=new this.googleMaps.DirectionsService,r.directionRenderer=new this.googleMaps.DirectionsRenderer({map:this.map,suppressMarkers:!0,preserveViewport:!0}),r.directionServ.route({origin:e.coords,destination:n.coords,travelMode:"DRIVING"},(function(a,o){if("OK"===o){if(e.inMove=!0,e.path.steps=a.routes[0].legs[0].steps,e.path.loaded=!0,r.directionRenderer.setDirections(a),e.tax)return;var s=t.selectTax(n.coords);e.tax=s,t.updateAutoData(e.autoID,{tax:s})}else alert("Directions request failed due to "+o)})),e.path=r}},{key:"createMarker",value:function(e,t){return new this.googleMaps.Marker({map:this.map,position:e,icon:t})}},{key:"createContentForAuto",value:function(t){var n="";if(window.onAutoButClick=this.autoButClick.bind(this),t.orderID&&""!==t.orderID){var r=(t.distance*t.tax).toFixed(2);n="<div>Номер заказа: "+t.orderID+"</div>",t.status!==s.AUTO_MOVE&&t.status!==s.AUTO_PAY||(n+="<div>Проехано на: "+r+" грн.</div>"),t.status===s.AUTO_WAIT&&(n+=e.makeBut(s.EVENT_WAIT,t.nomer,"Пассажир прибыл")),t.status===s.AUTO_PAY&&(n+=e.makeBut(s.EVENT_PAY,t.nomer,"Оплачено"))}else n=e.makeBut(s.EVENT_TRAVEL,t.nomer,"В путь");return'\n        <div class = "justify-content-center">\n            <div>Номер машины: '+t.nomer+"</div>\n            <div>Статус: "+t.status+"</div>\n            "+n+"\n        </div>"}},{key:"createContentForOrder",value:function(e){var t=Math.ceil((new Date-e.orderCreate)/6e4),n="";return n+='\n        <div class = "justify-content-center">\n            <div>Номер заказа: '+e.orderID+"</div>\n            <div>Телефон: "+e.phone+"</div>\n            <div>Пункт назначения: "+e.destination+"</div>",e.status===s.ORDER_FREE&&(n+="<div>Время ожидания: "+t+" минут</div>"),n+="<div>Статус: "+e.status+"</div></div>"}},{key:"eventTravelHandler",value:function(){this.selectedAuto&&this.selectedAuto.nomer===event.target.dataset.nomer?this.selectedAuto=null:(this.selectedAuto=this.auto.find((function(e){return e.nomer===event.target.dataset.nomer})),this.selectedAuto.messageWindow.setContent("<div>Выберите заказ</div>"))}},{key:"eventPayHandler",value:function(e,t){var n=this;this.updateAutoData(e.autoID,{status:s.AUTO_FREE,orderID:"",distance:0,tax:""}).then((function(){return n.updateOrderData(t.orderID,{status:s.ORDER_FINISHED,price:(e.distance*e.tax).toFixed(2),orderFinished:+new Date})})).then((function(){e.orderID="",e.tax=null,e.distance=0,e.inMove=!1,e.status=s.AUTO_FREE,e.path={},e.marker.setIcon(n.icons.car.free),e.messageWindow.close()}))}},{key:"eventWaitHandler",value:function(e,t){var n=this;e.status=s.AUTO_MOVE,e.marker.setIcon(this.icons.car.busy),t.status=s.ORDER_MOVE,this.geocode({address:t.destination}).then((function(r){n.updateAutoData(e.autoID,{status:s.AUTO_MOVE}).then((function(){return n.updateOrderData(t.orderID,{status:s.ORDER_MOVE})})).then((function(){t.marker.setPosition(r[0].geometry.location),t.marker.setMap(n.map),t.marker.setIcon(n.icons.order.inMove),e.path.dest=r[0].geometry.location,e.path.loaded=!1}))}))}},{key:"loadData",value:(t=i(regeneratorRuntime.mark((function e(t){var n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t.orders);case 1:if((e.t1=e.t0()).done){e.next=7;break}return n=e.t1.value,e.next=5,this.createOrder(r({orderID:n},t.orders[n]));case 5:e.next=1;break;case 7:t.auto.forEach((function(e,t){e&&a.createAuto(r({autoID:t},e))}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"orderMarkerListener",value:function(e){var t=this;this.selectedAuto?e.status!==s.ORDER_FREE?alert("Невозможно выбрать заказ который уже принят!"):(this.selectedAuto.marker.setIcon(this.icons.car.busy),e.marker.setIcon(this.icons.order.inWait),e.status=s.ORDER_WAIT,e.messageWindow.setContent(this.createContentForOrder(e)),this.selectedAuto.inMove=!0,this.selectedAuto.orderID=e.orderID,this.selectedAuto.status=s.AUTO_ORDER,this.selectedAuto.messageWindow.setContent(this.createContentForAuto(this.selectedAuto)),this.selectedAuto.messageWindow.close(),this.updateOrderData(e.orderID,{autoID:this.selectedAuto.autoID,status:s.ORDER_WAIT,orderAccept:+new Date}).then((function(){return t.updateAutoData(t.selectedAuto.autoID,{orderID:e.orderID,status:s.AUTO_ORDER})})).then((function(){t.createPath(t.selectedAuto),t.selectedAuto=null}))):(e.messageWindow.setContent(this.createContentForOrder(e)),e.messageWindow.open(this.map,e.marker))}},{key:"autoMarkerClick",value:function(e){this.selectedAuto?alert("Выберите заказ или отмените выбор заказа"):(e.messageWindow.setContent(this.createContentForAuto(e)),e.messageWindow.open(this.map,e.marker))}},{key:"autoButClick",value:function(e){var t=e.target.dataset.type,n=this.auto.find((function(t){return t.nomer===e.target.dataset.nomer})),r=this.orders.find((function(e){return e.orderID===n.orderID}));t===s.EVENT_TRAVEL?this.eventTravelHandler():t===s.EVENT_WAIT?this.eventWaitHandler(n,r):t===s.EVENT_PAY&&this.eventPayHandler(n,r)}},{key:"geocode",value:function(e){var t=this;return new Promise((function(n,r){try{t.geodecoder.geocode(e,(function(e,t){"OK"!==t?r(e):n(e)}))}catch(e){r(e)}}))}},{key:"updateAutoData",value:function(e,t){return this.dbInfo.child("auto/"+e).update(t)}},{key:"updateOrderData",value:function(e,t){return this.dbInfo.child("orders/"+e).update(t)}},{key:"selectTax",value:function(e){var t=this,n=this.areas.find((function(n){return t.googleMaps.geometry.poly.containsLocation(e,n)}));return n?this.auto.reduce((function(e,r){return t.googleMaps.geometry.poly.containsLocation(new t.googleMaps.LatLng(r.coords),n)?e+1:e}),0)<10?o.COST_BUSY_PER_KM:o.COST_PER_KM:o.COST_OFFCITY_PER_KM}},{key:"makeAreaControl",value:function(){var e=this,t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("input"),a=document.createElement("label");return t.append(n),n.append(r,a),t.className="p-3 bg-white",n.className="custom-control custom-checkbox",r.className="custom-control-input",r.style.zIndex=999,r.type="checkbox",r.name="showAreas",r.onchange=function(){e.areas.forEach((function(t){t.setMap(t.map?null:e.map)}))},a.className="custom-control-label",a.setAttribute("for","showAreas"),a.textContent="Скрыть районы",this.map.controls[this.googleMaps.ControlPosition.TOP_RIGHT].push(t),t}}],[{key:"makeBut",value:function(e,t,n){return"<div \n                    onclick = \"onAutoButClick(event)\"\n                    class = 'btn btn-link'\n                    data-type = "+e+" \n                    data-nomer = "+t+">\n                        "+n+"\n                    </div>"}}]),e}();t.default=u},177:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#0000FF","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#0000FF","fillOpacity":0.2},"paths":[{"lat":46.62,"lng":32.615},{"lat":46.615,"lng":32.613},{"lat":46.61,"lng":32.606},{"lat":46.611,"lng":32.603},{"lat":46.604,"lng":32.597},{"lat":46.603,"lng":32.593},{"lat":46.601,"lng":32.592},{"lat":46.598,"lng":32.584},{"lat":46.599,"lng":32.57},{"lat":46.598,"lng":32.563},{"lat":46.593,"lng":32.549},{"lat":46.593,"lng":32.545},{"lat":46.599,"lng":32.541},{"lat":46.619365581504,"lng":32.55666374625817},{"lat":46.62596781555112,"lng":32.56713509025231},{"lat":46.62643937288847,"lng":32.57932304801598},{"lat":46.626321483939236,"lng":32.586189503094104},{"lat":46.62596781555112,"lng":32.59511589469567},{"lat":46.62431733252116,"lng":32.604900593181995},{"lat":46.62302048912441,"lng":32.612110371014026},{"lat":46.62160571544314,"lng":32.62206673087731}]}')},178:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#00FF00","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#00FF00","fillOpacity":0.2},"paths":[{"lat":46.686,"lng":32.561},{"lat":46.686,"lng":32.566},{"lat":46.692,"lng":32.568},{"lat":46.692,"lng":32.572},{"lat":46.69,"lng":32.574},{"lat":46.694,"lng":32.578},{"lat":46.694,"lng":32.591},{"lat":46.697,"lng":32.591},{"lat":46.7,"lng":32.594},{"lat":46.701,"lng":32.6},{"lat":46.707,"lng":32.601},{"lat":46.709,"lng":32.608},{"lat":46.709,"lng":32.61},{"lat":46.7,"lng":32.619},{"lat":46.705,"lng":32.631},{"lat":46.694,"lng":32.655},{"lat":46.68864300456689,"lng":32.66078713215195},{"lat":46.67254290671487,"lng":32.6401112299168},{"lat":46.66252996718983,"lng":32.62723662664531},{"lat":46.66005589640207,"lng":32.61865355779766},{"lat":46.659231180980775,"lng":32.61607863714336},{"lat":46.65881881855283,"lng":32.61487700750469}]}')},179:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#FF0000","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#FF0000","fillOpacity":0.2},"paths":[{"lat":46.686,"lng":32.561},{"lat":46.67362902313192,"lng":32.5548966288245},{"lat":46.66514776493996,"lng":32.55420998331669},{"lat":46.65030236077375,"lng":32.5548966288245},{"lat":46.63616009132673,"lng":32.560389792887},{"lat":46.62955910040463,"lng":32.55815819498661},{"lat":46.62448993590961,"lng":32.55884484049442},{"lat":46.6239079268685,"lng":32.55936109436536},{"lat":46.62437950214957,"lng":32.56103479279065},{"lat":46.625528949687606,"lng":32.5623222531178},{"lat":46.62608892810822,"lng":32.564339274297},{"lat":46.626737316937366,"lng":32.566141718755006},{"lat":46.62726781111186,"lng":32.56828748596692},{"lat":46.62747411299792,"lng":32.57030450714612},{"lat":46.62714325300521,"lng":32.57522300290908},{"lat":46.62702536558893,"lng":32.577797923563374},{"lat":46.627379027067626,"lng":32.58071616697158},{"lat":46.62705483746708,"lng":32.582261119364155},{"lat":46.62743797042277,"lng":32.583505664347065},{"lat":46.62720219661711,"lng":32.58517936277236},{"lat":46.62699589369475,"lng":32.588226352213276},{"lat":46.62681906199261,"lng":32.593247447489155},{"lat":46.62661275761005,"lng":32.59779396243404},{"lat":46.62577065204671,"lng":32.60256088463972},{"lat":46.6248600455151,"lng":32.607538790508556},{"lat":46.624506367578896,"lng":32.61037120322828},{"lat":46.623563215119155,"lng":32.612797882206124},{"lat":46.6251842482601,"lng":32.61786189282624},{"lat":46.626908541550314,"lng":32.621380324890055},{"lat":46.63504218852414,"lng":32.61700295977775},{"lat":46.64863743283586,"lng":32.609091283687924},{"lat":46.65607221120781,"lng":32.60525993116524},{"lat":46.65880204724848,"lng":32.61463022315341},{"lat":46.658868320014186,"lng":32.61470532500583},{"lat":46.65881881855283,"lng":32.61487700750469}]}')},180:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#FFFF00","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#FFFF00","fillOpacity":0.2},"paths":[{"lat":46.64863743283586,"lng":32.609091283687924},{"lat":46.65607221120781,"lng":32.60525993116524},{"lat":46.65881881855283,"lng":32.61487700750469},{"lat":46.66252996718983,"lng":32.62723662664531},{"lat":46.67254290671487,"lng":32.6401112299168},{"lat":46.68864300456689,"lng":32.66078713215195},{"lat":46.68133836098231,"lng":32.66643529969558},{"lat":46.6690042292498,"lng":32.6674716210217},{"lat":46.65991047311372,"lng":32.67250925078899},{"lat":46.655732561661445,"lng":32.658752405295424},{"lat":46.65452124219093,"lng":32.6560282361271},{"lat":46.65139871932914,"lng":32.65225168583413},{"lat":46.64705838390696,"lng":32.64773855762838},{"lat":46.64426835365248,"lng":32.64483425691426},{"lat":46.6441586437947,"lng":32.64422384157214},{"lat":46.64190877030884,"lng":32.64126859499513},{"lat":46.64013550110595,"lng":32.639815601940256},{"lat":46.63764080043684,"lng":32.636154552635425},{"lat":46.6340873379837,"lng":32.6325184513261},{"lat":46.630435813604784,"lng":32.6272134416386},{"lat":46.62886008282364,"lng":32.6247575153268},{"lat":46.628144596153746,"lng":32.62298222318123},{"lat":46.62695099628392,"lng":32.621587910680255},{"lat":46.626908541550314,"lng":32.621380324890055}]}')},383:function(e,t,n){e.exports=n.p+"assets/images/carFree.png"},384:function(e,t,n){e.exports=n.p+"assets/images/carWait.png"},385:function(e,t,n){e.exports=n.p+"assets/images/carBusy.png"},386:function(e,t,n){e.exports=n.p+"assets/images/peopleFree.png"},387:function(e,t,n){e.exports=n.p+"assets/images/peopleBusy.png"},388:function(e,t,n){e.exports=n.p+"assets/images/target.png"},389:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onFormChange=t.onFormChange.bind(t),t.addOrder=t.addOrder.bind(t),t.state={fieldsValue:{orderStart:"",orderDestination:"",orderPhone:""},fieldsError:{},savingError:null},t}var o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),r(a,[{key:"render",value:function(){return e.createElement("form",{onSubmit:this.addOrder,className:"w-50 align-items-center d-flex flex-column"},this.state.savingError?e.createElement("div",{className:"alert alert-danger"},this.state.savingError):null,e.createElement("h3",{className:"text-center"},"Добавить заказ"),e.createElement("input",{type:"text",name:"orderStart",onInput:this.onFormChange,value:this.state.fieldsValue.orderStart,className:"form-control",placeholder:"Enter start address"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.orderStart),e.createElement("input",{type:"text",name:"orderDestination",onInput:this.onFormChange,value:this.state.fieldsValue.orderDestination,className:"form-control",placeholder:"Enter destination address"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.orderDestination),e.createElement("input",{type:"text",name:"orderPhone",onInput:this.onFormChange,value:this.state.fieldsValue.orderPhone,className:"form-control",placeholder:"Enter your phone"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.orderPhone),e.createElement("button",{type:"submit",name:"create",className:"btn btn-primary mt-3 w-50"},"Создать"))}},{key:"onFormChange",value:function(e){var t=e.target;this.setState((function(e){return{fieldsValue:n({},e.fieldsValue,(r={},a=t.name,o=t.value,a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r))};var r,a,o}))}},{key:"addOrder",value:(o=regeneratorRuntime.mark((function e(t){var r,a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=this.testForm(),this.setState({fieldsError:r}),!Object.keys(r).length){e.next=5;break}return e.abrupt("return");case 5:return a={destination:this.state.fieldsValue.orderDestination,start:this.state.fieldsValue.orderStart,status:"Free",orderCreate:+new Date,phone:this.state.fieldsValue.orderPhone,user:firebaseProj.auth().currentUser.uid},e.next=8,firebaseProj.database().ref("/orders").push(a);case 8:(o=e.sent).set(a).then((function(){s.props.onCreate(n({orderID:o.key},a)),s.setState({fieldsError:{},fieldsValue:{orderStart:"",orderDestination:"",orderPhone:""},savingError:null})}),(function(e){s.setState({savingError:e.message})}));case 10:case"end":return e.stop()}}),e,this)})),s=function(){var e=o.apply(this,arguments);return new Promise((function(t,n){return function r(a,o){try{var s=e[a](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(i)}("next")}))},function(e){return s.apply(this,arguments)})},{key:"testForm",value:function(){var e={};return new RegExp("\\+\\d{10}").test(this.state.fieldsValue.orderPhone)||(e.orderPhone="Input correct phone(like +380501122333)"),this.state.fieldsValue.orderStart||(e.userName="Enter start address!"),this.state.fieldsValue.orderDestination||(e.userName="Enter destination address!"),e}}]),a}(e.Component);t.default=a}).call(this,n(6))},396:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(176)),o=i(n(389)),s=i(n(81));function i(e){return e&&e.__esModule?e:{default:e}}var l=n(390),u=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.mapControll=null,t.mapElem=null,t.onOrderCreate=t.onOrderCreate.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentDidMount",value:function(){var e=this;l({key:"AIzaSyDdJjjkx2zXC_pIjlW7MtTgU2HvYFrqIqY"}).then((function(t){e.mapControll=new a.default(t),e.mapControll.createMap(e.mapElem)})),firebaseProj.database().ref("/").once("value").then((function(t){e.mapControll.loadData(t.val())}))}},{key:"render",value:function(){var t=this;return e.createElement(e.Fragment,null,e.createElement("div",{id:"map",ref:function(e){return t.mapElem=e}},"."),e.createElement("div",{className:"mt-3 d-flex justify-content-center"},e.createElement(o.default,{onCreate:this.onOrderCreate})))}},{key:"onOrderCreate",value:function(e){this.mapControll.createOrder(e)}}]),n}(e.Component);t.default=(0,s.default)(u)}).call(this,n(6))},81:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(171),s=(r=o)&&r.__esModule?r:{default:r},i=n(63);t.default=function(t){return function(n){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),a(r,[{key:"render",value:function(){return firebaseProj.auth().currentUser?e.createElement(e.Fragment,null,e.createElement(s.default,null),e.createElement(t,null)):e.createElement(i.Redirect,{to:"/"})}}]),r}(e.Component)}}).call(this,n(6))},82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AUTO_FREE="Free",t.AUTO_ORDER="MoveToOrder",t.AUTO_WAIT="Wait",t.AUTO_MOVE="Move",t.AUTO_PAY="Pay",t.ORDER_FREE="Free",t.ORDER_WAIT="Wait",t.ORDER_AUTO="MoveToAuto",t.ORDER_MOVE="Move",t.ORDER_PAY="Pay",t.ORDER_FINISHED="Finished",t.EVENT_TRAVEL="InTravel",t.EVENT_PAY="Pay",t.EVENT_WAIT="Wait",t.COST_PER_KM=10,t.COST_BUSY_PER_KM=12.5,t.COST_OFFCITY_PER_KM=20}}]);