(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(ni,ri,ii){"use strict";(function(u){var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(ri,"__esModule",{value:!0});var t,e=(t=ii(16))&&"object"===(void 0===t?"undefined":b(t))&&"default"in t?t.default:t,f=ii(17),w=ii(32),n=ii(57),r=ii(27),i=(o.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),w.stringify(e))},o.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:w.jsonEval(e)},o.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},o.prototype.prefixedName_=function(t){return this.prefix_+t},o.prototype.toString=function(){return this.domStorage_.toString()},o);function o(t){this.domStorage_=t,this.prefix_="firebase:"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a=(s.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},s.prototype.get=function(t){return w.contains(this.cache_,t)?this.cache_[t]:null},s.prototype.remove=function(t){delete this.cache_[t]},s);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s(){this.cache_={},this.isInMemoryStorage=!0}function h(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new i(e)}}catch(t){}return new a}function c(t){var e=w.stringToByteArray(t),n=new w.Sha1;n.update(e);var r=n.digest();return w.base64.encodeByteArray(r)}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"===(void 0===i?"undefined":b(i))&&"number"==typeof i.length?n+=l.apply(null,i):"object"===(void 0===i?"undefined":b(i))?n+=w.stringify(i):n+=i,n+=" "}return n}function p(t,e){w.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(k.logLevel=n.LogLevel.VERBOSE,R=k.log.bind(k),e&&A.set("logging_enabled",!0)):"function"==typeof t?R=t:(R=null,A.remove("logging_enabled"))}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===O&&(O=!1,null===R&&!0===A.get("logging_enabled")&&p(!0)),R){var n=l.apply(null,t);R(n)}}function v(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d.apply(void 0,f.__spread([n],t))}}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+l.apply(void 0,f.__spread(t));k.error(n)}function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+l.apply(void 0,f.__spread(t));throw k.error(n),new Error(n)}function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+l.apply(void 0,f.__spread(t));k.warn(n)}function _(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function E(t,e){return t===e?0:t<e?-1:1}function C(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+w.stringify(e))}function T(t){if("object"!==(void 0===t?"undefined":b(t))||null===t)return w.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=w.stringify(e[i]),r+=":",r+=T(t[e[i]]);return r+="}"}function I(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var S,N=h("localStorage"),A=h("sessionStorage"),k=new n.Logger("@firebase/database"),P=(S=1,function(){return S++}),R=null,O=!0,D="[MIN_NAME]",x="[MAX_NAME]",L=function(t,e){if(t===e)return 0;if(t===D||e===x)return-1;if(e===D||t===x)return 1;var n=W(t),r=W(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1};function M(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function F(t){var e,n,r,i,o;w.assert(!_(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;--o)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;--o)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var h=parseInt(s.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),u+=h}return u.toLowerCase()}function j(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw m("Exception was thrown by user callback.",t),e},Math.floor(0))}}function U(t,e){var n=setTimeout(t,e);return"object"===(void 0===n?"undefined":b(n))&&n.unref&&n.unref(),n}var V=new RegExp("^-?(0*)\\d{1,10}$"),W=function(t){if(V.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},q=(Object.defineProperty(H,"Empty",{get:function(){return new H("")},enumerable:!0,configurable:!0}),H.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},H.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},H.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new H(this.pieces_,t)},H.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},H.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},H.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},H.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},H.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new H(t,0)},H.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof H)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new H(e,0)},H.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},H.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return H.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},H.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=L(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},H.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},H.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},H);function H(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var B=(Object.defineProperty(Q,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Q,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Q.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=w.stringLength(t),this.checkValid_()},Q.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=w.stringLength(t),0<this.parts_.length&&--this.byteLength_},Q.prototype.checkValid_=function(){if(this.byteLength_>Q.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Q.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Q.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Q.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Q.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Q);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=w.stringLength(this.parts_[n]);this.checkValid_()}var K="5",G="firebaseio.com",z="websocket",Y="long_polling",X=(J.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},J.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},J.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},J.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},J.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&N.set("host:"+this.host,this.internalHost))},J.prototype.connectionURL=function(t,e){var n;if(w.assert("string"==typeof t,"typeof type must == string"),w.assert("object"===(void 0===e?"undefined":b(e)),"typeof params must == object"),t===z)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Y)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return M(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},J.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},J.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},J);function J(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=N.get("host:"+t)||this.host}function $(t){var e=ct(t),n=e.namespace;"firebase"===e.domain&&g(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||g("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&m("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new X(e.host,e.secure,n,r,"",n!==e.subdomain),path:new q(e.pathString)}}function Z(t){return"string"==typeof t&&0!==t.length&&!lt.test(t)}function tt(t){return"string"==typeof t&&0!==t.length&&!pt.test(t)}function et(t){return null===t||"string"==typeof t||"number"==typeof t&&!_(t)||t&&"object"===(void 0===t?"undefined":b(t))&&w.contains(t,".sv")}function nt(t,e,n,r,i){i&&void 0===n||ft(w.errorPrefix(t,e,i),n,r)}function rt(t,e,n,r,i){if(!i||void 0!==n){var o=w.errorPrefix(t,e,i);if(!n||"object"!==(void 0===n?"undefined":b(n))||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];M(n,function(t,e){var n=new q(t);if(ft(o,e,r.child(n)),".priority"===n.getBack()&&!et(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Z(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(q.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}}function it(t,e,n,r){if(!r||void 0!==n){if(_(n))throw new Error(w.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!et(n))throw new Error(w.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function ot(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(w.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function at(t,e,n,r){if(!(r&&void 0===n||Z(n)))throw new Error(w.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function st(t,e,n,r){if(!(r&&void 0===n||tt(n)))throw new Error(w.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function ut(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function ht(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Z(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!tt(r)))throw new Error(w.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var ct=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var h=t.indexOf("//");0<=h&&(s=t.substring(0,h-1),t=t.substring(h+2));var c=t.indexOf("/");-1===c&&(c=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(c,l)),c<l&&(i=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c,l)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=f.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):m("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(h=e.indexOf(":"))?(a="https"===s||"wss"===s,u=parseInt(e.substring(h+1),10)):h=t.length;var d=e.split(".");3===d.length?(n=d[1],o=r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,h).toLowerCase()&&(n="localhost"),"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},lt=/[\[\].#$\/\u0000-\u001F\u007F]/,pt=/[\[\].#$\u0000-\u001F\u007F]/,dt=10485760,ft=function n(r,t,e){var i=e instanceof q?new B(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+i.toErrorString());if("function"==typeof t)throw new Error(r+"contains a function "+i.toErrorString()+" with contents = "+t.toString());if(_(t))throw new Error(r+"contains "+t.toString()+" "+i.toErrorString());if("string"==typeof t&&t.length>dt/3&&w.stringLength(t)>dt)throw new Error(r+"contains a string greater than "+dt+" utf8 bytes "+i.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"===(void 0===t?"undefined":b(t))){var o=!1,a=!1;if(M(t,function(t,e){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!Z(t)))throw new Error(r+" contains an invalid key ("+t+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(t),n(r,e,i),i.pop()}),o&&a)throw new Error(r+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},vt=(yt.prototype.cancel=function(t){w.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),w.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new w.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},yt.prototype.remove=function(t){w.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ut("OnDisconnect.remove",this.path_),w.validateCallback("OnDisconnect.remove",1,t,!0);var e=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},yt.prototype.set=function(t,e){w.validateArgCount("OnDisconnect.set",1,2,arguments.length),ut("OnDisconnect.set",this.path_),nt("OnDisconnect.set",1,t,this.path_,!1),w.validateCallback("OnDisconnect.set",2,e,!0);var n=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},yt.prototype.setWithPriority=function(t,e,n){w.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ut("OnDisconnect.setWithPriority",this.path_),nt("OnDisconnect.setWithPriority",1,t,this.path_,!1),it("OnDisconnect.setWithPriority",2,e,!1),w.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new w.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},yt.prototype.update=function(t,e){if(w.validateArgCount("OnDisconnect.update",1,2,arguments.length),ut("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,m("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rt("OnDisconnect.update",1,t,this.path_,!1),w.validateCallback("OnDisconnect.update",2,e,!0);var i=new w.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},yt);function yt(t,e){this.repo_=t,this.path_=e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt=(mt.prototype.toJSON=function(){return w.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},mt);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){this.committed=t,this.snapshot=e}var _t,bt,wt,Et=(_t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bt=0,wt=[],function(t){var e,n=t===bt;bt=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=_t.charAt(t%64),t=Math.floor(t/64);w.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===wt[e];e--)wt[e]=0;wt[e]++}else for(e=0;e<12;e++)wt[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=_t.charAt(wt[e]);return w.assert(20===i.length,"nextPushId: Length should be 20."),i}),Ct=(Tt.Wrap=function(t,e){return new Tt(t,e)},Tt);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,e){this.name=t,this.node=e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,St=(Nt.prototype.getCompare=function(){return this.compare.bind(this)},Nt.prototype.indexedValueChanged=function(t,e){var n=new Ct(D,t),r=new Ct(D,e);return 0!==this.compare(n,r)},Nt.prototype.minPost=function(){return Ct.MIN},Nt);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){}var At,kt=(At=St,f.__extends(Pt,At),Object.defineProperty(Pt,"__EMPTY_NODE",{get:function(){return It},set:function(t){It=t},enumerable:!0,configurable:!0}),Pt.prototype.compare=function(t,e){return L(t.name,e.name)},Pt.prototype.isDefinedOn=function(t){throw w.assertionError("KeyIndex.isDefinedOn not expected to be called.")},Pt.prototype.indexedValueChanged=function(t,e){return!1},Pt.prototype.minPost=function(){return Ct.MIN},Pt.prototype.maxPost=function(){return new Ct(x,It)},Pt.prototype.makePost=function(t,e){return w.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,It)},Pt.prototype.toString=function(){return".key"},Pt);function Pt(){return null!==At&&At.apply(this,arguments)||this}var Rt,Ot=new kt;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return"number"==typeof t?"number:"+F(t):"string:"+t}function xt(t){if(t.isLeafNode()){var e=t.val();w.assert("string"==typeof e||"number"==typeof e||"object"===(void 0===e?"undefined":b(e))&&w.contains(e,".sv"),"Priority must be a string or number.")}else w.assert(t===Rt||t.isEmpty(),"priority of unexpected type.");w.assert(t===Rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var Lt,Mt,Ft,jt,Ut=(Object.defineProperty(Vt,"__childrenNodeConstructor",{get:function(){return Lt},set:function(t){Lt=t},enumerable:!0,configurable:!0}),Vt.prototype.isLeafNode=function(){return!0},Vt.prototype.getPriority=function(){return this.priorityNode_},Vt.prototype.updatePriority=function(t){return new Vt(this.value_,t)},Vt.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE},Vt.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE},Vt.prototype.hasChild=function(){return!1},Vt.prototype.getPredecessorChildName=function(t,e){return null},Vt.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Vt.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(w.assert(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Vt.prototype.isEmpty=function(){return!1},Vt.prototype.numChildren=function(){return 0},Vt.prototype.forEachChild=function(t,e){return!1},Vt.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Vt.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Dt(this.priorityNode_.val())+":");var e=b(this.value_);t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=c(t)}return this.lazyHash_},Vt.prototype.getValue=function(){return this.value_},Vt.prototype.compareTo=function(t){return t===Vt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Vt.__childrenNodeConstructor?-1:(w.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Vt.prototype.compareToLeafNode_=function(t){var e=b(t.value_),n=b(this.value_),r=Vt.VALUE_TYPE_ORDER.indexOf(e),i=Vt.VALUE_TYPE_ORDER.indexOf(n);return w.assert(0<=r,"Unknown leaf type: "+e),w.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Vt.prototype.withIndex=function(){return this},Vt.prototype.isIndexed=function(){return!0},Vt.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Vt.VALUE_TYPE_ORDER=["object","boolean","number","string"],Vt);function Vt(t,e){void 0===e&&(e=Vt.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,w.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),xt(this.priorityNode_)}function Wt(){return null!==jt&&jt.apply(this,arguments)||this}var qt=new(jt=St,f.__extends(Wt,jt),Wt.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?L(t.name,e.name):i},Wt.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Wt.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Wt.prototype.minPost=function(){return Ct.MIN},Wt.prototype.maxPost=function(){return new Ct(x,new Ut("[PRIORITY-POST]",Ft))},Wt.prototype.makePost=function(t,e){var n=Mt(t);return new Ct(e,new Ut("[PRIORITY-POST]",n))},Wt.prototype.toString=function(){return".priority"},Wt),Ht=(Bt.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Bt.prototype.hasNext=function(){return 0<this.nodeStack_.length},Bt.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Bt);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Qt=(Kt.prototype.copy=function(t,e,n,r,i){return new Kt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Kt.prototype.count=function(){return this.left.count()+1+this.right.count()},Kt.prototype.isEmpty=function(){return!1},Kt.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Kt.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Kt.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Kt.prototype.minKey=function(){return this.min_().key},Kt.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Kt.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Kt.prototype.removeMin_=function(){if(this.left.isEmpty())return Yt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Kt.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Yt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},Kt.prototype.isRed_=function(){return this.color},Kt.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Kt.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Kt.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Kt.prototype.rotateLeft_=function(){var t=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Kt.prototype.rotateRight_=function(){var t=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Kt.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Kt.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Kt.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Kt.RED=!0,Kt.BLACK=!1,Kt);function Kt(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Kt.RED,this.left=null!=r?r:Yt.EMPTY_NODE,this.right=null!=i?i:Yt.EMPTY_NODE}var Gt=(zt.prototype.copy=function(t,e,n,r,i){return this},zt.prototype.insert=function(t,e,n){return new Qt(t,e,null)},zt.prototype.remove=function(t,e){return this},zt.prototype.count=function(){return 0},zt.prototype.isEmpty=function(){return!0},zt.prototype.inorderTraversal=function(t){return!1},zt.prototype.reverseTraversal=function(t){return!1},zt.prototype.minKey=function(){return null},zt.prototype.maxKey=function(){return null},zt.prototype.check_=function(){return 0},zt.prototype.isRed_=function(){return!1},zt);function zt(){}var Yt=(Xt.prototype.insert=function(t,e){return new Xt(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Qt.BLACK,null,null))},Xt.prototype.remove=function(t){return new Xt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Qt.BLACK,null,null))},Xt.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Xt.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Xt.prototype.isEmpty=function(){return this.root_.isEmpty()},Xt.prototype.count=function(){return this.root_.count()},Xt.prototype.minKey=function(){return this.root_.minKey()},Xt.prototype.maxKey=function(){return this.root_.maxKey()},Xt.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Xt.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Xt.prototype.getIterator=function(t){return new Ht(this.root_,null,this.comparator_,!1,t)},Xt.prototype.getIteratorFrom=function(t,e){return new Ht(this.root_,t,this.comparator_,!1,e)},Xt.prototype.getReverseIteratorFrom=function(t,e){return new Ht(this.root_,t,this.comparator_,!0,e)},Xt.prototype.getReverseIterator=function(t){return new Ht(this.root_,null,this.comparator_,!0,t)},Xt.EMPTY_NODE=new Gt,Xt);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,e){void 0===e&&(e=Xt.EMPTY_NODE),this.comparator_=t,this.root_=e}var Jt=Math.log(2),$t=(Zt.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Zt);function Zt(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Jt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var te,ee,ne=function(h,t,c,e){h.sort(t);var n=function(t){for(var e=null,n=null,s=h.length,r=function(t,e){var n=s-t,r=s;s-=t;var i=function t(e,n){var r,i,o=n-e;if(0==o)return null;if(1==o)return r=h[e],i=c?c(r):r,new Qt(i,r.node,Qt.BLACK,null,null);var a=parseInt(o/2,10)+e,s=t(e,a),u=t(a+1,n);return r=h[a],i=c?c(r):r,new Qt(i,r.node,Qt.BLACK,s,u)}(1+n,r),o=h[n],a=c?c(o):o;u(new Qt(a,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),a=Math.pow(2,t.count-(i+1));o?r(a,Qt.BLACK):(r(a,Qt.BLACK),r(a,Qt.RED))}return n}(new $t(h.length));return new Yt(e||t,n)},re={},ie=(Object.defineProperty(oe,"Default",{get:function(){return w.assert(qt,"ChildrenNode.ts has not been loaded"),te=te||new oe({".priority":re},{".priority":qt})},enumerable:!0,configurable:!0}),oe.prototype.get=function(t){var e=w.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Yt?e:null},oe.prototype.hasIndex=function(t){return w.contains(this.indexSet_,t.toString())},oe.prototype.addIndex=function(t,e){w.assert(t!==Ot,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Ct.Wrap),a=o.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?ne(r,t.getCompare()):re;var s=t.toString(),u=f.__assign({},this.indexSet_);u[s]=t;var h=f.__assign({},this.indexes_);return h[s]=n,new oe(h,u)},oe.prototype.addToIndexes=function(u,h){var c=this;return new oe(w.map(this.indexes_,function(t,e){var n=w.safeGet(c.indexSet_,e);if(w.assert(n,"Missing index implementation for "+e),t===re){if(n.isDefinedOn(u.node)){for(var r=[],i=h.getIterator(Ct.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),ne(r,n.getCompare())}return re}var a=h.get(u.name),s=t;return a&&(s=s.remove(new Ct(u.name,a))),s.insert(u,u.node)}),this.indexSet_)},oe.prototype.removeFromIndexes=function(n,r){return new oe(w.map(this.indexes_,function(t){if(t===re)return t;var e=r.get(n.name);return e?t.remove(new Ct(n.name,e)):t}),this.indexSet_)},oe);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t,e){this.indexes_=t,this.indexSet_=e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e){return L(t.name,e.name)}function se(t,e){return L(t,e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue,he=(Object.defineProperty(ce,"EMPTY_NODE",{get:function(){return ee=ee||new ce(new Yt(se),null,ie.Default)},enumerable:!0,configurable:!0}),ce.prototype.isLeafNode=function(){return!1},ce.prototype.getPriority=function(){return this.priorityNode_||ee},ce.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new ce(this.children_,t,this.indexMap_)},ce.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ee:e},ce.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},ce.prototype.hasChild=function(t){return null!==this.children_.get(t)},ce.prototype.updateImmediateChild=function(t,e){if(w.assert(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Ct(t,e),r=void 0,i=void 0;i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));var o=r.isEmpty()?ee:this.priorityNode_;return new ce(r,o,i)},ce.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;w.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},ce.prototype.isEmpty=function(){return this.children_.isEmpty()},ce.prototype.numChildren=function(){return this.children_.count()},ce.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(qt,function(t,e){r[t]=e.val(n),i++,a&&ce.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):a=!1}),!n&&a&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},ce.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+Dt(this.getPriority().val())+":"),this.forEachChild(qt,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":c(r)}return this.lazyHash_},ce.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},ce.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},ce.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},ce.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},ce.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},ce.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},ce.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},ce.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},ce.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},ce.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},ce.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===pe?-1:0},ce.prototype.withIndex=function(t){if(t===Ot||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new ce(this.children_,this.priorityNode_,e)},ce.prototype.isIndexed=function(t){return t===Ot||this.indexMap_.hasIndex(t)},ce.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(qt),r=e.getIterator(qt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},ce.prototype.resolveIndex_=function(t){return t===Ot?null:this.indexMap_.get(t.toString())},ce.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,ce);function ce(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&xt(this.priorityNode_),this.children_.isEmpty()&&w.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function le(){return ue.call(this,new Yt(se),he.EMPTY_NODE,ie.Default)||this}var pe=new(ue=he,f.__extends(le,ue),le.prototype.compareTo=function(t){return t===this?0:1},le.prototype.equals=function(t){return t===this},le.prototype.getPriority=function(){return this},le.prototype.getImmediateChild=function(t){return he.EMPTY_NODE},le.prototype.isEmpty=function(){return!1},le);Object.defineProperties(Ct,{MIN:{value:new Ct(D,he.EMPTY_NODE)},MAX:{value:new Ct(x,pe)}}),kt.__EMPTY_NODE=he.EMPTY_NODE,Ut.__childrenNodeConstructor=he,Rt=pe,Ft=pe;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de,fe=!0;function ve(r,t){if(void 0===t&&(t=null),null===r)return he.EMPTY_NODE;if("object"===(void 0===r?"undefined":b(r))&&".priority"in r&&(t=r[".priority"]),w.assert(null===t||"string"==typeof t||"number"==typeof t||"object"===(void 0===t?"undefined":b(t))&&".sv"in t,"Invalid priority type found: "+(void 0===t?"undefined":b(t))),"object"===(void 0===r?"undefined":b(r))&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!==(void 0===r?"undefined":b(r))||".sv"in r)return new Ut(r,ve(t));if(r instanceof Array||!fe){var i=he.EMPTY_NODE;return M(r,function(t,e){if(w.contains(r,t)&&"."!==t.substring(0,1)){var n=ve(e);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n))}}),i.updatePriority(ve(t))}var o=[],a=!1;if(M(r,function(t,e){if("."!==t.substring(0,1)){var n=ve(e);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new Ct(t,n)))}}),0===o.length)return he.EMPTY_NODE;var e=ne(o,ae,function(t){return t.name},se);if(a){var n=ne(o,qt.getCompare());return new he(e,ve(t),new ie({".priority":n},{".priority":qt}))}return new he(e,ve(t),ie.Default)}function ye(){return null!==de&&de.apply(this,arguments)||this}Mt=ve;var ge,me=new(de=St,f.__extends(ye,de),ye.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?L(t.name,e.name):n},ye.prototype.isDefinedOn=function(t){return!0},ye.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},ye.prototype.minPost=function(){return Ct.MIN},ye.prototype.maxPost=function(){return Ct.MAX},ye.prototype.makePost=function(t,e){var n=ve(t);return new Ct(e,n)},ye.prototype.toString=function(){return".value"},ye),_e=(ge=St,f.__extends(be,ge),be.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},be.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},be.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?L(t.name,e.name):i},be.prototype.makePost=function(t,e){var n=ve(t),r=he.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},be.prototype.maxPost=function(){var t=he.EMPTY_NODE.updateChild(this.indexPath_,pe);return new Ct(x,t)},be.prototype.toString=function(){return this.indexPath_.slice().join("/")},be);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t){var e=ge.call(this)||this;return e.indexPath_=t,w.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we=(Ee.prototype.val=function(){return w.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Ee.prototype.exportVal=function(){return w.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Ee.prototype.toJSON=function(){return w.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Ee.prototype.exists=function(){return w.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Ee.prototype.child=function(t){w.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),st("DataSnapshot.child",1,t,!1);var e=new q(t),n=this.ref_.child(e);return new Ee(this.node_.getChild(e),n,qt)},Ee.prototype.hasChild=function(t){w.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),st("DataSnapshot.hasChild",1,t,!1);var e=new q(t);return!this.node_.getChild(e).isEmpty()},Ee.prototype.getPriority=function(){return w.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Ee.prototype.forEach=function(n){var r=this;return w.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),w.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Ee(e,r.ref_.child(t),qt))})},Ee.prototype.hasChildren=function(){return w.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Ee.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),Ee.prototype.numChildren=function(){return w.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Ee.prototype.getRef=function(){return w.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Ee.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Ee);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Ce=(Te.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Te.prototype.getEventType=function(){return this.eventType},Te.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Te.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+w.stringify(this.snapshot.exportVal())},Te);function Te(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Ie=(Se.prototype.getPath=function(){return this.path},Se.prototype.getEventType=function(){return"cancel"},Se.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Se.prototype.toString=function(){return this.path.toString()+":cancel"},Se);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Ne=(Ae.prototype.respondsTo=function(t){return"value"===t},Ae.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ce("value",this,new we(t.snapshotNode,e.getRef(),n))},Ae.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Ae.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ie(this,t,e):null},Ae.prototype.matches=function(t){return t instanceof Ae&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Ae.prototype.hasAnyCallback=function(){return null!==this.callback_},Ae);function Ae(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var ke,Pe=(Re.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,w.contains(this.callbacks_,e)},Re.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ie(this,t,e):null},Re.prototype.createEvent=function(t,e){w.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ce(t.type,this,new we(t.snapshotNode,n,r),t.prevName)},Re.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Re.prototype.matches=function(e){var n=this;if(e instanceof Re){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],a=r[0];return!(a!==o||e.callbacks_[o]&&this.callbacks_[a]&&e.callbacks_[o]!==this.callbacks_[a])}}}return!1},Re.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Re);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Oe=(Object.defineProperty(De,"__referenceConstructor",{get:function(){return w.assert(ke,"Reference.ts has not been loaded"),ke},set:function(t){ke=t},enumerable:!0,configurable:!0}),De.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ot){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==D)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===qt){if(null!=e&&!et(e)||null!=n&&!et(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(w.assert(t.getIndex()instanceof _e||t.getIndex()===me,"unknown index type."),null!=e&&"object"===(void 0===e?"undefined":b(e))||null!=n&&"object"===(void 0===n?"undefined":b(n)))throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},De.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},De.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},De.prototype.getQueryParams=function(){return this.queryParams_},De.prototype.getRef=function(){return w.validateArgCount("Query.ref",0,0,arguments.length),new De.__referenceConstructor(this.repo,this.path)},De.prototype.on=function(t,e,n,r){w.validateArgCount("Query.on",2,4,arguments.length),ot("Query.on",1,t,!1),w.validateCallback("Query.on",2,e,!1);var i=De.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},De.prototype.onValueEvent=function(t,e,n){var r=new Ne(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},De.prototype.onChildEvent=function(t,e,n){var r=new Pe(t,e,n);this.repo.addEventCallbackForQuery(this,r)},De.prototype.off=function(t,e,n){w.validateArgCount("Query.off",0,3,arguments.length),ot("Query.off",1,t,!0),w.validateCallback("Query.off",2,e,!0),w.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Ne(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Pe(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},De.prototype.once=function(e,n,t,r){var i=this;w.validateArgCount("Query.once",1,4,arguments.length),ot("Query.once",1,e,!1),w.validateCallback("Query.once",2,n,!0);var o=De.getCancelAndContextArgs_("Query.once",t,r),a=!0,s=new w.Deferred;function u(t){a&&(a=!1,i.off(e,u),n&&n.bind(o.context)(t),s.resolve(t))}return s.promise.catch(function(){}),this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),s.reject(t)}),s.promise},De.prototype.limitToFirst=function(t){if(w.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new De(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},De.prototype.limitToLast=function(t){if(w.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new De(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},De.prototype.orderByChild=function(t){if(w.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');st("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new q(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new _e(e),r=this.queryParams_.orderBy(n);return De.validateQueryEndpoints_(r),new De(this.repo,this.path,r,!0)},De.prototype.orderByKey=function(){w.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Ot);return De.validateQueryEndpoints_(t),new De(this.repo,this.path,t,!0)},De.prototype.orderByPriority=function(){w.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(qt);return De.validateQueryEndpoints_(t),new De(this.repo,this.path,t,!0)},De.prototype.orderByValue=function(){w.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(me);return De.validateQueryEndpoints_(t),new De(this.repo,this.path,t,!0)},De.prototype.startAt=function(t,e){void 0===t&&(t=null),w.validateArgCount("Query.startAt",0,2,arguments.length),nt("Query.startAt",1,t,this.path,!0),at("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(De.validateLimit_(n),De.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new De(this.repo,this.path,n,this.orderByCalled_)},De.prototype.endAt=function(t,e){void 0===t&&(t=null),w.validateArgCount("Query.endAt",0,2,arguments.length),nt("Query.endAt",1,t,this.path,!0),at("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(De.validateLimit_(n),De.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new De(this.repo,this.path,n,this.orderByCalled_)},De.prototype.equalTo=function(t,e){if(w.validateArgCount("Query.equalTo",1,2,arguments.length),nt("Query.equalTo",1,t,this.path,!1),at("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},De.prototype.toString=function(){return w.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},De.prototype.toJSON=function(){return w.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},De.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},De.prototype.queryIdentifier=function(){var t=this.queryObject(),e=T(t);return"{}"===e?"default":e},De.prototype.isEqual=function(t){if(w.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof De))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},De.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,w.validateCallback(t,3,r.cancel,!0),r.context=n,w.validateContextObject(t,4,r.context,!0);else if(e)if("object"===(void 0===e?"undefined":b(e))&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(w.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(De.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),De);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var xe=(Le.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Le.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new Le);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},Le.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(qt,function(t,e){n.remember(new q(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Le.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new q(r.toString()+"/"+t);e.forEachTree(n,i)})},Le.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Le);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){this.value=null,this.children=new Map}function Me(t,e){return t&&"object"===(void 0===t?"undefined":b(t))?(w.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}var Fe,je,Ue=function r(t,i){var o,e=t.getPriority().val(),n=Me(e,i);if(t.isLeafNode()){var a=t,s=Me(a.getValue(),i);return s!==a.getValue()||n!==a.getPriority().val()?new Ut(s,ve(n)):t}var u=t;return n!==(o=u).getPriority().val()&&(o=o.updatePriority(new Ut(n))),u.forEachChild(qt,function(t,e){var n=r(e,i);n!==e&&(o=o.updateImmediateChild(t,n))}),o};(je=Fe=Fe||{})[je.OVERWRITE=0]="OVERWRITE",je[je.MERGE=1]="MERGE",je[je.ACK_USER_WRITE=2]="ACK_USER_WRITE",je[je.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Ve=(We.User=new We(!0,!1,null,!1),We.Server=new We(!1,!0,null,!1),We.forServerTaggedQuery=function(t){return new We(!1,!0,t,!0)},We);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,w.assert(!r||e,"Tagged queries must be from server.")}var qe,He=(Be.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return w.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new q(t));return new Be(q.Empty,e,this.revert)}return w.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new Be(this.path.popFront(),this.affectedTree,this.revert)},Be);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source=Ve.User}var Qe=(Ke.fromObject=function(t){var n=Ke.Empty;return M(t,function(t,e){n=n.set(new q(t),e)}),n},Ke.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Ke.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new q(n).child(i.path),value:i.value}},Ke.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Ke.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):Ke.Empty},Ke.prototype.set=function(t,e){if(t.isEmpty())return new Ke(e,this.children);var n=t.getFront(),r=(this.children.get(n)||Ke.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new Ke(this.value,i)},Ke.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Ke.Empty:new Ke(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?Ke.Empty:new Ke(this.value,i)}return this},Ke.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},Ke.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||Ke.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ke(this.value,i)},Ke.prototype.fold=function(t){return this.fold_(q.Empty,t)},Ke.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Ke.prototype.findOnPath=function(t,e){return this.findOnPath_(t,q.Empty,e)},Ke.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},Ke.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,q.Empty,e)},Ke.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Ke.Empty},Ke.prototype.foreach=function(t){this.foreach_(q.Empty,t)},Ke.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Ke.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Ke.Empty=new Ke(null),Ke);function Ke(t,e){void 0===e&&(e=qe=qe||new Yt(E)),this.value=t,this.children=e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge=(ze.prototype.operationForChild=function(t){return this.path.isEmpty()?new ze(this.source,q.Empty):new ze(this.source,this.path.popFront())},ze);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}var Ye=(Xe.prototype.operationForChild=function(t){return this.path.isEmpty()?new Xe(this.source,q.Empty,this.snap.getImmediateChild(t)):new Xe(this.source,this.path.popFront(),this.snap)},Xe);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}var Je=($e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new q(t));return e.isEmpty()?null:e.value?new Ye(this.source,q.Empty,e.value):new $e(this.source,q.Empty,e)}return w.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new $e(this.source,this.path.popFront(),this.children)},$e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},$e);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}var Ze=(tn.prototype.isFullyInitialized=function(){return this.fullyInitialized_},tn.prototype.isFiltered=function(){return this.filtered_},tn.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},tn.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},tn.prototype.getNode=function(){return this.node_},tn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var en=(nn.prototype.updateEventSnap=function(t,e,n){return new nn(new Ze(t,e,n),this.serverCache_)},nn.prototype.updateServerSnap=function(t,e,n){return new nn(this.eventCache_,new Ze(t,e,n))},nn.prototype.getEventCache=function(){return this.eventCache_},nn.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},nn.prototype.getServerCache=function(){return this.serverCache_},nn.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},nn.Empty=new nn(new Ze(he.EMPTY_NODE,!1,!1),new Ze(he.EMPTY_NODE,!1,!1)),nn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t,e){this.eventCache_=t,this.serverCache_=e}var rn=(on.valueChange=function(t){return new on(on.VALUE,t)},on.childAddedChange=function(t,e){return new on(on.CHILD_ADDED,e,t)},on.childRemovedChange=function(t,e){return new on(on.CHILD_REMOVED,e,t)},on.childChangedChange=function(t,e,n){return new on(on.CHILD_CHANGED,e,t,n)},on.childMovedChange=function(t,e){return new on(on.CHILD_MOVED,e,t)},on.CHILD_ADDED="child_added",on.CHILD_REMOVED="child_removed",on.CHILD_CHANGED="child_changed",on.CHILD_MOVED="child_moved",on.VALUE="value",on);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var an=(sn.prototype.updateChild=function(t,e,n,r,i,o){w.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(rn.childRemovedChange(e,a)):w.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(rn.childAddedChange(e,n)):o.trackChildChange(rn.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},sn.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(qt,function(t,e){n.hasChild(t)||i.trackChildChange(rn.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(qt,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(rn.childChangedChange(t,e,n))}else i.trackChildChange(rn.childAddedChange(t,e))})),n.withIndex(this.index_)},sn.prototype.updatePriority=function(t,e){return t.isEmpty()?he.EMPTY_NODE:t.updatePriority(e)},sn.prototype.filtersNodes=function(){return!1},sn.prototype.getIndexedFilter=function(){return this},sn.prototype.getIndex=function(){return this.index_},sn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){this.index_=t}var un=(hn.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;w.assert(e===rn.CHILD_ADDED||e===rn.CHILD_CHANGED||e===rn.CHILD_REMOVED,"Only child changes supported for tracking"),w.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===rn.CHILD_ADDED&&i===rn.CHILD_REMOVED)this.changeMap.set(n,rn.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===rn.CHILD_REMOVED&&i===rn.CHILD_ADDED)this.changeMap.delete(n);else if(e===rn.CHILD_REMOVED&&i===rn.CHILD_CHANGED)this.changeMap.set(n,rn.childRemovedChange(n,r.oldSnap));else if(e===rn.CHILD_CHANGED&&i===rn.CHILD_ADDED)this.changeMap.set(n,rn.childAddedChange(n,t.snapshotNode));else{if(e!==rn.CHILD_CHANGED||i!==rn.CHILD_CHANGED)throw w.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,rn.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},hn.prototype.getChanges=function(){return Array.from(this.changeMap.values())},hn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){this.changeMap=new Map}function cn(){}var ln=new(cn.prototype.getCompleteChild=function(t){return null},cn.prototype.getChildAfterChild=function(t,e,n){return null},cn),pn=(dn.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ze(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},dn.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},dn);function dn(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn=function(t,e){this.viewCache=t,this.changes=e},vn=(yn.prototype.assertIndexed=function(t){w.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),w.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},yn.prototype.applyOperation=function(t,e,n,r){var i,o,a=new un;if(e.type===Fe.OVERWRITE){var s=e;i=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,a):(w.assert(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,o,a))}else if(e.type===Fe.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,a):(w.assert(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,a))}else if(e.type===Fe.ACK_USER_WRITE){var h=e;i=h.revert?this.revertUserWrite_(t,h.path,n,r,a):this.ackUserWrite_(t,h.path,h.affectedTree,n,r,a)}else{if(e.type!==Fe.LISTEN_COMPLETE)throw w.assertionError("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,a)}var c=a.getChanges();return yn.maybeAddValueEvent_(t,i,c),new fn(i,c)},yn.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(rn.valueChange(e.getCompleteEventSnap()))}},yn.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(w.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),h=u instanceof he?u:he.EMPTY_NODE,c=n.calcCompleteEventChildren(h);a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var p=e.getFront();if(".priority"===p){w.assert(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();s=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,d,s);a=null!=f?this.filter_.updatePriority(d,f):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(p)){s=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);y=null!=g?o.getNode().getImmediateChild(p).updateChild(v,g):o.getNode().getImmediateChild(p)}else y=n.calcCompleteChild(p,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),p,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},yn.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),h=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=h.updateFullNode(u.getNode(),n,null);else if(h.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(e,n);s=h.updateFullNode(u.getNode(),c,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var p=e.popFront(),d=u.getNode().getImmediateChild(l).updateChild(p,n);s=".priority"===l?h.updatePriority(u.getNode(),d):h.updateChild(u.getNode(),l,d,p,ln,null)}var f=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),h.filtersNodes()),v=new pn(r,f,i);return this.generateEventCacheAfterServerEvent_(f,e,r,v,a)},yn.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),h=new pn(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=e.getFront();if(".priority"===c)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),p=u.getNode().getImmediateChild(c),d=void 0;if(l.isEmpty())d=n;else{var f=h.getCompleteChild(c);d=null!=f?".priority"===l.getBack()&&f.getChild(l.parent()).isEmpty()?f:f.updateChild(l,n):he.EMPTY_NODE}if(p.equals(d))a=t;else{var v=this.filter_.updateChild(u.getNode(),c,d,l,h,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},yn.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},yn.prototype.applyUserMerge_=function(r,i,t,o,a,s){var u=this,h=r;return t.foreach(function(t,e){var n=i.child(t);yn.cacheHasChild_(r,n.getFront())&&(h=u.applyUserOverwrite_(h,n,e,o,a,s))}),t.foreach(function(t,e){var n=i.child(t);yn.cacheHasChild_(r,n.getFront())||(h=u.applyUserOverwrite_(h,n,e,o,a,s))}),h},yn.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},yn.prototype.applyServerMerge_=function(o,t,e,a,s,u,h){var c=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:Qe.Empty.setTree(t,e);var p=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(p.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=c.applyMerge_(n,e);l=c.applyServerOverwrite_(l,new q(t),r,a,s,u,h)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!p.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=c.applyMerge_(r,e);l=c.applyServerOverwrite_(l,new q(t),i,a,s,u,h)}}),l},yn.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,s.getNode().getChild(r),n,i,a,o);if(r.isEmpty()){var u=Qe.Empty;return s.getNode().forEachChild(Ot,function(t,e){u=u.set(new q(t),e)}),this.applyServerMerge_(t,r,u,n,i,a,o)}return t}var h=Qe.Empty;return e.foreach(function(t,e){var n=r.child(t);s.isCompleteForPath(n)&&(h=h.set(t,s.getNode().getChild(n)))}),this.applyServerMerge_(t,r,h,n,i,a,o)},yn.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ln,r)},yn.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new pn(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var c=t.getServerCache().getNode();w.assert(c instanceof he,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(c)}h=h,u=this.filter_.updateFullNode(s,h,i)}else{var l=e.getFront(),p=n.calcCompleteChild(l,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(l)&&(p=s.getImmediateChild(l)),(u=null!=p?this.filter_.updateChild(s,l,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(s,l,he.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(q.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},yn);function yn(t){this.filter_=t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn=(mn.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===rn.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(rn.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,rn.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,rn.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,rn.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,rn.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,rn.VALUE,t,n,e),i},mn.prototype.generateEventsForType_=function(r,e,t,i,o){var a=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=a.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,a.query_))})})},mn.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},mn.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw w.assertionError("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},mn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var _n,bn=(wn.prototype.getQuery=function(){return this.query_},wn.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},wn.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},wn.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},wn.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},wn.prototype.removeEventRegistration=function(t,n){var r=[];if(n){w.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(a)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},wn.prototype.applyOperation=function(t,e,n){t.type===Fe.MERGE&&null!==t.source.queryId&&(w.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),w.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),w.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},wn.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(qt,function(t,e){n.push(rn.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(rn.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},wn.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},wn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new an(n.getIndex()),i=n.getNodeFilter();this.processor_=new vn(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(he.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(he.EMPTY_NODE,a.getNode(),null),h=new Ze(s,o.isFullyInitialized(),r.filtersNodes()),c=new Ze(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new en(c,h),this.eventGenerator_=new gn(this.query_)}var En=(Object.defineProperty(Cn,"__referenceConstructor",{get:function(){return w.assert(_n,"Reference.ts has not been loaded"),_n},set:function(t){w.assert(!_n,"__referenceConstructor has already been defined"),_n=t},enumerable:!0,configurable:!0}),Cn.prototype.isEmpty=function(){return 0===this.views.size},Cn.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var a=this.views.get(o);return w.assert(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(t,e,n)}var s=[];try{for(var u=f.__values(this.views.values()),h=u.next();!h.done;h=u.next())a=h.value,s=s.concat(a.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},Cn.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;u=!!s||(s=r instanceof he?n.calcCompleteEventChildren(r):he.EMPTY_NODE,!1);var h=new en(new Ze(s,u,!1),new Ze(r,i,!1));a=new bn(t,h),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},Cn.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),a=[],s=[],u=this.hasCompleteView();if("default"===o)try{for(var h=f.__values(this.views.entries()),c=h.next();!c.done;c=h.next()){var l=f.__read(c.value,2),p=l[0],d=l[1];s=s.concat(d.removeEventRegistration(e,n)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}else(d=this.views.get(o))&&(s=s.concat(d.removeEventRegistration(e,n)),d.isEmpty()&&(this.views.delete(o),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return u&&!this.hasCompleteView()&&a.push(new Cn.__referenceConstructor(t.repo,t.path)),{removed:a,events:s}},Cn.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=f.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},Cn.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=f.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Cn.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Cn.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Cn.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Cn.prototype.getCompleteView=function(){var e,t;try{for(var n=f.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},Cn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){this.views=new Map}var Tn=(In.prototype.addWrite=function(t,e){if(t.isEmpty())return new In(new Qe(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=q.relativePath(r,t);return i=i.updateChild(o,e),new In(this.writeTree_.set(r,i))}var a=new Qe(e);return new In(this.writeTree_.setTree(t,a))},In.prototype.addWrites=function(n,t){var r=this;return M(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},In.prototype.removeWrite=function(t){return t.isEmpty()?In.Empty:new In(this.writeTree_.setTree(t,Qe.Empty))},In.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},In.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(q.relativePath(e.path,t)):null},In.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(qt,function(t,e){n.push(new Ct(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Ct(t,e.value))}),n},In.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new In(null!=e?new Qe(e):this.writeTree_.subtree(t))},In.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},In.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(w.assert(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(q.Empty,this.writeTree_,t)},In.Empty=new In(new Qe(null)),In);function In(t){this.writeTree_=t}var Sn=(Nn.prototype.childWrites=function(t){return new An(t,this)},Nn.prototype.addOverwrite=function(t,e,n,r){w.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Nn.prototype.addMerge=function(t,e,n){w.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Nn.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Nn.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});w.assert(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(t<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):M(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Nn.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Nn.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(q.Empty)){var o=Nn.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||he.EMPTY_NODE,o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);if(s.isEmpty())return t;if(null!=t||s.hasCompleteWrite(q.Empty)){var u=t||he.EMPTY_NODE;return s.apply(u)}return null},Nn.prototype.calcCompleteEventChildren=function(t,e){var r=he.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(qt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(qt,function(t,e){var n=i.childCompoundWrite(new q(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Nn.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){w.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Nn.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Nn.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Nn.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(q.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var h=[],c=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),p=l.getNext();p&&h.length<r;)0!==c(p,n)&&h.push(p),p=l.getNext();return h},Nn.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Nn.prototype.resetTree_=function(){this.visibleWrites_=Nn.layerTree_(this.allWrites_,Nn.DefaultFilter_,q.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Nn.DefaultFilter_=function(t){return t.visible},Nn.layerTree_=function(t,e,n){for(var r=Tn.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=q.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=q.relativePath(a,n),r=r.addWrite(q.Empty,o.snap.getChild(s)));else{if(!o.children)throw w.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=q.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=q.relativePath(a,n)).isEmpty())r=r.addWrites(q.Empty,o.children);else{var u=w.safeGet(o.children,s.getFront());if(u){var h=u.getChild(s.popFront());r=r.addWrite(q.Empty,h)}}}}}return r},Nn);function Nn(){this.visibleWrites_=Tn.Empty,this.allWrites_=[],this.lastWriteId_=-1}var An=(kn.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},kn.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},kn.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},kn.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},kn.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},kn.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},kn.prototype.child=function(t){return new kn(this.treePath_.child(t),this.writeTree_)},kn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){this.treePath_=t,this.writeTree_=e}var Pn=(Rn.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ye(Ve.User,t,e)):[]},Rn.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Qe.fromObject(e);return this.applyOperationToSyncPoints_(new Je(Ve.User,t,r))},Rn.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Qe.Empty;return null!=n.snap?r=r.set(q.Empty,!0):M(n.children,function(t,e){r=r.set(new q(t),e)}),this.applyOperationToSyncPoints_(new He(n.path,r,e))}return[]},Rn.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ye(Ve.Server,t,e))},Rn.prototype.applyServerMerge=function(t,e){var n=Qe.fromObject(e);return this.applyOperationToSyncPoints_(new Je(Ve.Server,t,n))},Rn.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Ge(Ve.Server,t))},Rn.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Rn.parseQueryKey_(r),o=i.path,a=i.queryId,s=q.relativePath(o,t),u=new Ye(Ve.forServerTaggedQuery(a),s,e);return this.applyTaggedOperation_(o,u)},Rn.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Rn.parseQueryKey_(r),o=i.path,a=i.queryId,s=q.relativePath(o,t),u=Qe.fromObject(e),h=new Je(Ve.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,h)}return[]},Rn.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Rn.parseQueryKey_(n),i=r.path,o=r.queryId,a=q.relativePath(i,t),s=new Ge(Ve.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},Rn.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=q.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(q.Empty)):(a=new En,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i?n=!0:(n=!1,i=he.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(q.Empty);n&&(i=i.updateImmediateChild(t,n))}));var s=a.viewExistsForQuery(t);if(!s&&!t.getQueryParams().loadsAllData()){var u=Rn.makeQueryKey_(t);w.assert(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var h=Rn.getNextQueryTag_();this.queryToTagMap.set(u,h),this.tagToQueryMap.set(h,u)}var c=this.pendingWriteTree_.childWrites(r),l=a.addEventRegistration(t,e,c,i,n);if(!s&&!o){var p=a.viewForQuery(t);l=l.concat(this.setupListener_(t,p))}return l},Rn.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var s=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var h=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),c=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(h&&!c){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(l),d=0;d<p.length;++d){var f=p[d],v=f.getQuery(),y=this.createListenerForView_(f);this.listenProvider_.startListening(Rn.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!c&&0<u.length&&!n&&(h?this.listenProvider_.stopListening(Rn.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Rn.makeQueryKey_(t));r.listenProvider_.stopListening(Rn.queryForListening_(t),e)})),this.removeTags_(u)}return a},Rn.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=q.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Rn.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),M(n,function(t,e){r=r.concat(e)}),r})},Rn.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=Rn.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},Rn.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Rn.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Rn.queryForListening_(t),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)w.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),M(n,function(t,e){r=r.concat(e)}),r}),u=0;u<s.length;++u){var h=s[u];this.listenProvider_.stopListening(Rn.queryForListening_(h),this.tagForQuery_(h))}return o},Rn.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||he.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},Rn.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Rn.parseQueryKey_=function(t){var e=t.indexOf("$");return w.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}},Rn.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Rn.prototype.tagForQuery_=function(t){var e=Rn.makeQueryKey_(t);return this.queryToTagMap.get(e)},Rn.getNextQueryTag_=function(){return Rn.nextQueryTag_++},Rn.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);w.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Rn.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(q.Empty))},Rn.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(q.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var h=n?n.getImmediateChild(a):null,c=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,h,c))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},Rn.prototype.applyOperationDescendantsHelper_=function(o,t,a,s){var u=this,e=t.get(q.Empty);null==a&&null!=e&&(a=e.getCompleteServerCache(q.Empty));var h=[];return t.children.inorderTraversal(function(t,e){var n=a?a.getImmediateChild(t):null,r=s.child(t),i=o.operationForChild(t);i&&(h=h.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(h=h.concat(e.applyOperation(o,s,a))),h},Rn.nextQueryTag_=1,Rn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){this.listenProvider_=t,this.syncPointTree_=Qe.Empty,this.pendingWriteTree_=new Sn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var On=(Dn.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Dn.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Dn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){this.rootNode_=he.EMPTY_NODE}var xn=(Ln.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(d("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Ln.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Ln.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Ln.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',m(t)},Ln);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Mn=(Fn.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),w.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Fn.prototype.get=function(){return w.deepCopy(this.counters_)},Fn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){this.counters_={}}var jn=(Un.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Mn),this.collections_[e]},Un.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Un.collections_={},Un.reporters_={},Un);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){}var Vn=(Wn.prototype.get=function(){var t=this.collection_.get(),n=f.__assign({},t);return this.last_&&M(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Wn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t){this.collection_=t,this.last_=null}var qn=(Hn.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Hn.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;M(t,function(t,e){0<e&&w.contains(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Hn);function Hn(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Vn(t);var n=1e4+2e4*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn=(Qn.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Kn(i)),e.add(r)}e&&this.eventLists_.push(e)},Qn.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Qn.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Qn.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Qn);function Qn(){this.eventLists_=[],this.recursionDepth_=0}var Kn=(Gn.prototype.add=function(t){this.events_.push(t)},Gn.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();R&&d("event: "+e.toString()),j(n)}}},Gn.prototype.getPath=function(){return this.path_},Gn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t){this.path_=t,this.events_=[]}var zn=(Yn.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=f.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Yn.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},Yn.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Yn.prototype.validateEventType_=function(e){w.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Yn);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){this.allowedEvents_=t,this.listeners_={},w.assert(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Xn,Jn=(Xn=zn,f.__extends($n,Xn),$n.getInstance=function(){return new $n},$n.prototype.getInitialEvent=function(t){return w.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},$n);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){var e,t,n=Xn.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Zn,tr=(Zn=zn,f.__extends(er,Zn),er.getInstance=function(){return new er},er.prototype.getInitialEvent=function(t){return w.assert("online"===t,"Unknown event type: "+t),[this.online_]},er.prototype.currentlyOnline=function(){return this.online_},er);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){var t=Zn.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||w.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var nr=(rr.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},rr.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&j(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},rr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ir=(or.prototype.open=function(t,e){var a=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new nr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){a.log_("Timed out trying to connect."),a.onClosed_(),a.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(w.isNodeSdk()||"complete"===document.readyState)e();else{var n=!1,t=function t(){document.body?n||(n=!0,e()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(function(){if(!a.isClosed_){a.scriptTagHolder=new ar(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=f.__read(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],a.incrementIncomingBytes_(t),a.scriptTagHolder)if(a.connectTimeoutTimer_&&(clearTimeout(a.connectTimeoutTimer_),a.connectTimeoutTimer_=null),a.everConnected_=!0,"start"===r)a.id=i,a.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(a.scriptTagHolder.sendNewPolls=!1,a.myPacketOrderer.closeAfter(i,function(){a.onClosed_()})):a.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=f.__read(t,2),r=n[0],i=n[1];a.incrementIncomingBytes_(t),a.myPacketOrderer.handleResponse(r,i)},function(){a.onClosed_()},a.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),a.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=a.scriptTagHolder.uniqueCallbackIdentifier),t.v=K,a.transportSessionId&&(t.s=a.transportSessionId),a.lastSessionId&&(t.ls=a.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(G)&&(t.r="f");var e=a.urlFn(t);a.log_("Connecting via long-poll to "+e),a.scriptTagHolder.addTag(e,function(){})}})},or.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},or.forceAllow=function(){or.forceAllow_=!0},or.forceDisallow=function(){or.forceDisallow_=!0},or.isAvailable=function(){return!(w.isNodeSdk()||!or.forceAllow_&&(or.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"===("undefined"==typeof window?"undefined":b(window))&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"===("undefined"==typeof Windows?"undefined":b(Windows))&&"object"===b(Windows.UI)))},or.prototype.markConnectionHealthy=function(){},or.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},or.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},or.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},or.prototype.send=function(t){var e=w.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=w.base64Encode(e),r=I(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},or.prototype.addDisconnectPingFrame=function(t,e){if(!w.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},or.prototype.incrementIncomingBytes_=function(t){var e=w.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},or);function or(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=v(t),this.stats_=jn.getCollection(e),this.urlFn=function(t){return e.connectionURL(Y,t)}}var ar=(sr.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||d("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},sr.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},sr.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},sr.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},sr.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},sr.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},sr.prototype.addTag=function(t,n){var r=this;w.isNodeSdk()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){d("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},sr);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,w.isNodeSdk())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=P(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=sr.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){d("frame writing exception"),t.stack&&d(t.stack),d(t)}}}var ur="";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr=null;"undefined"!=typeof MozWebSocket?hr=MozWebSocket:"undefined"!=typeof WebSocket&&(hr=WebSocket);var cr=(lr.connectionURL_=function(t,e,n){var r={};return r.v=K,!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(G)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(z,r)},lr.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,N.set("previous_websocket_failure",!0);try{if(w.isNodeSdk()){var r=w.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+ur+"/"+u.platform+"/"+r}},o=u.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new hr(this.connURL,[],i)}else this.mySock=new hr(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},lr.prototype.start=function(){},lr.forceDisallow=function(){lr.forceDisallow_=!0},lr.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==hr&&!lr.forceDisallow_},lr.previouslyFailed=function(){return N.isInMemoryStorage||!0===N.get("previous_websocket_failure")},lr.prototype.markConnectionHealthy=function(){N.remove("previous_websocket_failure")},lr.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=w.jsonEval(e);this.onMessage(n)}},lr.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},lr.prototype.extractFrameCount_=function(t){if(w.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},lr.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},lr.prototype.send=function(t){this.resetKeepAlive();var e=w.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=I(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},lr.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},lr.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},lr.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},lr.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},lr.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},lr.responsesRequiredToBeHealthy=2,lr.healthyTimeout=3e4,lr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=v(this.connId),this.stats_=jn.getCollection(e),this.connURL=lr.connectionURL_(e,n,r)}var pr=(Object.defineProperty(dr,"ALL_TRANSPORTS",{get:function(){return[ir,cr]},enumerable:!0,configurable:!0}),dr.prototype.initTransports_=function(t){var e,n,r=cr&&cr.isAvailable(),i=r&&!cr.previouslyFailed();if(t.webSocketOnly&&(r||m("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[cr];else{var o=this.transports_=[];try{for(var a=f.__values(dr.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},dr.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},dr.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},dr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){this.initTransports_(t)}var fr=(vr.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=U(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},vr.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},vr.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},vr.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},vr.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},vr.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},vr.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},vr.prototype.onSecondaryMessageReceived_=function(t){var e=C("t",t),n=C("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},vr.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},vr.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},vr.prototype.onPrimaryMessageReceived_=function(t){var e=C("t",t),n=C("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},vr.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},vr.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},vr.prototype.onControl_=function(t){var e=C("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?y("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):y("Unknown control packet command: "+e)}},vr.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),K!==n&&m("Protocol version mismatch detected"),this.tryStartUpgrade_())},vr.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},vr.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},vr.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},vr.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},vr.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},vr.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},vr.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(N.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},vr.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},vr.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},vr.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},vr.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},vr);function vr(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=v("c:"+this.id+":"),this.transportManager_=new pr(e),this.log_("Connection created"),this.start_()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=(gr.prototype.put=function(t,e,n,r){},gr.prototype.merge=function(t,e,n,r){},gr.prototype.refreshAuthToken=function(t){},gr.prototype.onDisconnectPut=function(t,e,n){},gr.prototype.onDisconnectMerge=function(t,e,n){},gr.prototype.onDisconnectCancel=function(t,e){},gr.prototype.reportStats=function(t){},gr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){}var mr,_r=(mr=yr,f.__extends(br,mr),br.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(w.stringify(i)),w.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},br.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),w.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),w.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},br.prototype.sendListen_=function(r){var i=this,o=r.query,a=o.path.toString(),s=o.queryIdentifier();this.log_("Listen on "+a+" for "+s);var t={p:a};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;br.warnOnListenWarnings_(e,o),(i.listens.get(a)&&i.listens.get(a).get(s))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,e))})},br.warnOnListenWarnings_=function(t,e){if(t&&"object"===(void 0===t?"undefined":b(t))&&w.contains(t,"w")){var n=w.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();m("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},br.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},br.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||w.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},br.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,t=w.isValidFormat(i)?"auth":"gauth",e={cred:i};null===this.authOverride_?e.noauth=!0:"object"===b(this.authOverride_)&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},br.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),w.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},br.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},br.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},br.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},br.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},br.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},br.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},br.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},br.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},br.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},br.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},br.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+w.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},br.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):y("Unrecognized action received from server: "+w.stringify(t)+"\nAre you using the latest client?")},br.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},br.prototype.scheduleConnect_=function(t){var e=this;w.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},br.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},br.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},br.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},br.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+br.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,h=function(){u?u.close():(s=!0,r())};this.realtime_={close:h,sendRequest:function(t){w.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){s?d("getToken() completed but was canceled"):(d("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new fr(i,o.repoInfo_,e,n,r,function(t){m(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(w.CONSTANTS.NODE_ADMIN&&m(t),h())})}},br.prototype.interrupt=function(t){d("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},br.prototype.resume=function(t){d("Resuming connection for reason: "+t),delete this.interruptReasons_[t],w.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},br.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},br.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},br.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return T(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},br.prototype.removeListen_=function(t,e){var n,r=new q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},br.prototype.onAuthRevoked_=function(t,e){d("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},br.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},br.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=f.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,f.__values(a.values())),u=s.next();!u.done;u=s.next()){var h=u.value;this.sendListen_(h)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},br.prototype.sendConnectStats_=function(){var t={},e="js";w.CONSTANTS.NODE_ADMIN?e="admin_node":w.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+ur.replace(/\./g,"-")]=1,w.isMobileCordova()?t["framework.cordova"]=1:w.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},br.prototype.shouldReconnect_=function(){var t=tr.getInstance().currentlyOnline();return w.isEmpty(this.interruptReasons_)&&t},br.nextPersistentConnectionId_=0,br.nextConnectionId_=0,br);function br(t,e,n,r,i,o){var a=mr.call(this)||this;if(a.repoInfo_=t,a.onDataUpdate_=e,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=br.nextPersistentConnectionId_++,a.log_=v("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!w.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Jn.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&tr.getInstance().on("online",a.onOnline_,a),a}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr,Er=(wr=yr,f.__extends(Cr,wr),Cr.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Cr.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(w.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Cr.prototype.listen=function(t,e,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=Cr.getListenId_(t,r),u={};this.listens_[s]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(a,n,!1,r),w.safeGet(o.listens_,s)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Cr.prototype.unlisten=function(t,e){var n=Cr.getListenId_(t,e);delete this.listens_[n]},Cr.prototype.refreshAuthToken=function(t){},Cr.prototype.restRequest_=function(i,o,a){var s=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+i+"?ns="+s.repoInfo_.namespace+w.querystring(o);s.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(a&&4===r.readyState){s.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=w.jsonEval(r.responseText)}catch(t){m("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,t)}else 401!==r.status&&404!==r.status&&m("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})},Cr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e,n){var r=wr.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=v("p:rest:"),r.listens_={},r}var Tr="repo_interrupt",Ir=(Sr.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Sr.prototype.name=function(){return this.repoInfo_.namespace},Sr.prototype.serverTime=function(){var t=this.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Sr.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},Sr.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=w.map(e,function(t){return ve(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=ve(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=w.map(e,function(t){return ve(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var h=ve(e);o=this.serverSyncTree_.applyServerOverwrite(i,h)}var c=i;0<o.length&&(c=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(c,o)},Sr.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Sr.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Sr.prototype.onServerInfoUpdate_=function(t){var n=this;M(t,function(t,e){n.updateInfo_(t,e)})},Sr.prototype.updateInfo_=function(t,e){var n=new q("/.info/"+t),r=ve(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Sr.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Sr.prototype.setWithPriority=function(i,t,e,o){var a=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=ve(t,e),s=Ue(r,n),u=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(i,s,u,!0);this.eventQueue_.queueEvents(h),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||m("set at "+i+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n);a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(o,t,e)});var c=this.abortTransactions_(i);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},Sr.prototype.update=function(o,t,a){var s=this;this.log_("update",{path:o.toString(),value:t});var r=!0,i=this.generateServerValues(),u={};if(M(t,function(t,e){r=!1;var n=ve(e);u[t]=Ue(n,i)}),r)d("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(a,"ok");else{var h=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,u,h);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||m("update at "+o+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(h,!n),i=0<r.length?s.rerunTransactions_(o):o;s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(a,t,e)}),M(t,function(t){var e=s.abortTransactions_(o.child(t));s.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},Sr.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var t,n,i,e=this.generateServerValues(),o=(t=this.onDisconnect_,n=e,i=new xe,t.forEachTree(new q(""),function(t,e){i.remember(t,Ue(e,n))}),i),a=[];o.forEachTree(q.Empty,function(t,e){a=a.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new xe,this.eventQueue_.raiseEventsForChangedPath(q.Empty,a)},Sr.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},Sr.prototype.onDisconnectSet=function(n,t,r){var i=this,o=ve(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Sr.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=ve(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Sr.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(w.isEmpty(n))return d("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&M(n,function(t,e){var n=ve(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},Sr.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Sr.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Sr.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Tr)},Sr.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Tr)},Sr.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Vn(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);M(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)})}},Sr.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Sr.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),d.apply(void 0,f.__spread([n],t))},Sr.prototype.callOnCompleteCallback=function(r,i,o){r&&j(function(){if("ok"===i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(Sr.prototype,"database",{get:function(){return this.__database||(this.__database=new Qr(this))},enumerable:!0,configurable:!0}),Sr);function Sr(t,e,n,r){var a=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new xe,this.persistentConnection_=null;var i=new xn(n,r);if(this.stats_=jn.getCollection(t),e||0<=("object"===("undefined"==typeof window?"undefined":b(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Er(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!==(void 0===o?"undefined":b(o)))throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{w.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new _r(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){a.server_.refreshAuthToken(t)}),this.statsReporter_=jn.getOrCreateReporter(t,function(){return new qn(a.stats_,a.server_)}),this.transactionsInit_(),this.infoData_=new On,this.infoSyncTree_=new Pn({startListening:function(t,e,n,r){var i=[],o=a.infoData_.getNode(t.path);return o.isEmpty()||(i=a.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Pn({startListening:function(r,t,e,i){return a.server_.listen(r,e,t,function(t,e){var n=i(t,e);a.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){a.server_.unlisten(t,e)}})}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=(Ar.prototype.getStartPost=function(){return this.startPost_},Ar.prototype.getEndPost=function(){return this.endPost_},Ar.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Ar.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=he.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Ar.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=he.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(he.EMPTY_NODE);var i=this;return e.forEachChild(qt,function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Ar.prototype.updatePriority=function(t,e){return t},Ar.prototype.filtersNodes=function(){return!0},Ar.prototype.getIndexedFilter=function(){return this.indexedFilter_},Ar.prototype.getIndex=function(){return this.index_},Ar.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Ar.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Ar);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t){this.indexedFilter_=new an(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ar.getStartPost_(t),this.endPost_=Ar.getEndPost_(t)}var kr=(Pr.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=he.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Pr.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=he.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=he.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(he.EMPTY_NODE);var s=void 0,u=void 0,h=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var c=this.index_.getCompare();h=function(t,e){return c(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)a=i.getNext(),!l&&h(s,a)<=0&&(l=!0),l&&o<this.limit_&&h(a,u)<=0?o++:r=r.updateImmediateChild(a.name,he.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Pr.prototype.updatePriority=function(t,e){return t},Pr.prototype.filtersNodes=function(){return!0},Pr.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Pr.prototype.getIndex=function(){return this.index_},Pr.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;w.assert(s.numChildren()===this.limit_,"");var u=new Ct(e,n),h=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),p=r.getChildAfterChild(this.index_,h,this.reverse_);null!=p&&(p.name===e||s.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,u);if(c&&!n.isEmpty()&&0<=d)return null!=i&&i.trackChildChange(rn.childChangedChange(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(rn.childRemovedChange(e,l));var f=s.updateImmediateChild(e,he.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(rn.childAddedChange(p.name,p.node)),f.updateImmediateChild(p.name,p.node)):f}return!n.isEmpty()&&c&&0<=o(h,u)?(null!=i&&(i.trackChildChange(rn.childRemovedChange(h.name,h.node)),i.trackChildChange(rn.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(h.name,he.EMPTY_NODE)):t},Pr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t){this.rangedFilter_=new Nr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Rr=(Or.prototype.hasStart=function(){return this.startSet_},Or.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Or.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Or.prototype.getIndexStartValue=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Or.prototype.getIndexStartName=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:D},Or.prototype.hasEnd=function(){return this.endSet_},Or.prototype.getIndexEndValue=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Or.prototype.getIndexEndName=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},Or.prototype.hasLimit=function(){return this.limitSet_},Or.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Or.prototype.getLimit=function(){return w.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},Or.prototype.getIndex=function(){return this.index_},Or.prototype.copy_=function(){var t=new Or;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Or.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Or.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Or.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Or.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Or.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Or.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Or.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Or.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Or.prototype.getQueryObject=function(){var t=Or.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==qt&&(e[t.INDEX]=this.index_.toString()),e},Or.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Or.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===qt},Or.prototype.getNodeFilter=function(){return this.loadsAllData()?new an(this.getIndex()):new(this.hasLimit()?kr:Nr)(this)},Or.prototype.toRestQueryStringParameters=function(){var t,e=Or.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===qt?e.PRIORITY_INDEX:this.index_===me?e.VALUE_INDEX:this.index_===Ot?e.KEY_INDEX:(w.assert(this.index_ instanceof _e,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=w.stringify(t),this.startSet_&&(n[e.START_AT]=w.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+w.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=w.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+w.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Or.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Or.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Or.DEFAULT=new Or,Or);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qt}var Dr,xr=(Dr=Oe,f.__extends(Lr,Dr),Lr.prototype.getKey=function(){return w.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Lr.prototype.child=function(t){var e,n,r,i;return w.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof q||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),st(e,n,r,i)):st("Reference.child",1,t,!1)),new Lr(this.repo,this.path.child(t))},Lr.prototype.getParent=function(){w.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Lr(this.repo,t)},Lr.prototype.getRoot=function(){w.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Lr.prototype.databaseProp=function(){return this.repo.database},Lr.prototype.set=function(t,e){w.validateArgCount("Reference.set",1,2,arguments.length),ut("Reference.set",this.path),nt("Reference.set",1,t,this.path,!1),w.validateCallback("Reference.set",2,e,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Lr.prototype.update=function(t,e){if(w.validateArgCount("Reference.update",1,2,arguments.length),ut("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,m("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rt("Reference.update",1,t,this.path,!1),w.validateCallback("Reference.update",2,e,!0);var i=new w.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Lr.prototype.setWithPriority=function(t,e,n){if(w.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ut("Reference.setWithPriority",this.path),nt("Reference.setWithPriority",1,t,this.path,!1),it("Reference.setWithPriority",2,e,!1),w.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new w.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Lr.prototype.remove=function(t){return w.validateArgCount("Reference.remove",0,1,arguments.length),ut("Reference.remove",this.path),w.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},Lr.prototype.transaction=function(t,r,e){if(w.validateArgCount("Reference.transaction",1,3,arguments.length),ut("Reference.transaction",this.path),w.validateCallback("Reference.transaction",1,t,!1),w.validateCallback("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(w.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new w.Deferred;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new gt(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Lr.prototype.setPriority=function(t,e){w.validateArgCount("Reference.setPriority",1,2,arguments.length),ut("Reference.setPriority",this.path),it("Reference.setPriority",1,t,!1),w.validateCallback("Reference.setPriority",2,e,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Lr.prototype.push=function(t,e){w.validateArgCount("Reference.push",0,2,arguments.length),ut("Reference.push",this.path),nt("Reference.push",1,t,this.path,!0),w.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},Lr.prototype.onDisconnect=function(){return ut("Reference.onDisconnect",this.path),new vt(this.repo,this.path)},Object.defineProperty(Lr.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Lr);function Lr(t,e){if(!(t instanceof Ir))throw new Error("new Reference() no longer supported - use app.database().");return Dr.call(this,t,e,Rr.DEFAULT,!1)||this}Oe.__referenceConstructor=xr,En.__referenceConstructor=xr;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr,Fr,jr=function(){this.children={},this.childCount=0,this.value=null},Ur=(Vr.prototype.subTree=function(t){for(var e=t instanceof q?t:new q(t),n=this,r=e.getFront();null!==r;)n=new Vr(r,n,w.safeGet(n.node_.children,r)||new jr),r=(e=e.popFront()).getFront();return n},Vr.prototype.getValue=function(){return this.node_.value},Vr.prototype.setValue=function(t){w.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Vr.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Vr.prototype.hasChildren=function(){return 0<this.node_.childCount},Vr.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Vr.prototype.forEachChild=function(n){var r=this;M(this.node_.children,function(t,e){n(new Vr(t,r,e))})},Vr.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Vr.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Vr.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Vr.prototype.path=function(){return new q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Vr.prototype.name=function(){return this.name_},Vr.prototype.parent=function(){return this.parent_},Vr.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Vr.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=w.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Vr);function Vr(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new jr),this.name_=t,this.parent_=e,this.node_=n}(Fr=Mr=Mr||{})[Fr.RUN=0]="RUN",Fr[Fr.SENT=1]="SENT",Fr[Fr.COMPLETED=2]="COMPLETED",Fr[Fr.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Fr[Fr.NEEDS_ABORT=4]="NEEDS_ABORT",Ir.MAX_TRANSACTION_RETRIES_=25,Ir.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Ur},Ir.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new xr(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:P(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var h=new we(a.currentInputSnapshot,new xr(this,a.path),qt);a.onComplete(null,!1,h)}}else{ft("transaction failed: Data returned ",u,a.path),a.status=Mr.RUN;var c=this.transactionQueueTree_.subTree(t),l=c.getValue()||[];l.push(a),c.setValue(l);var p=void 0;if("object"===(void 0===u?"undefined":b(u))&&null!==u&&w.contains(u,".priority"))p=w.safeGet(u,".priority"),w.assert(et(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else p=(this.serverSyncTree_.calcCompleteEventCache(t)||he.EMPTY_NODE).getPriority().val();p=p;var d=this.generateServerValues(),f=ve(u,p),v=Ue(f,d);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},Ir.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||he.EMPTY_NODE},Ir.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);w.assert(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===Mr.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},Ir.prototype.sendTransactionQueue_=function(s,u){for(var h=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];w.assert(o.status===Mr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Mr.SENT,o.retryCount++;var a=q.relativePath(s,o.path);n=n.updateChild(a,o.currentOutputSnapshotRaw)}var c=n.val(!0),l=s;this.server_.put(l.toString(),c,function(t){h.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=Mr.COMPLETED,e=e.concat(h.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new xr(h,u[r].path),a=new we(i,o,qt);n.push(u[r].onComplete.bind(null,null,!0,a))}u[r].unwatcher()}h.pruneCompletedTransactionsBelowNode_(h.transactionQueueTree_.subTree(s)),h.sendReadyTransactions_(),h.eventQueue_.raiseEventsForChangedPath(s,e);for(r=0;r<n.length;r++)j(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===Mr.SENT_NEEDS_ABORT?u[r].status=Mr.NEEDS_ABORT:u[r].status=Mr.RUN;else{m("transaction at "+l.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=Mr.NEEDS_ABORT,u[r].abortReason=t}h.rerunTransactions_(s)}},r)},Ir.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Ir.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Mr.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=q.relativePath(e,s.path),h=!1,c=void 0;if(w.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Mr.NEEDS_ABORT)h=!0,c=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Mr.RUN)if(s.retryCount>=Ir.MAX_TRANSACTION_RETRIES_)h=!0,c="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var l=this.getLatestState_(s.path,o);s.currentInputSnapshot=l;var p=t[a].update(l.val());if(void 0!==p){ft("transaction failed: Data returned ",p,s.path);var d=ve(p);"object"===(void 0===p?"undefined":b(p))&&null!=p&&w.contains(p,".priority")||(d=d.updatePriority(l.getPriority()));var f=s.currentWriteId,v=this.generateServerValues(),y=Ue(d,v);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(f),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else h=!0,c="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],h&&(t[a].status=Mr.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===c){var g=new xr(this,t[a].path),m=t[a].currentInputSnapshot,_=new we(m,g,qt);r.push(t[a].onComplete.bind(null,null,!1,_))}else r.push(t[a].onComplete.bind(null,new Error(c),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)j(r[a]);this.sendReadyTransactions_()}},Ir.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Ir.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Ir.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Ir.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Mr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Ir.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Ir.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status!==Mr.SENT_NEEDS_ABORT)if(e[o].status===Mr.SENT)w.assert(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Mr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(w.assert(e[o].status===Mr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)j(n[o])}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr,qr="databaseURL",Hr=(Br.getInstance=function(){return Wr=Wr||new Br},Br.prototype.interrupt=function(){var e,t,n,r;try{for(var i=f.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,f.__values(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var h=u.value;this.repos_[a][h].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Br.prototype.resume=function(){var e,t,n,r;try{for(var i=f.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,f.__values(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var h=u.value;this.repos_[a][h].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Br.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[qr];void 0===r&&g("Can't determine Firebase Database URL.  Be sure to include "+qr+" option when calling firebase.initializeApp().");var i=$(r),o=i.repoInfo,a=void 0;return void 0!==u&&(a=u.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(r="http://"+a+"?ns="+o.namespace,o=(i=$(r)).repoInfo),ht("Invalid Firebase Database URL",1,i),i.path.isEmpty()||g("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Br.prototype.deleteRepo=function(t){var e=w.safeGet(this.repos_,t.app.name);e&&w.safeGet(e,t.repoInfo_.toURLString())===t||g("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Br.prototype.createRepo=function(t,e,n){var r=w.safeGet(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=w.safeGet(r,t.toURLString());return i&&g("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Ir(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Br.prototype.forceRestClient=function(t){this.useRestClient_=t},Br);function Br(){this.repos_={},this.useRestClient_=!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr=(Object.defineProperty(Kr.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Kr.prototype.ref=function(t){return this.checkDeleted_("ref"),w.validateArgCount("database.ref",0,1,arguments.length),t instanceof xr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Kr.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),w.validateArgCount(e,1,1,arguments.length);var n=$(t);ht(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&g(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Kr.prototype.checkDeleted_=function(t){null===this.repo_&&g("Cannot call "+t+" on a deleted database.")},Kr.prototype.goOffline=function(){w.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Kr.prototype.goOnline=function(){w.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Kr.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Kr);function Kr(t){(this.repo_=t)instanceof Ir||g("Don't call new Database() directly - please use firebase.database()."),this.root_=new xr(t,q.Empty),this.INTERNAL=new Gr(this)}var Gr=(zr.prototype.delete=function(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(t){return this.database.checkDeleted_("delete"),Hr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},zr);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t){this.database=t}var Yr=Object.freeze({__proto__:null,forceLongPolling:function(){cr.forceDisallow(),ir.forceAllow()},forceWebSockets:function(){ir.forceDisallow()},isWebSocketsAvailable:function(){return cr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Xr=_r;_r.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},_r.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Jr=fr,$r=X,Zr=Object.freeze({__proto__:null,DataConnection:Xr,RealTimeConnection:Jr,hijackHash:function(i){var o=_r.prototype.put;return _r.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){_r.prototype.put=o}},ConnectionTarget:$r,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Hr.getInstance().forceRestClient(t)}}),ti=Qr.ServerValue;function ei(t){var e;e=t.SDK_VERSION,ur=e;var n=t.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Hr.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:xr,Query:Oe,Database:Qr,DataSnapshot:we,enableLogging:p,INTERNAL:Yr,ServerValue:ti,TEST_ACCESS:Zr}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.5.19"),w.isNodeSdk()&&(ni.exports=n)}ei(e),ri.DataSnapshot=we,ri.Database=Qr,ri.OnDisconnect=vt,ri.Query=Oe,ri.Reference=xr,ri.ServerValue=ti,ri.enableLogging=p,ri.registerDatabase=ei}).call(this,ii(125))},124:function(t,e,n){"use strict";(function(fl){var t,vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=n(16),yl=(t=e)&&t.__esModule?t:{default:t};(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},a=("undefined"==typeof window||window!==this)&&void 0!==fl&&null!=fl?fl:this;function h(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=a;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=a.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(void 0===t?"undefined":vl(t)){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},s.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},s.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.La(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=u,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=h(i),r=n.next();!r.done;r=n.next())u(r.value).La(t,e)})},s.all=function(t){var o=h(t),a=o.next();return a.done?u([]):new s(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(a.value).La(e(r.length-1),t),!(a=o.next()).done;);})},s});var u=u||{},d=this||self;function c(t){return"string"==typeof t}function n(t){return"boolean"==typeof t}var f=/^[\w+/_-]+[=]{0,2}$/,v=null;function s(){}function r(t){var e=void 0===t?"undefined":vl(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function i(t){return null===t}function l(t){return"array"==r(t)}function p(t){var e=r(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==r(t)}function g(t){var e=void 0===t?"undefined":vl(t);return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function C(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function e(t,o){function e(){}e.prototype=o.prototype,t.qb=o.prototype,t.prototype=new e,(t.prototype.constructor=t).gd=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function I(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");S.call(this,n+t[r])}function A(t,e){throw new N("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function k(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function P(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function R(){this.b=this.a=null}e(S,Error),S.prototype.name="CustomError",e(N,S),N.prototype.name="AssertionError",k.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var O=new k(function(){return new D},function(t){t.reset()});function D(){this.next=this.b=this.a=null}function x(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||d).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":void 0===t?"undefined":vl(t);A("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}R.prototype.add=function(t,e){var n=O.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},D.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},D.prototype.reset=function(){this.next=this.b=this.a=null};var L=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(c(t))return c(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=c(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var F=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=c(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},j=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=c(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function U(t,e){return 0<=L(t,e)}function V(t,e){var n;return(n=0<=(e=L(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(n,r){!function(t,e){for(var n=c(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function q(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function B(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function Q(t){for(var e in t)return;return 1}function K(t){var e,n={};for(e in t)n[e]=t[e];return n}var G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<G.length;o++)n=G[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Y(t,e){this.a=t===$&&e||"",this.b=J}function X(t){return t instanceof Y&&t.constructor===Y&&t.b===J?t.a:(A("expected object of type Const, got '"+t+"'"),"type_error:Const")}Y.prototype.qa=!0,Y.prototype.pa=function(){return this.a},Y.prototype.toString=function(){return"Const{"+this.a+"}"};var J={},$={},Z=new Y($,"");function tt(){this.a="",this.b=ot}function et(t){return t instanceof tt&&t.constructor===tt&&t.b===ot?t.a:(A("expected object of type TrustedResourceUrl, got '"+t+"' of type "+r(t)),"type_error:TrustedResourceUrl")}function nt(t,n){var r=X(t);if(!it.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return at(t=r.replace(rt,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof Y?X(t):encodeURIComponent(String(t))}))}tt.prototype.qa=!0,tt.prototype.pa=function(){return this.a.toString()},tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var rt=/%{(\w+)}/g,it=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ot={};function at(t){var e=new tt;return e.a=t,e}var st=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ut=/&/g,ht=/</g,ct=/>/g,lt=/"/g,pt=/'/g,dt=/\x00/g,ft=/[\x00&<>"']/;function vt(t,e){return-1!=t.indexOf(e)}function yt(t,e){return t<e?-1:e<t?1:0}function gt(){this.a="",this.b=Et}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===Et?t.a:(A("expected object of type SafeUrl, got '"+t+"' of type "+r(t)),"type_error:SafeUrl")}gt.prototype.qa=!0,gt.prototype.pa=function(){return this.a.toString()},gt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var _t=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function bt(t){return t instanceof gt?t:(t="object"==(void 0===t?"undefined":vl(t))&&t.qa?t.pa():String(t),_t.test(t)||(t="about:invalid#zClosurez"),Ct(t))}var wt,Et={};function Ct(t){var e=new gt;return e.a=t,e}Ct("about:blank");t:{var Tt=d.navigator;if(Tt){var It=Tt.userAgent;if(It){wt=It;break t}}wt=""}function St(t){return vt(wt,t)}function Nt(){this.a="",this.b=kt}function At(t){return t instanceof Nt&&t.constructor===Nt&&t.b===kt?t.a:(A("expected object of type SafeHtml, got '"+t+"' of type "+r(t)),"type_error:SafeHtml")}Nt.prototype.qa=!0,Nt.prototype.pa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var kt={};function Pt(t){var e=new Nt;return e.a=t,e}Pt("<!DOCTYPE html>");var Rt,Ot,Dt=Pt("");function xt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Lt(t){return ft.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ut,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ht,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ct,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(lt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(pt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(dt,"&#0;"))),t}function Mt(t){d.setTimeout(function(){throw t},0)}function Ft(){var t=d.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!St("Presto")&&(t=function(){var t,e,n=document.createElement("IFRAME");n.style.display="none",t=n,e=at(X(Z)),x(t,"HTMLIFrameElement"),t.src=et(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(At(Dt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=E(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||St("Trident")||St("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){d.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}function jt(t,e){Ot||function(){if(d.Promise&&d.Promise.resolve){var t=d.Promise.resolve(void 0);Ot=function(){t.then(Wt)}}else Ot=function(){var t=Wt;!y(d.setImmediate)||d.Window&&d.Window.prototype&&!St("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(Rt=Rt||Ft())(t):d.setImmediate(t)}}(),Ut||(Ot(),Ut=!0),Vt.add(t,e)}Pt("<br>");var Ut=!1,Vt=new R;function Wt(){for(var t;n=e=void 0,n=null,(e=Vt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Mt(t)}P(O,t)}var e,n;Ut=!1}function qt(t,e){if(this.a=Ht,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){ee(n,Bt,t)},function(t){if(!(t instanceof ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ee(n,Qt,t)})}catch(t){ee(this,Qt,t)}}var Ht=0,Bt=2,Qt=3;function Kt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Kt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Gt=new k(function(){return new Kt},function(t){t.reset()});function zt(t,e,n){var r=Gt.get();return r.g=t,r.b=e,r.f=n,r}function Yt(t){if(t instanceof qt)return t;var e=new qt(s);return ee(e,Bt,t),e}function Xt(n){return new qt(function(t,e){e(n)})}function Jt(t,e,n){ne(t,e,n,null)||jt(C(e,t))}function $t(n){return new qt(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Gb:!0,value:n}:{Gb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Jt(n[e],C(t,e,!0),C(t,e,!1));else r(o)})}function Zt(t,e){t.b||t.a!=Bt&&t.a!=Qt||re(t),t.f?t.f.next=e:t.b=e,t.f=e}function te(t,i,o,a){var e=zt(null,null,null);return e.a=new qt(function(n,r){e.g=i?function(t){try{var e=i.call(a,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof ue?r(t):n(e)}catch(t){r(t)}}:r}),Zt(e.a.c=t,e),e.a}function ee(t,e,n){var r,i;t.a==Ht&&(t===n&&(e=Qt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ne(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,re(t),e!=Qt||n instanceof ue||(i=n,(r=t).g=!0,jt(function(){r.g&&se.call(null,i)}))))}function ne(t,e,n,r){if(t instanceof qt)return Zt(t,zt(e||s,n||null,r)),1;if(I(t))return t.then(e,n,r),1;if(g(t))try{var i=t.then;if(y(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function re(t){t.h||(t.h=!0,jt(t.Zb,t))}function ie(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function oe(t,e,n,r){if(n==Qt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ae(e,n,r);else try{e.c?e.g.call(e.f):ae(e,n,r)}catch(t){se.call(null,t)}P(Gt,e)}function ae(t,e,n){e==Bt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}qt.prototype.then=function(t,e,n){return te(this,y(t)?t:null,y(e)?e:null,n)},qt.prototype.$goog_Thenable=!0,(t=qt.prototype).ka=function(t,e){return(t=zt(t,t,e)).c=!0,Zt(this,t),this},t.s=function(t,e){return te(this,null,t,e)},t.cancel=function(t){this.a==Ht&&jt(function(){!function t(e,n){if(e.a==Ht)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Ht&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ie(r),oe(r,o,Qt,n)))}e.c=null}else ee(e,Qt,n)}(this,new ue(t))},this)},t.Oc=function(t){this.a=Ht,ee(this,Bt,t)},t.Pc=function(t){this.a=Ht,ee(this,Qt,t)},t.Zb=function(){for(var t;t=ie(this);)oe(this,t,this.a,this.i);this.h=!1};var se=Mt;function ue(t){S.call(this,t)}function he(){0!=ce&&(le[this[m]||(this[m]=++_)]=this),this.va=this.va,this.la=this.la}e(ue,S);var ce=0,le={};function pe(t){if(!t.va&&(t.va=!0,t.za(),0!=ce)){var e=t[m]||(t[m]=++_);if(0!=ce&&t.la&&0<t.la.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete le[e]}}function de(t){return de[" "](t),t}he.prototype.va=!(ue.prototype.name="cancel"),he.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},de[" "]=s;var fe,ve,ye=St("Opera"),ge=St("Trident")||St("MSIE"),me=St("Edge"),_e=me||ge,be=St("Gecko")&&!(vt(wt.toLowerCase(),"webkit")&&!St("Edge"))&&!(St("Trident")||St("MSIE"))&&!St("Edge"),we=vt(wt.toLowerCase(),"webkit")&&!St("Edge");function Ee(){var t=d.document;return t?t.documentMode:void 0}t:{var Ce="",Te=(ve=wt,be?/rv:([^\);]+)(\)|;)/.exec(ve):me?/Edge\/([\d\.]+)/.exec(ve):ge?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ve):we?/WebKit\/(\S+)/.exec(ve):ye?/(?:Version)[ \/]?(\S+)/.exec(ve):void 0);if(Te&&(Ce=Te?Te[1]:""),ge){var Ie=Ee();if(null!=Ie&&Ie>parseFloat(Ce)){fe=String(Ie);break t}}fe=Ce}var Se,Ne={};function Ae(s){return t=s,e=function(){for(var t=0,e=st(String(fe)).split("."),n=st(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=yt(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||yt(0==o[2].length,0==a[2].length)||yt(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t},n=Ne,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}Se=d.document&&ge?Ee():void 0;var ke=Object.freeze||function(t){return t},Pe=!ge||9<=Number(Se),Re=ge&&!Ae("9"),Oe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",s,e),d.removeEventListener("test",s,e)}catch(t){}return t}();function De(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function xe(t,e){if(De.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(be){t:{try{de(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=c(t.pointerType)?t.pointerType:Le[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}De.prototype.preventDefault=function(){this.Mb=!1},e(xe,De);var Le=ke({2:"touch",3:"pen",4:"mouse"});xe.prototype.preventDefault=function(){xe.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Re)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},xe.prototype.f=function(){return this.a};var Me="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function je(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Fe,this.ta=this.Ka=!1}function Ue(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function Ve(t){this.src=t,this.a={},this.b=0}function We(t,e){var n=e.type;n in t.a&&V(t.a[n],e)&&(Ue(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}Ve.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=qe(t,e,r,i);return-1<a?(e=t[a],n||(e.Ka=!1)):((e=new je(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var He="closure_lm_"+(1e6*Math.random()|0),Be={};function Qe(t,e,n,r,i){if(r&&r.once)Ge(t,e,n,r,i);else if(l(e))for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);else n=nn(n),t&&t[Me]?on(t,e,n,g(r)?!!r.capture:!!r,i):Ke(t,e,n,!1,r,i)}function Ke(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=g(i)?!!i.capture:!!i,h=tn(t);if(h||(t[He]=h=new Ve(t)),!(n=h.add(e,n,r,u,o)).proxy){if(a=Ze,r=s=Pe?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Oe||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function Ge(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)Ge(t,e[o],n,r,i);else n=nn(n),t&&t[Me]?an(t,e,n,g(r)?!!r.capture:!!r,i):Ke(t,e,n,!0,r,i)}function ze(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)ze(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=nn(n),t&&t[Me]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=qe(o=t.a[e],n,r,i))&&(Ue(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&tn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qe(e,n,r,i)),(n=-1<t?e[t]:null)&&Ye(n))}function Ye(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Me])We(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=tn(e))?(We(n,t),0==n.b&&(n.src=null,e[He]=null)):Ue(t)}}}function Xe(t){return t in Be?Be[t]:Be[t]="on"+t}function Je(t,e,n,r){var i=!0;if((t=tn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=$e(o,r),i=i&&!1!==o)}return i}function $e(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&Ye(t),n.call(r,e)}function Ze(t,e){if(t.ta)return!0;if(Pe)return $e(t,new xe(e,this));if(!e)t:{e=["window","event"];for(var n=d,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new xe(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Je(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Je(r[i],t,!1,e),n=n&&o}return n}function tn(t){return(t=t[He])instanceof Ve?t:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function nn(e){return y(e)?e:(e[en]||(e[en]=function(t){return e.handleEvent(t)}),e[en])}function rn(){he.call(this),this.u=new Ve(this),(this.Sb=this).Xa=null}function on(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function an(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function sn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&We(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function un(t,e,n){if(y(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:d.setTimeout(t,e||0)}function hn(n){var r=null;return new qt(function(t,e){-1==(r=un(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw d.clearTimeout(r),t})}function cn(t){if(t.U&&"function"==typeof t.U)return t.U();if(c(t))return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function ln(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(p(t)||c(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];fn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)fn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function fn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(rn,he),rn.prototype[Me]=!0,rn.prototype.addEventListener=function(t,e,n,r){Qe(this,t,e,n,r)},rn.prototype.removeEventListener=function(t,e,n,r){ze(this,t,e,n,r)},rn.prototype.dispatchEvent=function(t){var e,n=this.Xa;if(n)for(e=[];n;n=n.Xa)e.push(n);n=this.Sb;var r=t.type||t;if(c(t))t=new De(t,n);else if(t instanceof De)t.target=t.target||n;else{var i=t;z(t=new De(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=sn(a,r,!0,t)&&i}if(i=sn(a=t.b=n,r,!0,t)&&i,i=sn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=sn(a=t.b=e[o],r,!1,t)&&i;return i},rn.prototype.za=function(){if(rn.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ue(n[r]);delete e.a[t],e.b--}}this.Xa=null},(t=pn.prototype).U=function(){dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return dn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return fn(this.b,t)?this.b[t]:e},t.set=function(t,e){fn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var vn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof yn?(this.h=void 0!==e?e:t.h,gn(this,t.f),this.i=t.i,this.b=t.b,mn(this,t.l),this.c=t.c,_n(this,jn(t.a)),this.g=t.g):t&&(n=String(t).match(vn))?(this.h=!!e,gn(this,n[1]||"",!0),this.i=Tn(n[2]||""),this.b=Tn(n[3]||"",!0),mn(this,n[4]),this.c=Tn(n[5]||"",!0),_n(this,n[6]||"",!0),this.g=Tn(n[7]||"")):(this.h=!!e,this.a=new On(null,this.h))}function gn(t,e,n){t.f=n?Tn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function mn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function _n(t,e,n){var r,i;e instanceof On?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Dn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ln(this,e),Fn(this,n,t))},r)),r.f=i):(n||(e=In(e,Pn)),t.a=new On(e,t.h))}function bn(t,e,n){t.a.set(e,n)}function wn(t,e){return t.a.get(e)}function En(t){return t instanceof yn?new yn(t):new yn(t,void 0)}function Cn(t,e){var n=new yn(null,void 0);return gn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function In(t,e,n){return c(t)?(t=encodeURI(t).replace(e,Sn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Sn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}yn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(In(e,Nn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(In(e,Nn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(In(n,"/"==n.charAt(0)?kn:An,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",In(n,Rn)),t.join("")},yn.prototype.resolve=function(t){var e=new yn(this),n=!!t.f;n?gn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)mn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(vt(i,"./")||vt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?_n(e,jn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Nn=/[#\/\?@]/g,An=/[#\?:]/g,kn=/[#\?]/g,Pn=/[#\?@]/g,Rn=/#/g;function On(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Dn(n){n.a||(n.a=new pn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function xn(t){var e=ln(t);if(void 0===e)throw Error("Keys are undefined");var n=new On(null,void 0);t=cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];l(o)?Fn(n,i,o):n.add(i,o)}return n}function Ln(t,e){Dn(t),e=Un(t,e),fn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,fn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&dn(t)))}function Mn(t,e){return Dn(t),e=Un(t,e),fn(t.a.b,e)}function Fn(t,e,n){Ln(t,e),0<n.length&&(t.c=null,t.a.set(Un(t,e),H(n)),t.b+=n.length)}function jn(t){var e=new On;return e.c=t.c,t.a&&(e.a=new pn(t.a),e.b=t.b),e}function Un(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=On.prototype).add=function(t,e){Dn(this),this.c=null,t=Un(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Dn(this),this.a.forEach(function(t,e){M(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Dn(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){Dn(this);var e=[];if(c(t))Mn(this,t)&&(e=q(e,this.a.get(Un(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=q(e,t[n])}return e},t.set=function(t,e){return Dn(this),this.c=null,Mn(this,t=Un(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Vn=!ge||9<=Number(Se);function Wn(t){var e=document;return c(t)?e.getElementById(t):t}function qn(n,t){B(t,function(t,e){t&&"object"==(void 0===t?"undefined":vl(t))&&t.qa&&(t=t.pa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:Hn.hasOwnProperty(e)?n.setAttribute(Hn[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var Hn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Bn(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Vn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Lt(a.name),'"'),a.type){o.push(' type="',Lt(a.type),'"');var s={};z(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(c(a)?o.className=a:l(a)?o.className=a.join(" "):qn(o,a)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild(c(t)?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!p(o)||g(o)&&0<o.nodeType?r(o):M(Qn(o)?H(o):o,r)}}(i,o,r),o}function Qn(t){if(t&&"number"==typeof t.length){if(g(t))return"function"==typeof t.item||"string"==typeof t.item;if(y(t))return"function"==typeof t.item}}function Kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==(void 0===n?"undefined":vl(n))){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(void 0===n?"undefined":vl(n)){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+(void 0===n?"undefined":vl(n)))}}}(new Gn,t,e),e.join("")}function Gn(){}var zn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(t,e){e.push('"',t.replace(Yn,function(t){var e=zn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),zn[t]=e),e}),'"')}function Jn(){var t=yr();return ge&&Se&&11==Se||/Edge\/\d+/.test(t)}function $n(){return d.window&&d.window.location.href||self&&self.location&&self.location.href||""}function Zn(t,e){e=e||d.window;var n="about:blank";t&&(n=mt(bt(t)).toString()),e.location.href=n}function tr(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function er(t){t=t||d.window;try{t.close()}catch(t){}}function nr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,vt(n,"crios/")&&(e.target="_blank")),dr(yr())==lr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof gt?n:bt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((St("iPhone")&&!St("iPod")&&!St("iPad")||St("iPad")||St("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(x(a=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof gt||e instanceof gt||(e="object"==(void 0===e?"undefined":vl(e))&&e.qa?e.pa():String(e),_t.test(e)||(e="about:invalid#zClosurez"),e=Ct(e)),a.href=mt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=mt(e).toString(),a&&(_e&&vt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Pt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Lt(t)+'">'),a.document.write(At(t)),a.document.close())):(a=r.open(mt(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var e=null;return new qt(function(t){"complete"==d.document.readyState?t():(e=function(){t()},Ge(window,"load",e))}).s(function(t){throw ze(window,"load",e),t})}function ar(t){return t=t||yr(),!("file:"!==wr()&&"ionic:"!==wr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var t=d.window;try{return t&&t!=t.top}catch(t){return}}function ur(){return void 0!==d.WorkerGlobalScope&&"function"==typeof d.importScripts}function hr(){return yl.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":yl.default.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function cr(){var t=hr();return"ReactNative"===t||"Node"===t}var lr="Firefox",pr="Chrome";function dr(t){var e=t.toLowerCase();return vt(e,"opera/")||vt(e,"opr/")||vt(e,"opios/")?"Opera":vt(e,"iemobile")?"IEMobile":vt(e,"msie")||vt(e,"trident/")?"IE":vt(e,"edge/")?"Edge":vt(e,"firefox/")?lr:vt(e,"silk/")?"Silk":vt(e,"blackberry")?"Blackberry":vt(e,"webos")?"Webos":!vt(e,"safari/")||vt(e,"chrome/")||vt(e,"crios/")||vt(e,"android")?!vt(e,"chrome/")&&!vt(e,"crios/")||vt(e,"edge/")?vt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":pr:"Safari"}var fr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function vr(t,e){e=e||[];var n,r=[],i={};for(n in fr)i[fr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=hr())?r=dr(i=yr()):"Worker"===r&&(r=dr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return d.navigator&&d.navigator.userAgent||""}function gr(t,e){t=t.split("."),e=e||d;for(var n=0;n<t.length&&"object"==(void 0===e?"undefined":vl(e))&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function mr(){try{var t=d.localStorage,e=Sr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Jn()||!!d.indexedDB}catch(t){return ur()&&!!d.indexedDB}return!1}function _r(){return(br()||"chrome-extension:"===wr()||ar())&&!cr()&&mr()&&!ur()}function br(){return"http:"===wr()||"https:"===wr()}function wr(){return d.location&&d.location.protocol||null}function Er(t){return!tr(t=t||yr())&&dr(t)!=lr}function Cr(t){return void 0===t?null:Kn(t)}function Tr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ir(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=dr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ar(){var t=d.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function kr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=hr(),this.b=tr(t)||"ReactNative"===e}function Pr(){var t=d.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Rr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Or(){return gr("fireauth.oauthhelper",d)||gr("fireauth.iframe",d)}kr.prototype.get=function(){var t=d.navigator;return!t||"boolean"!=typeof t.onLine||!br()&&"chrome-extension:"!==wr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Dr,xr={};function Lr(t){xr[t]||(xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),Dr=2==Mr.abcd}catch(t){Dr=!1}function Fr(t,e,n){Dr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Fr(t,n,e[n])}function Ur(t){var e={};return jr(e,t),e}function Vr(t){var e=t;if("object"==(void 0===t?"undefined":vl(t))&&null!=t)for(var n in e="length"in t?[]:{},t)Fr(e,n,Vr(t[n]));return e}function Wr(t){var e={},n=t[Hr],r=t[Br];if(!(t=t[Qr])||t!=qr&&!n)throw Error("Invalid provider user info!");e[Gr]=r||null,e[Kr]=n||null,Fr(this,Yr,t),Fr(this,zr,Vr(e))}var qr="EMAIL_SIGNIN",Hr="email",Br="newEmail",Qr="requestType",Kr="email",Gr="fromEmail",zr="data",Yr="operation";function Xr(t,e){this.code=$r+t,this.message=e||Zr[t]||""}function Jr(t){var e=t&&t.code;return e?new Xr(e.substring($r.length),t.message):null}e(Xr,Error),Xr.prototype.A=function(){return{code:this.code,message:this.message}},Xr.prototype.toJSON=function(){return this.A()};var $r="auth/",Zr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ti(t){var e=wn(t=En(t),ei)||null,n=wn(t,ni)||null,r=wn(t,oi)||null;if(r=r&&si[r]||null,!e||!n||!r)throw new Xr("argument-error",ei+", "+ni+"and "+oi+" are required in a valid action code URL.");jr(this,{apiKey:e,operation:r,code:n,continueUrl:wn(t,ri)||null,languageCode:wn(t,ii)||null,tenantId:wn(t,ai)||null})}var ei="apiKey",ni="oobCode",ri="continueUrl",ii="languageCode",oi="mode",ai="tenantId",si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:qr,verifyEmail:"VERIFY_EMAIL"};function ui(t){try{return new ti(t)}catch(t){return null}}function hi(t){var e=t[fi];if(void 0===e)throw new Xr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Xr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ci];if(n&&"object"===(void 0===n?"undefined":vl(n))){e=n[gi];var r=n[vi];if(n=n[yi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Xr("argument-error",vi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Xr("argument-error",yi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Xr("argument-error",gi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Xr("missing-android-pkg-name")}}else if(void 0!==n)throw new Xr("argument-error",ci+" property must be a non null object when specified.");if(this.f=null,(e=t[di])&&"object"===(void 0===e?"undefined":vl(e))){if("string"==typeof(e=e[mi])&&e.length)this.f=e;else if(void 0!==e)throw new Xr("argument-error",mi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Xr("argument-error",di+" property must be a non null object when specified.");if(void 0!==(e=t[pi])&&"boolean"!=typeof e)throw new Xr("argument-error",pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[li])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Xr("argument-error",li+" property must be a non empty string when specified.");this.i=t||null}var ci="android",li="dynamicLinkDomain",pi="handleCodeInApp",di="iOS",fi="url",vi="installApp",yi="minimumVersion",gi="packageName",mi="bundleId";function _i(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var bi=null,wi=null;function Ei(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=wi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!bi){bi={},wi={};for(var t=0;t<65;t++)bi[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(wi[bi[t]]=t)&&(wi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var i=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Ci(t){this.f=t.sub,T(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Ti(t){return(t=Ii(t))&&t.sub&&t.iss&&t.aud&&t.exp?new Ci(t):null}function Ii(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Ei(t))}catch(t){}return null}Ci.prototype.R=function(){return this.c},Ci.prototype.g=function(){return this.b};var Si,Ni={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ai(t){for(var e in Ni)if(Ni[e].id===t)return{firebaseEndpoint:(t=Ni[e]).cb,secureTokenEndpoint:t.ib};return null}Si=Ai("__EID__")?"__EID__":void 0;var ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Pi=["client_id","response_type","scope","redirect_uri","state"],Ri={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Pi},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Pi},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Pi},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:ki},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Oi(t){for(var e in Ri)if(Ri[e].Fa==t)return Ri[e];return null}function Di(t){var e={};e["facebook.com"]=ji,e["google.com"]=Vi,e["github.com"]=Ui,e["twitter.com"]=Wi;var n=t&&t[Li];try{if(n)return e[n]?new e[n](t):new Fi(t);if(void 0!==t[xi])return new Mi(t)}catch(t){}return null}var xi="idToken",Li="providerId";function Mi(t){var e=t[Li];if(!e&&t[xi]){var n=Ti(t[xi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Fr(this,"providerId",e),Fr(this,"isNewUser",n)}function Fi(t){Mi.call(this,t),Fr(this,"profile",Vr((t=Ir(t.rawUserInfo||"{}"))||{}))}function ji(t){if(Fi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ui(t){if(Fi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function Vi(t){if(Fi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Wi(t){if(Fi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",t.screenName||null)}function qi(t){var e=En(t),n=wn(e,"link"),r=wn(En(n),"link");return e=wn(e,"deep_link_id"),wn(En(e),"link")||e||r||n||t}function Hi(){}function Bi(t,n){return t.then(function(t){if(t[Da]){var e=Ti(t[Da]);if(!e||n!=e.f)throw new Xr("user-mismatch");return t}throw new Xr("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==$r+"user-not-found"?new Xr("user-mismatch"):t})}function Qi(t,e){if(!e)throw new Xr("internal-error","failed to construct a credential");this.a=e,Fr(this,"providerId",t),Fr(this,"signInMethod",t)}function Ki(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Gi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Qi(t.providerId,t.pendingToken)}catch(t){}return null}function zi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Fr(this,"idToken",e.idToken),e.accessToken&&Fr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Fr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Xr("internal-error","failed to construct a credential");Fr(this,"accessToken",e.oauthToken),Fr(this,"secret",e.oauthTokenSecret)}Fr(this,"providerId",t),Fr(this,"signInMethod",n)}function Yi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Xi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new zi(t.providerId,e,t.signInMethod)}catch(t){}}return null}function Ji(t,e){this.Fc=e||[],jr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(Oi(t)||{}).Ea||null,this.bb=null}function $i(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Xr("argument-error",'SAML provider IDs must be prefixed with "saml."');Ji.call(this,t,[])}function Zi(t){Ji.call(this,t,Pi),this.a=[]}function to(){Zi.call(this,"facebook.com")}function eo(t){if(!t)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new to).credential({accessToken:e})}function no(){Zi.call(this,"github.com")}function ro(t){if(!t)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new no).credential({accessToken:e})}function io(){Zi.call(this,"google.com"),this.ya("profile")}function oo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new io).credential({idToken:n,accessToken:e})}function ao(){Ji.call(this,"twitter.com",ki)}function so(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Xr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new zi("twitter.com",n,"twitter.com")}function uo(t,e,n){this.a=t,this.c=e,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===co.EMAIL_LINK_SIGN_IN_METHOD?co.EMAIL_LINK_SIGN_IN_METHOD:co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ho(t){return t&&t.email&&t.password?new uo(t.email,t.password,t.signInMethod):null}function co(){jr(this,{providerId:"password",isOAuthProvider:!1})}function lo(t,e){if(!(e=po(e)))throw new Xr("argument-error","Invalid email link!");return new uo(t,e.code,co.EMAIL_LINK_SIGN_IN_METHOD)}function po(t){return(t=ui(t=qi(t)))&&t.operation===qr?t:null}function fo(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new Xr("internal-error");this.a=t,Fr(this,"providerId","phone"),Fr(this,"signInMethod","phone")}function vo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return M(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new fo(n)}return null}function yo(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function go(t){try{this.a=t||yl.default.auth()}catch(t){throw new Xr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}jr(this,{providerId:"phone",isOAuthProvider:!1})}function mo(t,e){if(!t)throw new Xr("missing-verification-id");if(!e)throw new Xr("missing-verification-code");return new fo({Va:t,Ua:e})}function _o(t){if(t.temporaryProof&&t.phoneNumber)return new fo({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return oo(o,n);case"facebook.com":return eo(n);case"github.com":return ro(n);case"twitter.com":return so(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Qi(e,a):new zi(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Zi(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function bo(t){if(!t.isOAuthProvider)throw new Xr("invalid-oauth-provider")}function wo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Xr("invalid-auth-event");if(this.g&&this.a)throw new Xr("invalid-auth-event");if(this.g&&!this.f)throw new Xr("invalid-auth-event")}function Eo(t){return(t=t||{}).type?new wo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Jr(t.error),t.postBody,t.tenantId):null}function Co(){this.b=null,this.a=[]}e(Fi,Mi),e(ji,Fi),e(Ui,Fi),e(Vi,Fi),e(Wi,Fi),Qi.prototype.na=function(t){return Ja(t,Ki(this))},Qi.prototype.b=function(t,e){var n=Ki(this);return n.idToken=e,$a(t,n)},Qi.prototype.f=function(t,e){return Bi(Za(t,Ki(this)),e)},Qi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},zi.prototype.na=function(t){return Ja(t,Yi(this))},zi.prototype.b=function(t,e){var n=Yi(this);return n.idToken=e,$a(t,n)},zi.prototype.f=function(t,e){return Bi(Za(t,Yi(this)),e)},zi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Ji.prototype.Ga=function(t){return this.zb=K(t),this},e($i,Ji),e(Zi,Ji),Zi.prototype.ya=function(t){return U(this.a,t)||this.a.push(t),this},Zi.prototype.Hb=function(){return H(this.a)},Zi.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Xr("argument-error","credential failed: must provide the ID token and/or the access token.");return new zi(this.providerId,n,this.providerId)},e(to,Zi),Fr(to,"PROVIDER_ID","facebook.com"),Fr(to,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(no,Zi),Fr(no,"PROVIDER_ID","github.com"),Fr(no,"GITHUB_SIGN_IN_METHOD","github.com"),e(io,Zi),Fr(io,"PROVIDER_ID","google.com"),Fr(io,"GOOGLE_SIGN_IN_METHOD","google.com"),e(ao,Ji),Fr(ao,"PROVIDER_ID","twitter.com"),Fr(ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),uo.prototype.na=function(t){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?As(t,ss,{email:this.a,oobCode:this.c}):As(t,Ts,{email:this.a,password:this.c})},uo.prototype.b=function(t,e){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?As(t,us,{idToken:e,email:this.a,oobCode:this.c}):As(t,ms,{idToken:e,email:this.a,password:this.c})},uo.prototype.f=function(t,e){return Bi(this.na(t),e)},uo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},jr(co,{PROVIDER_ID:"password"}),jr(co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),jr(co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fo.prototype.na=function(t){return t.Wa(yo(this))},fo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,As(t,Ss,n)},fo.prototype.f=function(t,e){var n=yo(this);return n.operation="REAUTH",Bi(t=As(t,Ns,n),e)},fo.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},go.prototype.Wa=function(e,n){var r=this.a.b;return Yt(n.verify()).then(function(t){if(!c(t))throw new Xr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return As(r,ys,{phoneNumber:e,recaptchaToken:t}).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new Xr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},jr(go,{PROVIDER_ID:"phone"}),jr(go,{PHONE_SIGN_IN_METHOD:"phone"}),wo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},wo.prototype.R=function(){return this.h},wo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var To,Io=null;function So(t){var e="unauthorized-domain",n=void 0,r=En(t);t=r.b,"chrome-extension"==(r=r.f)?n=xt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=xt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Xr.call(this,e,n)}function No(t,e,n){Xr.call(this,t,n),(t=e||{}).Ab&&Fr(this,"email",t.Ab),t.ba&&Fr(this,"phoneNumber",t.ba),t.credential&&Fr(this,"credential",t.credential),t.Qb&&Fr(this,"tenantId",t.Qb)}function Ao(t){if(t.code){var e=t.code||"";0==e.indexOf($r)&&(e=e.substring($r.length));var n={credential:_o(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Xr(e,t.message||void 0);return new No(e,n,t.message)}return null}function ko(){}function Po(t){return t.c||(t.c=t.b())}function Ro(){}function Oo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Do(){}function xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.fc,this),this.a.onerror=E(this.Ib,this),this.a.onprogress=E(this.gc,this),this.a.ontimeout=E(this.kc,this)}function Lo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Mo(t,e,n){this.reset(t,e,n,void 0,void 0)}e(So,Xr),e(No,Xr),No.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&z(t,e),t},No.prototype.toJSON=function(){return this.A()},ko.prototype.c=null,e(Ro,ko),Ro.prototype.a=function(){var t=Oo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ro.prototype.b=function(){var t={};return Oo(this)&&(t[0]=!0,t[1]=!0),t},To=new Ro,e(Do,ko),Do.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new xo;throw Error("Unsupported browser")},Do.prototype.b=function(){return{}},(t=xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Lo(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Lo(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Lo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Mo.prototype.a=null;function Fo(t){this.f=t,this.b=this.c=this.a=null}function jo(t,e){this.name=t,this.value=e}Mo.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},jo.prototype.toString=function(){return this.name};var Uo=new jo("SEVERE",1e3),Vo=new jo("WARNING",900),Wo=new jo("CONFIG",700),qo=new jo("FINE",500);Fo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(A("Root logger has no level set."),null)}(this).value)for(y(e)&&(e=e()),t=new Mo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ho,Bo={},Qo=null;function Ko(t){var e;if(Qo||(Qo=new Fo(""),(Bo[""]=Qo).c=Wo),!(e=Bo[t])){e=new Fo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Ko(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,Bo[t]=e}return e}function Go(t,e){t&&t.log(qo,e,void 0)}function zo(t){this.f=t}function Yo(t){rn.call(this),this.o=t,this.readyState=Xo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Ko("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(zo,ko),zo.prototype.a=function(){return new Yo(this.f)},zo.prototype.b=(Ho={},function(){return Ho}),e(Yo,rn);var Xo=0;function Jo(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function $o(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Zo(t)}function Zo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ta(t){rn.call(this),this.headers=new pn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ea,this.v=this.P=!1}(t=Yo.prototype).open=function(t,e){if(this.readyState!=Xo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Zo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,$o(this,!1)),this.readyState=Xo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Zo(this)),this.a&&(this.readyState=3,Zo(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==d.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Jo(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?$o(this,!0):Zo(this),3==this.readyState&&Jo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,$o(this,!0))},t.hc=function(t){this.a&&(this.response=t,$o(this,!0))},t.Oa=function(t){var e=this.h;e&&e.log(Vo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&$o(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(ta,rn);var ea="";ta.prototype.b=Ko("goog.net.XhrIo");var na=/^https?$/i,ra=["POST","PUT"];function ia(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():To.a(),e.w=e.B?Po(e.B):Po(To),e.a.onreadystatechange=E(e.Lb,e);try{Go(e.b,da(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return Go(e.b,da(e,"Error opening Xhr: "+t.message)),void aa(e,t)}t=r||"";var o,a=new pn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||c(t))M(t,e,void 0);else for(var n=ln(t),r=cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){a.set(e,t)}),i=function(t){t:{for(var e=oa,n=t.length,r=c(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:c(t)?t.charAt(e):t[e]}(a.X()),r=d.FormData&&t instanceof d.FormData,!U(ra,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{ca(e),0<e.g&&(e.v=(o=e.a,ge&&Ae(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Go(e.b,da(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=E(e.Ia,e)):e.o=un(e.Ia,e.g,e)),Go(e.b,da(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Go(e.b,da(e,"Send error: "+t.message)),aa(e,t)}}function oa(t){return"content-type"==t.toLowerCase()}function aa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,sa(t),ha(t)}function sa(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ua(e){if(e.c&&void 0!==u)if(e.w[1]&&4==la(e)&&2==pa(e))Go(e.b,da(e,"Local request error detected and ignored"));else if(e.i&&4==la(e))un(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==la(e)){Go(e.b,da(e,"Request complete")),e.c=!1;try{var t,n=pa(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(vn)[1]||null;if(!o&&d.self&&d.self.location){var a=d.self.location.protocol;o=a.substr(0,a.length-1)}i=!na.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<la(e)?e.a.statusText:""}catch(t){Go(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+pa(e)+"]",sa(e)}}finally{ha(e)}}}function ha(e,t){if(e.a){ca(e);var n=e.a,r=e.w[0]?s:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Uo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ca(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(d.clearTimeout(t.o),t.o=null)}function la(t){return t.a?t.a.readyState:0}function pa(t){try{return 2<la(t)?t.a.status:-1}catch(t){return-1}}function da(t,e){return e+" ["+t.O+" "+t.l+" "+pa(t)+"]"}function fa(t){var e=Ia;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function va(t,e,n){t.a=!0,t.c=n,t.f=!e,_a(t)}function ya(t){if(t.a){if(!t.u)throw new ba(t);t.u=!1}}function ga(t,e,n,r){t.g.push([e,n,r]),t.a&&_a(t)}function ma(t){return j(t.g,function(t){return y(t[1])})}function _a(e){if(e.h&&e.a&&ma(e)){var n=e.h,r=Ca[n];r&&(d.clearTimeout(r.a),delete Ca[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.o,n);void 0!==s&&(e.f=e.f&&(s==n||s instanceof Error),e.c=n=s),(I(n)||"function"==typeof d.Promise&&n instanceof d.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,ma(e)||(r=!0)}}e.c=n,t&&(s=E(e.m,e,!0),t=E(e.m,e,!1),n instanceof fa?(ga(n,s,t),n.w=!0):n.then(s,t)),r&&(n=new Ea(n),Ca[n.a]=n,e.h=n.a)}function ba(){S.call(this)}function wa(){S.call(this)}function Ea(t){this.a=d.setTimeout(E(this.c,this),0),this.b=t}(t=ta.prototype).Ia=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Go(this.b,da(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Go(this.b,da(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ha(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ha(this,!0)),ta.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?ua(this):this.yc())},t.yc=function(){ua(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ea:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Uo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Go(this.b,"Can not get response: "+t.message),null}},fa.prototype.cancel=function(t){if(this.a)this.c instanceof fa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new wa(this),ya(this),va(this,!1,t))}},fa.prototype.m=function(t,e){this.i=!1,va(this,t,e)},fa.prototype.then=function(t,e,n){var r,i,o=new qt(function(t,e){r=t,i=e});return ga(this,r,function(t){t instanceof wa?o.cancel():i(t)}),o.then(t,e,n)},fa.prototype.$goog_Thenable=!0,e(ba,S),ba.prototype.message="Deferred has already fired",ba.prototype.name="AlreadyCalledError",e(wa,S),wa.prototype.message="Deferred was canceled",wa.prototype.name="CanceledError",Ea.prototype.c=function(){throw delete Ca[this.a],this.b};var Ca={};function Ta(t){var e,n,r,i,o={},a=o.document||document,s=et(t).toString(),u=document.createElement("SCRIPT"),h={Nb:u,Ia:void 0},c=new fa(h),l=null,p=null!=o.timeout?o.timeout:5e3;return 0<p&&(l=window.setTimeout(function(){Sa(u,!0);var t=new ka(Aa,"Timeout reached for loading script "+s);ya(c),va(c,!1,t)},p),h.Ia=l),u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(Sa(u,o.hd||!1,l),ya(c),va(c,!0,null))},u.onerror=function(){Sa(u,!0,l);var t=new ka(Na,"Error while loading script "+s);ya(c),va(c,!1,t)},z(h=o.attributes||{},{type:"text/javascript",charset:"UTF-8"}),qn(u,h),n=t,x(e=u,"HTMLScriptElement"),e.src=et(n),null===v&&(v=(n=(n=d.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&f.test(n)?n:""),(n=v)&&e.setAttribute("nonce",n),((i=((r=a)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(u),c}function Ia(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&Sa(t,!0,this.Ia)}}function Sa(t,e,n){null!=n&&d.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Na=0,Aa=1;function ka(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),S.call(this,n),this.code=t}function Pa(t){this.f=t}function Ra(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||xa,this.g=K(t.secureTokenHeaders||La),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||Ma,this.a=K(t.firebaseHeaders||Fa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==hr(),!(n=d.XMLHttpRequest||n&&yl.default.INTERNAL.node&&yl.default.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Xr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new zo(self):cr()?this.f=new Pa(n):this.f=new Do,this.b=null}e(ka,S),e(Pa,ko),Pa.prototype.a=function(){return new this.f},Pa.prototype.b=function(){return{}};var Oa,Da="idToken",xa=new kr(3e4,6e4),La={"Content-Type":"application/x-www-form-urlencoded"},Ma=new kr(3e4,6e4),Fa={"Content-Type":"application/json"};function ja(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ua(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Va(t,e,n,r,i,o,a){var s;(t=!((s=dr(s=yr())==pr&&(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&s<30||ge&&Se&&!(9<Se))||ur()?E(t.o,t):(Oa=Oa||new qt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{d[qa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ga(t,null,e,void 0)}(Ta(nt(Wa,{onload:qa})),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)}),E(t.m,t)))(e,n,r,i,o,a)}Ra.prototype.R=function(){return this.b},Ra.prototype.o=function(t,n,e,r,i,o){if(ur()&&(void 0===d.fetch||void 0===d.Headers||void 0===d.Request))throw new Xr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ta(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}on(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Go(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),an(a,"ready",function(){s&&clearTimeout(s),pe(this)}),an(a,"timeout",function(){s&&clearTimeout(s),pe(this),n&&n(null)}),ia(a,t,e,r,i)};var Wa=new Y($,"https://apis.google.com/js/client.js?onload=%{onload}"),qa="__fcb"+Math.floor(1e6*Math.random()).toString();function Ha(t){if(!c(t=t.email)||!ir.test(t))throw new Xr("invalid-email")}function Ba(t){"email"in t&&Ha(t)}function Qa(t){if(!t[Da])throw new Xr("internal-error")}function Ka(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Xr("internal-error")}else{if(!t.sessionInfo)throw new Xr("missing-verification-id");if(!t.code)throw new Xr("missing-verification-code")}}Ra.prototype.m=function(t,n,r,i,o){var a=this;Oa.then(function(){window.gapi.client.setApiKey(a.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ra.prototype.ob=function(){return As(this,_s,{})},Ra.prototype.rb=function(t,e){return As(this,gs,{idToken:t,email:e})},Ra.prototype.sb=function(t,e){return As(this,ms,{idToken:t,password:e})};var Ga={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function za(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Xr("internal-error")}function Ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Mn(t=new On(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Xa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ao(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ao(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ao(t)):t.errorMessage&&(e=ks(t.errorMessage)),e)throw e;if(!t[Da])throw new Xr("internal-error")}function Ja(t,e){return e.returnIdpCredential=!0,As(t,bs,e)}function $a(t,e){return e.returnIdpCredential=!0,As(t,Es,e)}function Za(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,As(t,ws,e)}function ts(t){if(!t.oobCode)throw new Xr("invalid-action-code")}(t=Ra.prototype).tb=function(t,r){var i={idToken:t},o=[];return B(Ga,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),As(this,gs,i)},t.kb=function(t,e){return z(t={requestType:"PASSWORD_RESET",email:t},e),As(this,ps,t)},t.lb=function(t,e){return z(t={requestType:"EMAIL_SIGNIN",email:t},e),As(this,cs,t)},t.jb=function(t,e){return z(t={requestType:"VERIFY_EMAIL",idToken:t},e),As(this,ls,t)},t.Wa=function(t){return As(this,Is,t)},t.ab=function(t,e){return As(this,vs,{oobCode:t,newPassword:e})},t.Ma=function(t){return As(this,ns,{oobCode:t})},t.Ya=function(t){return As(this,es,{oobCode:t})};var es={endpoint:"setAccountInfo",D:ts,fa:"email",F:!0},ns={endpoint:"resetPassword",D:ts,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Xr("internal-error")},F:!0},rs={endpoint:"signupNewUser",D:function(t){if(Ha(t),!t.password)throw new Xr("weak-password")},K:Qa,T:!0,F:!0},is={endpoint:"createAuthUri",F:!0},os={endpoint:"deleteAccount",V:["idToken"]},as={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!l(t.deleteProvider))throw new Xr("internal-error")}},ss={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ha,K:Qa,T:!0,F:!0},us={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ha,K:Qa,T:!0},hs={endpoint:"getAccountInfo"},cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Xr("internal-error");Ha(t)},fa:"email",F:!0},ls={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Xr("internal-error")},fa:"email",F:!0},ps={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Xr("internal-error");Ha(t)},fa:"email",F:!0},ds={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},fs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Xr("internal-error")}},vs={endpoint:"resetPassword",D:ts,fa:"email",F:!0},ys={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},gs={endpoint:"setAccountInfo",V:["idToken"],D:Ba,T:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ba(t),!t.password)throw new Xr("weak-password")},K:Qa,T:!0},_s={endpoint:"signupNewUser",K:Qa,T:!0,F:!0},bs={endpoint:"verifyAssertion",D:za,Ra:Ya,K:Xa,T:!0,F:!0},ws={endpoint:"verifyAssertion",D:za,Ra:Ya,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Xr("user-not-found");if(t.errorMessage)throw ks(t.errorMessage);if(!t[Da])throw new Xr("internal-error")},T:!0,F:!0},Es={endpoint:"verifyAssertion",D:function(t){if(za(t),!t.idToken)throw new Xr("internal-error")},Ra:Ya,K:Xa,T:!0},Cs={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Xr("invalid-custom-token")},K:Qa,T:!0,F:!0},Ts={endpoint:"verifyPassword",D:function(t){if(Ha(t),!t.password)throw new Xr("wrong-password")},K:Qa,T:!0,F:!0},Is={endpoint:"verifyPhoneNumber",D:Ka,K:Qa,F:!0},Ss={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Xr("internal-error");Ka(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ao(t);Qa(t)}},Ns={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ka,K:Qa,F:!0};function As(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.V))return Xt(new Xr("internal-error"));var r,i=e.Kb||"POST";return Yt(n).then(e.D).then(function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,r,i,o,n){var a=En(t.h+e);bn(a,"key",t.c),n&&bn(a,"cb",T().toString());var s="GET"==r;if(s)for(var u in i)i.hasOwnProperty(u)&&bn(a,u,i[u]);return new qt(function(e,n){Va(t,a.toString(),function(t){t?t.error?n(Ps(t,o||{})):e(t):n(new Xr("network-request-failed"))},r,s?void 0:Kn(Tr(i)),t.a,t.i.get())})}(t,e.endpoint,i,n,e.Yb,e.wb||!1)}).then(function(t){return r=t,e.Ra?e.Ra(n,r):r}).then(e.K).then(function(){if(!e.fa)return r;if(!(e.fa in r))throw new Xr("internal-error");return r[e.fa]})}function ks(t){return Ps({error:{errors:[{message:t}],code:400,message:t}})}function Ps(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Xr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",z(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Xr(r[i],e);return!e&&t&&(e=Cr(t)),new Xr("internal-error",e)}function Rs(t){var o;this.b=t,this.a=null,this.gb=(o=this,(Ls=Ls||new qt(function(t,e){function n(){Ar(),gr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ar(),e(Error("Network Error"))},timeout:Ds.get()})}if(gr("gapi.iframes.Iframe"))t();else if(gr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();d[r]=function(){gr("gapi.load")?n():e(Error("Network Error"))},Yt(Ta(r=nt(Os,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Ls=null,t})).then(function(){return new qt(function(r,i){gr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},xs.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Os=new Y($,"https://apis.google.com/js/api.js?onload=%{onload}"),Ds=new kr(3e4,6e4),xs=new kr(5e3,15e3),Ls=null;function Ms(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Cn(this.i,"/__/auth/iframe"),bn(this.a,"apiKey",this.g),bn(this.a,"appName",this.h),this.b=null,this.c=[]}function Fs(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function js(t){try{return yl.default.app(t).auth().Ca()}catch(t){return[]}}function Us(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Vs(t){var s=$n();return As(t,ds,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{var e=En(s),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,a=n;if(o=0==i.indexOf("chrome-extension://")?En(i).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(rr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new So($n())})}function Ws(i){return i.l||(i.l=or().then(function(){if(!i.o){var t=i.c,e=i.h,n=js(i.b),r=new Ms(i.u,i.f,i.b);r.f=t,r.b=e,r.c=H(n||[]),i.o=r.toString()}i.i=new Rs(i.o),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then(function(){t.a.register("authEvent",e,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Eo(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Yt(e)}return e.status="ERROR",Yt(e)})}(i)})),i.l}function qs(t){return t.m||(t.v=t.c?vr(t.c,js(t.b)):null,t.m=new Ra(t.f,Ai(t.h),t.v)),t.m}function Hs(t,e,n,r,i,o,a,s,u,h,c){return(t=new Fs(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=K(u||null),t.f=h,t.nb(c).toString()}function Bs(t){if(this.a=t||yl.default.INTERNAL.reactNative&&yl.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Xr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Qs(t){this.b=t,this.a={},this.f=E(this.c,this)}Ms.prototype.toString=function(){return this.f?bn(this.a,"v",this.f):Ln(this.a.a,"v"),this.b?bn(this.a,"eid",this.b):Ln(this.a.a,"eid"),this.c.length?bn(this.a,"fw",this.c.join(",")):Ln(this.a.a,"fw"),this.a.toString()},Fs.prototype.nb=function(t){return this.h=t,this},Fs.prototype.toString=function(){var t=Cn(this.o,"/__/auth/handler");if(bn(t,"apiKey",this.m),bn(t,"appName",this.c),bn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=yl.default.app(this.c).auth().ha()}catch(t){n=null}for(var r in e.bb=n,bn(t,"providerId",this.a.providerId),n=Tr((e=this.a).zb))n[r]=n[r].toString();r=e.Fc,n=K(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.eb&&e.bb&&!n[e.eb]&&(n[e.eb]=e.bb),Q(n)||bn(t,"customParameters",Cr(n))}if("function"==typeof this.a.Hb&&((e=this.a.Hb()).length&&bn(t,"scopes",e.join(","))),this.l?bn(t,"redirectUrl",this.l):Ln(t.a,"redirectUrl"),this.g?bn(t,"eventId",this.g):Ln(t.a,"eventId"),this.i?bn(t,"v",this.i):Ln(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!wn(t,a)&&bn(t,a,this.b[a]);return this.h?bn(t,"tid",this.h):Ln(t.a,"tid"),this.f?bn(t,"eid",this.f):Ln(t.a,"eid"),(a=js(this.c)).length&&bn(t,"fw",a.join(",")),t.toString()},(t=Us.prototype).Fb=function(e,n,t){var r=new Xr("popup-closed-by-user"),i=new Xr("web-storage-unsupported"),o=this,a=!1;return this.ia().then(function(){var t,r;r={type:"webStorageSupport"},Ws(t=o).then(function(){return e=t.i,n=r,e.gb.then(function(){return new qt(function(t){e.a.send(n.type,n,t,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&er(e),n(i),a=!0)})}).s(function(){}).then(function(){if(!a)return n=e,new qt(function(e){return function t(){hn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!a)return hn(t).then(function(){n(r)})})},t.Ob=function(){var t=yr();return!Er(t)&&!Nr(t)},t.Jb=function(){return!1},t.Db=function(e,t,n,r,i,o,a,s){if(!e)return Xt(new Xr("popup-blocked"));if(a&&!Er())return this.ia().s(function(t){er(e),i(t)}),r(),Yt();this.a||(this.a=Vs(qs(this)));var u=this;return this.a.then(function(){var t=u.ia().s(function(t){throw er(e),i(t),t});return r(),t}).then(function(){bo(n),a||Zn(Hs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Eb=function(t,e,n,r){this.a||(this.a=Vs(qs(this)));var i=this;return this.a.then(function(){bo(e),Zn(Hs(i.u,i.f,i.b,t,e,$n(),n,i.c,void 0,i.h,r))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ia=function(){var t=this;return Ws(this).then(function(){return t.i.gb}).s(function(){throw t.a=null,new Xr("network-request-failed")})},t.Rb=function(){return!0},t.Aa=function(t){this.g.push(t)},t.Na=function(e){W(this.g,function(t){return t==e})},(t=Bs.prototype).get=function(t){return Yt(this.a.getItem(t)).then(function(t){return t&&Ir(t)})},t.set=function(t,e){return Yt(this.a.setItem(t,Cr(e)))},t.S=function(t){return Yt(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var Ks,Gs=[];function zs(t,e,n){Q(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ys(t){this.a=t}function Xs(t){this.c=t,this.b=!1,this.a=[]}function Js(r,t,e,n){var i,o,a,s,u=e||{},h=null;if(r.b)return Xt(Error("connection_unavailable"));var c=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new qt(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},c),h={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},r.a.push(h),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return $s(r,h),t}).s(function(t){throw $s(r,h),t})}function $s(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,function(t){return t==e})}}function Zs(){if(!nu())throw new Xr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=d.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t,r=this;ur()&&self?(this.l=function(){var e=ur()?self:null;if(M(Gs,function(t){t.b==e&&(n=t)}),!n){var n=new Qs(e);Gs.push(n)}return n}(),zs(this.l,"keyChanged",function(t,n){return su(r).then(function(e){return 0<e.length&&M(r.a,function(t){t(e)}),{keyProcessed:U(e,n.key)}})}),zs(this.l,"ping",function(){return Yt(["keyChanged"])})):((t=d.navigator)&&t.serviceWorker?Yt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):Yt(null)).then(function(t){(r.h=t)&&(r.g=new Xs(new Ys(t)),Js(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&U(t[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function tu(i){return new qt(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new qt(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return tu(i)}).then(function(t){e(t)}).s(function(t){n(t)}))}})}function eu(t){return t.m||(t.m=tu(t)),t.m}function nu(){try{return d.indexedDB}catch(t){return}}function ru(t){return t.objectStore("firebaseLocalStorage")}function iu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ou(t){return new qt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function au(t,e){return t.g&&t.h&&((n=d.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?Js(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):Yt();var n}function su(r){return eu(r).then(function(t){var i=ru(iu(t,!1));return i.getAll?ou(i.getAll()):new qt(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&vl(e[r])==vl(n[r])?"object"==vl(e[r])&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function uu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function hu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Yt().then(function(){if(nu()){var e=Sr(),n="__sak"+e;return Ks=Ks||new Zs,(i=Ks).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.S(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.$(function(e){M(r.a,function(t){t(e)})}),t})}function cu(){this.a={},this.type="inMemory"}function lu(){if(!function(){var t="Node"==hr();if(!(t=pu()||t&&yl.default.INTERNAL.node&&yl.default.INTERNAL.node.localStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==hr())throw new Xr("internal-error","The LocalStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=pu()||yl.default.INTERNAL.node.localStorage,this.type="localStorage"}function pu(){try{var t=d.localStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function du(){this.type="nullStorage"}function fu(){if(!function(){var t="Node"==hr();if(!(t=vu()||t&&yl.default.INTERNAL.node&&yl.default.INTERNAL.node.sessionStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==hr())throw new Xr("internal-error","The SessionStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=vu()||yl.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function vu(){try{var t=d.sessionStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function yu(){var t={};t.Browser=_u,t.Node=bu,t.ReactNative=wu,t.Worker=Eu,this.a=t[hr()]}Qs.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];M(t,function(t){e.push(Yt().then(function(){return t(n.origin,n.data.data)}))}),$t(e).then(function(t){var e=[];M(t,function(t){e.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})}),M(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},Ys.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Xs.prototype.close=function(){for(;0<this.a.length;)$s(this,this.a[0]);this.b=!0},(t=Zs.prototype).set=function(n,r){var i,o=!1,a=this;return eu(this).then(function(t){return ou((t=ru(iu(i=t,!0))).get(n))}).then(function(t){var e=ru(iu(i,!0));return t?(t.value=r,ou(e.put(t))):(a.b++,o=!0,(t={}).fbase_key=n,t.value=r,ou(e.add(t)))}).then(function(){return a.c[n]=r,au(a,n)}).ka(function(){o&&a.b--})},t.get=function(e){return eu(this).then(function(t){return ou(ru(iu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.S=function(e){var n=!1,r=this;return eu(this).then(function(t){return n=!0,r.b++,ou(ru(iu(t,!0)).delete(e))}).then(function(){return delete r.c[e],au(r,e)}).ka(function(){n&&r.b--})},t.$=function(t){var n;0==this.a.length&&(uu(n=this),function e(){n.f=setTimeout(function(){n.i=su(n).then(function(e){0<e.length&&M(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ea=function(e){W(this.a,function(t){return t==e}),0==this.a.length&&uu(this)},(t=hu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.S=function(e){return this.b.then(function(t){return t.S(e)})},t.$=function(t){this.a.push(t)},t.ea=function(e){W(this.a,function(t){return t==e})},(t=cu.prototype).get=function(t){return Yt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Yt()},t.S=function(t){return delete this.a[t],Yt()},t.$=function(){},t.ea=function(){},(t=lu.prototype).get=function(t){var e=this;return Yt().then(function(){return Ir(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Yt().then(function(){var t=Cr(n);null===t?r.S(e):r.a.setItem(e,t)})},t.S=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.$=function(t){d.window&&Qe(d.window,"storage",t)},t.ea=function(t){d.window&&ze(d.window,"storage",t)},(t=du.prototype).get=function(){return Yt(null)},t.set=function(){return Yt()},t.S=function(){return Yt()},t.$=function(){},t.ea=function(){},(t=fu.prototype).get=function(t){var e=this;return Yt().then(function(){return Ir(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Yt().then(function(){var t=Cr(n);null===t?r.S(e):r.a.setItem(e,t)})},t.S=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.$=function(){},t.ea=function(){};var gu,mu,_u={C:lu,Ta:fu},bu={C:lu,Ta:fu},wu={C:Bs,Ta:du},Eu={C:lu,Ta:du},Cu={ad:"local",NONE:"none",cd:"session"};function Tu(){var t=!(Nr(yr())||!sr()),e=Er(),n=mr();this.m=t,this.h=e,this.l=n,this.a={},t=gu=gu||new yu;try{this.g=!Jn()&&Or()||!d.indexedDB?new t.a.C:new hu(ur()?new cu:new t.a.C)}catch(t){this.g=new cu,this.h=!0}try{this.i=new t.a.Ta}catch(t){this.i=new cu}this.u=new cu,this.f=E(this.Pb,this),this.b={}}function Iu(){return mu=mu||new Tu}function Su(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Nu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Au(t,e,n){return n=Nu(e,n),"local"==e.C&&(t.b[n]=null),Su(t,e.C).S(n)}function ku(t){t.c&&(clearInterval(t.c),t.c=null)}function Pu(t){this.a=t,this.b=Iu()}(t=Tu.prototype).get=function(t,e){return Su(this,t.C).get(Nu(t,e))},t.set=function(e,t,n){var r=Nu(e,n),i=this,o=Su(this,e.C);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.C&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Nu(t,e),this.l&&(this.b[t]=d.localStorage.getItem(t)),Q(this.a)&&(Su(this,"local").$(this.f),this.h||(Jn()||!Or())&&d.indexedDB||!this.l||(ku(r=this),r.c=setInterval(function(){for(var t in r.a){var e=d.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new xe({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Pb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Nu(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),Q(this.a)&&(Su(this,"local").ea(this.f),ku(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=d.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Su(this,"local").ea(this.f):ku(this),this.m)if(n=d.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?d.localStorage.setItem(e,r):d.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===d.localStorage.getItem(e)||(o.b[e]=d.localStorage.getItem(e),o.$a(e))},ge&&Se&&10==Se&&d.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else M(t,E(this.$a,this))},t.$a=function(t){this.a[t]&&M(this.a[t],function(t){t()})};var Ru,Ou={name:"authEvent",C:"local"};function Du(){this.a=Iu()}function xu(t,e){this.b=Lu,this.f=d.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=d.Int32Array?new Int32Array(64):Array(64),void 0!==Ru||(Ru=d.Int32Array?new Int32Array(qu):qu),this.reset()}e(xu,function(){this.b=-1});for(var Lu=64,Mu=Lu-1,Fu=[],ju=0;ju<Mu;ju++)Fu[ju]=0;var Uu=q(128,Fu);function Vu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],h=0|t.a[4],c=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))|0)+((a=(a=h&c^~h&l)+(0|Ru[e])|0)+(0|n[e])|0)|0,o=l,l=c,c=h,h=u+a|0,u=s,s=i,i=r,r=a+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+h|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Wu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(c(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Vu(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Vu(t),i=0)}}t.c=i,t.g+=n}xu.prototype.reset=function(){this.g=this.c=0,this.a=d.Int32Array?new Int32Array(this.h):H(this.h)};var qu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hu(){xu.call(this,8,Bu)}e(Hu,xu);var Bu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Qu(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Du,this.g=new Pu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ku(t){return new Xr("invalid-cordova-configuration",t)}function Gu(t){var e=new Hu;Wu(e,t),t=[];var n=8*e.g;e.c<56?Wu(e,Uu,56-e.c):Wu(e,Uu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Vu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return F(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function zu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Yu(s){return s.f||(s.f=s.ia().then(function(){return new qt(function(n){function e(r){t=!0,a&&a.cancel(),Xu(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=qi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"===(void 0===(n=Ir(wn(n=En(e),"firebaseError")||null))?"undefined":vl(n))?Jr(n):null)?new wo(t.c,t.b,null,null,n,null,t.R()):new wo(t.c,t.b,e,t.f,null,null,t.R())),e=n||o}zu(i,e)})}var i,o,t,a,r;s.Aa(function t(e){return n(e),s.Na(t),!1}),i=s,o=new wo("unknown",null,null,null,new Xr("no-auth-event")),t=!1,a=hn(500).then(function(){return Xu(i).then(function(){t||zu(i,o)})}),r=d.handleOpenURL,d.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(gr("BuildInfo.packageName",d).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Io=Io||new Co,function(t){var n=Io;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=gr("universalLinks.subscribe",d))&&t(null,n.b))}(e)})})),s.f}function Xu(e){var t,n=null;return(t=e.g).b.get(Ou,t.a).then(function(t){return Eo(t)}).then(function(t){return n=t,Au((t=e.g).b,Ou,t.a)}).then(function(){return n})}function Ju(t){this.a=t,this.b=Iu()}(t=Qu.prototype).ia=function(){return this.Da?this.Da:this.Da=(ar(void 0)?or().then(function(){return new qt(function(t,e){var n=d.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Xt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof gr("universalLinks.subscribe",d))throw Ku("cordova-universal-links-plugin-fix is not installed");if(void 0===gr("BuildInfo.packageName",d))throw Ku("cordova-plugin-buildinfo is not installed");if("function"!=typeof gr("cordova.plugins.browsertab.openUrl",d))throw Ku("cordova-plugin-browsertab is not installed");if("function"!=typeof gr("cordova.InAppBrowser.open",d))throw Ku("cordova-plugin-inappbrowser is not installed")},function(){throw new Xr("cordova-not-ready")})},t.Fb=function(t,e){return e(new Xr("operation-not-supported-in-this-environment")),Yt()},t.Db=function(){return Xt(new Xr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return Xt(new Xr("redirect-operation-pending"));var i=this,o=d.document,a=null,s=null,u=null,h=null;return this.c=Yt().then(function(){return bo(e),Yu(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new wo(t,r,null,o,new Xr("no-auth-event"),null,i),s=gr("BuildInfo.packageName",d);if("string"!=typeof s)throw new Xr("invalid-cordova-configuration");var u=gr("BuildInfo.displayName",d),h={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=s;else{if(!yr().toLowerCase().match(/android/))return Xt(new Xr("operation-not-supported-in-this-environment"));h.apn=s}u&&(h.appDisplayName=u),o=Gu(o),h.sessionId=o;var c=Hs(n.u,n.i,n.l,t,e,null,r,n.m,h,n.o,i);return n.ia().then(function(){var t=n.h;return n.v.a.set(Ou,a.A(),t)}).then(function(){var t=gr("cordova.plugins.browsertab.isAvailable",d);if("function"!=typeof t)throw new Xr("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=gr("cordova.plugins.browsertab.openUrl",d)))throw new Xr("invalid-cordova-configuration");e(c)}else{if("function"!=typeof(e=gr("cordova.InAppBrowser.open",d)))throw new Xr("invalid-cordova-configuration");t=yr(),n.a=e(c,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new qt(function(e,t){s=function(){var t=gr("cordova.plugins.browsertab.close",d);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(s),u=function(){a=a||hn(2e3).then(function(){t(new Xr("redirect-cancelled-by-user"))})},h=function(){Pr()&&u()},o.addEventListener("resume",u,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)}).s(function(t){return Xu(i).then(function(){throw t})})}).ka(function(){u&&o.removeEventListener("resume",u,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),s&&i.Na(s),i.c=null})},t.Aa=function(e){this.b.push(e),Yu(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new wo("unknown",null,null,null,new Xr("no-auth-event")),e(t))})},t.Na=function(e){W(this.b,function(t){return t==e})};var $u={name:"pendingRedirect",C:"session"};function Zu(t){return Au(t.b,$u,t.a)}function th(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new fh,this.w=new _h,this.g=new Ju(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=eh(this.B,this.u,this.m,Si)}function eh(t,e,n,r){var i=yl.default.SDK_VERSION||null;return new(ar()?Qu:Us)(t,e,n,i,r)}function nh(e){e.f||(e.f=!0,e.a.Aa(e.l));var n=e.a;return e.a.ia().s(function(t){throw e.a==n&&e.reset(),t})}function rh(n){n.a.Ob()&&nh(n).s(function(t){var e=new wo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));hh(t)&&n.o(e)}),n.a.Jb()||vh(n.b)}function ih(n,t){var e;U(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get($u,e.a).then(function(t){return"pending"==t}).then(function(t){t?Zu(n.g).then(function(){nh(n).s(function(t){var e=new wo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));hh(t)&&n.o(e)})}):rh(n)}).s(function(){rh(n)})}function oh(t,e){W(t.h,function(t){return t==e})}th.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=eh(this.B,this.u,this.m),this.i={}},th.prototype.o=function(t){if(!t)throw new Xr("invalid-auth-event");if(6e5<=T()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=T())),e=!0;break}}return vh(this.b),e};var ah=new kr(2e3,1e4),sh=new kr(3e4,6e4);function uh(t,e,n,r,i,o,a){return t.a.Db(e,n,r,function(){t.f||(t.f=!0,t.a.Aa(t.l))},function(){t.reset()},i,o,a)}function hh(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function ch(e,t,n,r,i){var o,a;return(a=e.g).b.set($u,"pending",a.a).then(function(){return e.a.Eb(t,n,r,i).s(function(t){if(hh(t))throw new Xr("operation-not-supported-in-this-environment");return o=t,Zu(e.g).then(function(){throw o})}).then(function(){return e.a.Rb()?new qt(function(){}):Zu(e.g).then(function(){return e.oa()}).then(function(){}).s(function(){})})})}function lh(t,e,n,r,i){return t.a.Fb(r,function(t){e.ja(n,null,t,i)},ah.get())}th.prototype.oa=function(){return this.b.oa()};var ph={};function dh(t,e,n){var r=e+":"+n;return ph[r]||(ph[r]=new th(t,e,n)),ph[r]}function fh(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function vh(t){t.g||(t.g=!0,mh(t,!1,null,null))}function yh(t){t.g&&!t.i&&mh(t,!1,null,null)}function gh(t,e){if(t.b=function(){return Yt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function mh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Xt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):gh(t,n):gh(t,{user:null}),t.f=[],t.c=[]}function _h(){}function bh(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function wh(t,e){this.a=e,Fr(this,"verificationId",t)}function Eh(t,e,n,r){return new go(t).Wa(e,n).then(function(t){return new wh(t,r)})}function Ch(t){var e=Ii(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Xr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");jr(this,{token:t,expirationTime:Rr(1e3*e.exp),authTime:Rr(1e3*e.auth_time),issuedAtTime:Rr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Th(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ih(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Sh(t){this.f=t,this.b=this.a=null,this.c=0}function Nh(t,e){var n=e[Da],r=e.refreshToken;e=Ah(e.expiresIn),t.b=n,t.c=e,t.a=r}function Ah(t){return T()+1e3*parseInt(t,10)}function kh(e,t){return r=e.f,i=t,new qt(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Va(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ps(t)):t.access_token&&t.refresh_token?e(t):n(new Xr("internal-error")):n(new Xr("network-request-failed"))},"POST",xn(i).toString(),r.g,r.u.get()):n(new Xr("internal-error"))}).then(function(t){return e.b=t.access_token,e.c=Ah(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function Ph(t,e){this.a=t||null,this.b=e||null,jr(this,{lastSignInTime:Rr(e||null),creationTime:Rr(t||null)})}function Rh(t,e,n,r,i,o){jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Oh(t,e){for(var n in De.call(this,t),e)this[n]=e[n]}function Dh(t,e,n){var r;this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=yl.default.SDK_VERSION?vr(yl.default.SDK_VERSION):null,this.a=new Ra(this.l,Ai(Si),t),this.b=new Sh(this.a),Vh(this,e[Da]),Nh(this.b,e),Fr(this,"refreshToken",this.b.a),Hh(this,n||{}),rn.call(this),this.J=!1,this.o&&_r()&&(this.i=dh(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=(r=this,new Th(function(){return r.G(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-T()-3e5;return 0<t?t:0})),this.W=E(this.Ja,this);var i=this;this.ga=null,this.xa=function(t){i.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Lh(i,t.c)},this.Y=null}function xh(t,e){t.Z&&ze(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&Qe(e,"languageCodeChanged",t.xa)}function Lh(t,e){t.P=e,Ua(t.a,yl.default.SDK_VERSION?vr(yl.default.SDK_VERSION,t.P):null)}function Mh(t,e){t.Y&&ze(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&Qe(e,"frameworkChanged",t.wa)}function Fh(e){try{return yl.default.app(e.m).auth()}catch(t){throw new Xr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function jh(t){t.B||t.w.b||(t.w.start(),ze(t,"tokenChanged",t.W),Qe(t,"tokenChanged",t.W))}function Uh(t){ze(t,"tokenChanged",t.W),t.w.stop()}function Vh(t,e){t.ma=e,Fr(t,"_lat",e)}function Wh(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return $t(e).then(function(){return t})}function qh(t){t.i&&!t.J&&(t.J=!0,ih(t.i,t))}function Hh(t,e){jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Ph(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Bh(){}function Qh(t){return Yt().then(function(){if(t.B)throw new Xr("app-deleted")})}function Kh(t){return F(t.providerData,function(t){return t.providerId})}function Gh(t,e){e&&(zh(t,e.providerId),t.providerData.push(e))}function zh(t,e){W(t.providerData,function(t){return t.providerId==e})}function Yh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Fr(t,e,n)}function Xh(e,t){var n,r,i;e!=t&&(jr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Fr(e,"metadata",new Ph((i=t.metadata).a,i.b)):Fr(e,"metadata",new Ph),M(t.providerData,function(t){Gh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Fr(e,"refreshToken",e.b.a))}function Jh(i){return i.G().then(function(t){var e,n,r=i.isAnonymous;return n=t,As((e=i).a,hs,{idToken:n}).then(E(e.zc,e)).then(function(){return r||Yh(i,"isAnonymous",!1),t})})}function $h(t,e){e[Da]&&t.ma!=e[Da]&&(Nh(t.b,e),t.dispatchEvent(new Oh("tokenChanged")),Vh(t,e[Da]),Yh(t,"refreshToken",t.b.a))}function Zh(t,e){return Jh(t).then(function(){if(U(Kh(t),e))return Wh(t).then(function(){throw new Xr("provider-already-linked")})})}function tc(t,e,n){return Ur({user:t,credential:_o(e),additionalUserInfo:e=Di(e),operationType:n})}function ec(t,e){return $h(t,e),t.reload().then(function(){return t})}function nc(n,r,t,e,i){if(!_r())return Xt(new Xr("operation-not-supported-in-this-environment"));if(n.h&&!i)return Xt(n.h);var o=Oi(t.providerId),a=Sr(n.uid+":::"),s=null;(!Er()||sr())&&n.o&&t.isOAuthProvider&&(s=Hs(n.o,n.l,n.m,r,t,null,a,yl.default.SDK_VERSION||null,null,null,n.tenantId));var u=nr(s,o&&o.sa,o&&o.ra);return e=e().then(function(){if(ic(n),!i)return n.G().then(function(){})}).then(function(){return uh(n.i,u,r,t,a,!!s,n.tenantId)}).then(function(){return new qt(function(t,e){n.ja(r,null,new Xr("cancelled-popup-request"),n.g||null),n.f=t,n.v=e,n.g=a,n.c=lh(n.i,n,r,u,a)})}).then(function(t){return u&&er(u),t?Ur(t):null}).s(function(t){throw u&&er(u),t}),oc(n,e,i)}function rc(e,t,n,r,i){if(!_r())return Xt(new Xr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Xt(e.h);var o=null,a=Sr(e.uid+":::");return r=r().then(function(){if(ic(e),!i)return e.G().then(function(){})}).then(function(){return e.ca=a,Wh(e)}).then(function(t){return e.da&&(t=(t=e.da).b.set(uc,e.A(),t.a)),t}).then(function(){return ch(e.i,t,n,a,e.tenantId)}).s(function(t){if(o=t,e.da)return hc(e.da);throw o}).then(function(){if(o)throw o}),oc(e,r,i)}function ic(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Xr("internal-error");throw new Xr("auth-domain-config-required")}}function oc(t,e,n){var r,i,o,a=(i=e,o=n,(r=t).h&&!o?(i.cancel(),Xt(r.h)):i.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Oh("userInvalidated")),r.h=t),t}));return t.I.push(a),a.ka(function(){V(t.I,a)}),a}function ac(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Da]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-T())/1e3;var r=new Dh(e,n,t);return t.providerData&&M(t.providerData,function(t){t&&Gh(r,Ur(t))}),t.redirectEventId&&(r.ca=t.redirectEventId),r}function sc(t){this.a=t,this.b=Iu()}fh.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},fh.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(mh(this,!0,null,t.a),Yt()):e.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then(function(t){mh(e,s,t,null)}).s(function(t){mh(e,s,null,t)})}(this,t,e):Xt(new Xr("invalid-auth-event")):(mh(this,!1,null,null),Yt())}else Xt(new Xr("invalid-auth-event"))},fh.prototype.oa=function(){var i=this;return new qt(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new Xr("timeout"),n.a&&n.a.cancel(),n.a=hn(sh.get()).then(function(){n.b||(n.g=!0,mh(n,!0,null,r))}))})},_h.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Yt()):e.Ba(n,r)?(o=e,a=(i=t).b,s=i.c,o.Ba(s,a)(i.g,i.f,i.R(),i.i).then(function(t){o.ja(s,t,null,a)}).s(function(t){o.ja(s,null,t,a)})):Xt(new Xr("invalid-auth-event"))}else Xt(new Xr("invalid-auth-event"));var i,o,a,s},wh.prototype.confirm=function(t){return t=mo(this.verificationId,t),this.a(t)},Th.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=hn(Ih(n,t)).then(function(){return e=d.document,n=null,Pr()||!e?Yt():new qt(function(t){n=function(){Pr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Th.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Sh.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Sh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Xt(new Xr("user-token-expired")):t||!this.b||T()>this.c-3e4?this.a?kh(this,{grant_type:"refresh_token",refresh_token:this.a}):Yt(null):Yt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ph.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(Oh,De),e(Dh,rn),Dh.prototype.ua=function(t){this.ga=t,ja(this.a,t)},Dh.prototype.ha=function(){return this.ga},Dh.prototype.Ca=function(){return H(this.P)},Dh.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Fr(Dh.prototype,"providerId","firebase"),(t=Dh.prototype).reload=function(){var t=this;return oc(this,Qh(this).then(function(){return Jh(t).then(function(){return Wh(t)}).then(Bh)}))},t.dc=function(t){return this.G(t).then(function(t){return new Ch(t)})},t.G=function(t){var e=this;return oc(this,Qh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new Xr("internal-error");return t.accessToken!=e.ma&&(Vh(e,t.accessToken),e.dispatchEvent(new Oh("tokenChanged"))),Yh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new Xr("internal-error");Hh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=(r=(r=t).providerUserInfo)&&r.length?F(r,function(t){return new Rh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)Gh(this,e[n]);var r;Yh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},t.hb=function(t){var e=this,n=null;return oc(this,t.f(this.a,this.uid).then(function(t){return $h(e,t),n=tc(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.rc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},t.fb=function(e){var n=this,r=null;return oc(this,Zh(this,e.providerId).then(function(){return n.G()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=tc(n,t,"link"),ec(n,t)}).then(function(){return r}))},t.sc=function(t,e){var n=this;return oc(this,Zh(this,"phone").then(function(){return Eh(Fh(n),t,e,E(n.fb,n))}))},t.Bc=function(t,e){var n=this;return oc(this,Yt().then(function(){return Eh(Fh(n),t,e,E(n.hb,n))}),!0)},t.rb=function(e){var n=this;return oc(this,this.G().then(function(t){return n.a.rb(t,e)}).then(function(t){return $h(n,t),n.reload()}))},t.Sc=function(e){var n=this;return oc(this,this.G().then(function(t){return e.b(n.a,t)}).then(function(t){return $h(n,t),n.reload()}))},t.sb=function(e){var n=this;return oc(this,this.G().then(function(t){return n.a.sb(t,e)}).then(function(t){return $h(n,t),n.reload()}))},t.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Qh(this);var n=this;return oc(this,this.G().then(function(t){return n.a.tb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return $h(n,t),Yh(n,"displayName",t.displayName||null),Yh(n,"photoURL",t.photoUrl||null),M(n.providerData,function(t){"password"===t.providerId&&(Fr(t,"displayName",n.displayName),Fr(t,"photoURL",n.photoURL))}),Wh(n)}).then(Bh))},t.Qc=function(e){var n=this;return oc(this,Jh(this).then(function(t){return U(Kh(n),e)?As(n.a,as,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return M(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),M(Kh(n),function(t){e[t]||zh(n,t)}),e[go.PROVIDER_ID]||Fr(n,"phoneNumber",null),Wh(n)}):Wh(n).then(function(){throw new Xr("no-such-provider")})}))},t.delete=function(){var e=this;return oc(this,this.G().then(function(t){return As(e.a,os,{idToken:t})}).then(function(){e.dispatchEvent(new Oh("userDeleted"))})).then(function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");xh(e,null),Mh(e,null),e.I=[],e.B=!0,Uh(e),Fr(e,"refreshToken",null),e.i&&oh(e.i,e)})},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?E(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?E(this.Cb,this):null},t.tc=function(t){var e=this;return nc(this,"linkViaPopup",t,function(){return Zh(e,t.providerId).then(function(){return Wh(e)})},!1)},t.Cc=function(t){return nc(this,"reauthViaPopup",t,function(){return Yt()},!0)},t.uc=function(t){var e=this;return rc(this,"linkViaRedirect",t,function(){return Zh(e,t.providerId)},!1)},t.Dc=function(t){return rc(this,"reauthViaRedirect",t,function(){return Yt()},!0)},t.Bb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.G().then(function(t){return $a(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=tc(i,t,"link"),ec(i,t)}).then(function(){return o}),oc(this,t)},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return oc(this,Yt().then(function(){return Bi(Za(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=tc(i,t,"reauthenticate"),$h(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.jb=function(e){var n=this,r=null;return oc(this,this.G().then(function(t){return r=t,void 0===e||Q(e)?{}:_i(new hi(e))}).then(function(t){return n.a.jb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.toJSON=function(){return this.A()},t.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&z(e,this.metadata.A()),M(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),e};var uc={name:"redirectUser",C:"session"};function hc(t){return Au(t.b,uc,t.a)}function cc(t){var e,n,r,i;this.a=t,this.b=Iu(),this.c=null,this.f=(n=dc("local"),r=dc("session"),i=dc("none"),function(n,r,i){var o=Nu(r,i),a=Su(n,r.C);return n.get(r,i).then(function(t){var e=null;try{e=Ir(d.localStorage.getItem(o))}catch(t){}if(e&&!t)return d.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=a.type&&d.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(pc,e.a).then(function(t){return t?dc(t):n})})})}).then(function(t){return e.c=t,lc(e,t.C)}).s(function(){e.c||(e.c=n)})),this.b.addListener(dc("local"),this.a,E(this.g,this))}function lc(t,e){var n,s,r=[];for(n in Cu)Cu[n]!==e&&r.push(Au(t.b,dc(Cu[n]),t.a));return r.push(Au(t.b,pc,t.a)),s=r,new qt(function(n,e){var r=s.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},a=0;a<s.length;a++)Jt(s[a],C(t,a),o);else n(i)})}cc.prototype.g=function(){var e=this,n=dc("local");gc(this,function(){return Yt().then(function(){return e.c&&"local"!=e.c.C?e.b.get(n,e.a):null}).then(function(t){if(t)return lc(e,"local").then(function(){e.c=n})})})};var pc={name:"persistence",C:"session"};function dc(t){return{name:"authUser",C:t}}function fc(t,e){return gc(t,function(){return t.b.set(t.c,e.A(),t.a)})}function vc(t){return gc(t,function(){return Au(t.b,t.c,t.a)})}function yc(t,e){return gc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),ac(t||{})})})}function gc(t,e){return t.f=t.f.then(e,e),t.f}function mc(t){if(this.l=!1,Fr(this,"settings",new bh),Fr(this,"app",t),!Sc(this).options||!Sc(this).options.apiKey)throw new Xr("invalid-api-key");var n,e,r,i,o,a,s,u;t=yl.default.SDK_VERSION?vr(yl.default.SDK_VERSION):null,this.b=new Ra(Sc(this).options&&Sc(this).options.apiKey,Ai(Si),t),this.O=[],this.m=[],this.J=[],this.Ub=yl.default.INTERNAL.createSubscribe(E(this.oc,this)),this.W=void 0,this.Vb=yl.default.INTERNAL.createSubscribe(E(this.pc,this)),Tc(this,null),this.h=new cc(Sc(this).options.apiKey+":"+Sc(this).name),this.w=new sc(Sc(this).options.apiKey+":"+Sc(this).name),this.Y=Pc(this,(e=Sc(n=this).options.authDomain,r=function(e){var t=function(t,e){return t.b.get(uc,t.a).then(function(t){return t&&e&&(t.authDomain=e),ac(t||{})})}(e.w,Sc(e).options.authDomain).then(function(t){return(e.B=t)&&(t.da=e.w),hc(e.w)});return Pc(e,t)}(n).then(function(){return yc(n.h,e)}).then(function(e){return e?(e.da=n.w,n.B&&(n.B.ca||null)==(e.ca||null)?e:e.reload().then(function(){return fc(n.h,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:vc(n.h)})):null}).then(function(t){Tc(n,t||null)}),Pc(n,r))),this.i=Pc(this,(i=this).Y.then(function(){return Ec(i)}).s(function(){}).then(function(){if(!i.l)return i.ma()}).s(function(){}).then(function(){if(!i.l){i.ga=!0;var t=i.h;t.b.addListener(dc("local"),t.a,i.ma)}})),this.ga=!1,this.ma=E(this.Nc,this),this.ub=E(this.aa,this),this.wa=E(this.bc,this),this.xa=E(this.mc,this),this.Ja=E(this.nc,this),this.a=null,a=Sc(o=this).options.authDomain,s=Sc(o).options.apiKey,a&&_r()&&(o.Tb=o.Y.then(function(){if(!o.l){if(o.a=dh(a,s,Sc(o).name),ih(o.a,o),Nc(o)&&qh(Nc(o)),o.B){qh(o.B);var t=o.B;t.ua(o.ha()),xh(t,o),Lh(t=o.B,o.I),Mh(t,o),o.B=null}return o.a}})),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.vc,this),this.o=0,rn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),u.Z=null,Object.defineProperty(u,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),u.P=null,this.I=[]}function _c(t){De.call(this,"languageCodeChanged"),this.g=t}function bc(t){De.call(this,"frameworkChanged"),this.c=t}function wc(t){return t.Tb||Xt(new Xr("auth-domain-config-required"))}function Ec(t){if(!_r())return Xt(new Xr("operation-not-supported-in-this-environment"));var e=wc(t).then(function(){return t.a.oa()}).then(function(t){return t?Ur(t):null});return Pc(t,e)}function Cc(o,a){var s={};return s.apiKey=Sc(o).options.apiKey,s.authDomain=Sc(o).options.authDomain,s.appName=Sc(o).name,o.Y.then(function(){return t=s,e=a,n=o.w,r=o.Ca(),i=new Dh(t,e),n&&(i.da=n),r&&Lh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Nc(o)&&t.uid==Nc(o).uid?Xh(Nc(o),t):(Tc(o,t),qh(t)),o.aa(t)}).then(function(){kc(o)})}function Tc(t,e){var n,r;Nc(t)&&(n=Nc(t),r=t.ub,W(n.O,function(t){return t==r}),ze(Nc(t),"tokenChanged",t.wa),ze(Nc(t),"userDeleted",t.xa),ze(Nc(t),"userInvalidated",t.Ja),Uh(Nc(t))),e&&(e.O.push(t.ub),Qe(e,"tokenChanged",t.wa),Qe(e,"userDeleted",t.xa),Qe(e,"userInvalidated",t.Ja),0<t.o&&jh(e)),Fr(t,"currentUser",e),e&&(e.ua(t.ha()),xh(e,t),Lh(e,t.I),Mh(e,t))}function Ic(e,t){var n=null,r=null;return Pc(e,t.then(function(t){return n=_o(t),r=Di(t),Cc(e,t)}).then(function(){return Ur({user:Nc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Sc(t){return t.app}function Nc(t){return t.currentUser}function Ac(t){return Nc(t)&&Nc(t)._lat||null}function kc(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Ac(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Ac(t))}}function Pc(t,e){return t.O.push(e),e.ka(function(){V(t.O,e)}),e}function Rc(){}function Oc(){this.a={},this.b=1e12}cc.prototype.mb=function(e){var n=null,r=this;return function(t){var e=new Xr("invalid-persistence-type"),n=new Xr("unsupported-persistence-type");t:{for(r in Cu)if(Cu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!mr()&&"none"!==t)throw n}}(e),gc(this,function(){return e!=r.c.C?r.b.get(r.c,r.a).then(function(t){return n=t,lc(r,e)}).then(function(){if(r.c=dc(e),n)return r.b.set(r.c,n,r.a)}):Yt()})},e(mc,rn),e(_c,De),e(bc,De),(t=mc.prototype).mb=function(t){return t=this.h.mb(t),Pc(this,t)},t.ua=function(t){this.Z===t||this.l||(this.Z=t,ja(this.b,this.Z),this.dispatchEvent(new _c(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=d.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),Ua(this.b,yl.default.SDK_VERSION?vr(yl.default.SDK_VERSION,this.I):null),this.dispatchEvent(new bc(this.I))},t.Ca=function(){return H(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:Sc(this).options.apiKey,authDomain:Sc(this).options.authDomain,appName:Sc(this).name,currentUser:Nc(this)&&Nc(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Ja(i.b,t).then(function(t){return o=_o(t),a=Di(t),t});return Pc(this,t=i.Y.then(function(){return s}).then(function(t){return Cc(i,t)}).then(function(){return Ur({user:Nc(i),credential:o,additionalUserInfo:a,operationType:"signIn"})}))},t.Lc=function(e){if(!_r())return Xt(new Xr("operation-not-supported-in-this-environment"));var n=this,t=Oi(e.providerId),r=Sr(),i=null;(!Er()||sr())&&Sc(this).options.authDomain&&e.isOAuthProvider&&(i=Hs(Sc(this).options.authDomain,Sc(this).options.apiKey,Sc(this).name,"signInViaPopup",e,null,r,yl.default.SDK_VERSION||null,null,null,this.R()));var o=nr(i,t&&t.sa,t&&t.ra);return Pc(this,t=wc(this).then(function(t){return uh(t,o,"signInViaPopup",e,r,!!i,n.R())}).then(function(){return new qt(function(t,e){n.ja("signInViaPopup",null,new Xr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=r,n.c=lh(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&er(o),t?Ur(t):null}).s(function(t){throw o&&er(o),t}))},t.Mc=function(t){if(!_r())return Xt(new Xr("operation-not-supported-in-this-environment"));var e=this;return Pc(this,wc(this).then(function(){return gc(t=e.h,function(){return t.b.set(pc,t.c.C,t.a)});var t}).then(function(){return ch(e.a,"signInViaRedirect",t,void 0,e.R())}))},t.oa=function(){var e=this;return Ec(this).then(function(t){return e.a&&yh(e.a.b),t}).s(function(t){throw e.a&&yh(e.a.b),t})},t.Rc=function(t){if(!t)return Xt(new Xr("null-user"));if(this.P!=t.tenantId)return Xt(new Xr("tenant-id-mismatch"));var e=this,n={};n.apiKey=Sc(this).options.apiKey,n.authDomain=Sc(this).options.authDomain,n.appName=Sc(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Da]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-T())/1e3,e=new Dh(e,o),n&&(e.da=n),r&&Lh(e,r),Xh(e,t),e}(t,n,e.w,e.Ca());return Pc(this,this.i.then(function(){if(Sc(e).options.apiKey!=t.l)return r.reload()}).then(function(){return Nc(e)&&t.uid==Nc(e).uid?(Xh(Nc(e),t),e.aa(t)):(Tc(e,r),qh(r),e.aa(r))}).then(function(){kc(e)}))},t.pb=function(){var t=this,e=this.i.then(function(){return t.a&&yh(t.a.b),Nc(t)?(Tc(t,null),vc(t.h).then(function(){kc(t)})):Yt()});return Pc(this,e)},t.Nc=function(){var r=this;return yc(this.h,Sc(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=Nc(r)&&t){e=Nc(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return Xh(Nc(r),t),Nc(r).G();(Nc(r)||t)&&(Tc(r,t),t&&(qh(t),t.da=r.w),r.a&&ih(r.a,r),kc(r))}})},t.aa=function(t){return fc(this.h,t)},t.bc=function(){kc(this),this.aa(Nc(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Nc(e))})},t.pc=function(t){var e,n,r=this;n=function(){t.next(Nc(r))},(e=this).J.push(n),Pc(e,e.i.then(function(){!e.l&&U(e.J,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(Ac(e)))}))},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then(function(){y(t)?t(Nc(r)):y(t.next)&&t.next(Nc(r))}),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then(function(){r.W=r.getUid(),y(t)?t(Nc(r)):y(t.next)&&t.next(Nc(r))}),this.Vb(t,e,n)},t.cc=function(t){var e=this,n=this.i.then(function(){return Nc(e)?Nc(e).G(t).then(function(t){return{accessToken:t}}):null});return Pc(this,n)},t.Hc=function(t){var n=this;return this.i.then(function(){return Ic(n,As(n.b,Cs,{token:t}))}).then(function(t){var e=t.user;return Yh(e,"isAnonymous",!1),n.aa(e),t})},t.Ic=function(t,e){var n=this;return this.i.then(function(){return Ic(n,As(n.b,Ts,{email:t,password:e}))})},t.Xb=function(t,e){var n=this;return this.i.then(function(){return Ic(n,As(n.b,rs,{email:t,password:e}))})},t.Sa=function(t){var e=this;return this.i.then(function(){return Ic(e,t.na(e.b))})},t.Gc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},t.ob=function(){var n=this;return this.i.then(function(){var t=Nc(n);if(t&&t.isAnonymous){var e=Ur({providerId:null,isNewUser:!1});return Ur({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Ic(n,n.b.ob()).then(function(t){var e=t.user;return Yh(e,"isAnonymous",!0),n.aa(e),t})})},t.getUid=function(){return Nc(this)&&Nc(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&Nc(this)&&jh(Nc(this))},t.Ec=function(e){var n=this;M(this.m,function(t){t==e&&n.o--}),this.o<0&&(this.o=0),0==this.o&&Nc(this)&&Uh(Nc(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Pc(this,this.i.then(function(){e.l||U(e.m,t)&&t(Ac(e))}))},t.removeAuthTokenListener=function(e){W(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(dc("local"),t.a,this.ma),this.a&&(oh(this.a,this),yh(this.a.b)),Promise.resolve()},t.$b=function(t){return Pc(this,As(this.b,is,{identifier:t,continueUri:br()?$n():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.qc=function(t){return!!po(t)},t.lb=function(e,n){var r=this;return Pc(this,Yt().then(function(){var t=new hi(n);if(!t.c)throw new Xr("argument-error",pi+" must be true when sending sign in link to email");return _i(t)}).then(function(t){return r.b.lb(e,t)}).then(function(){}))},t.Uc=function(t){return this.Ma(t).then(function(t){return t.data.email})},t.ab=function(t,e){return Pc(this,this.b.ab(t,e).then(function(){}))},t.Ma=function(t){return Pc(this,this.b.Ma(t).then(function(t){return new Wr(t)}))},t.Ya=function(t){return Pc(this,this.b.Ya(t).then(function(){}))},t.kb=function(e,t){var n=this;return Pc(this,Yt().then(function(){return void 0===t||Q(t)?{}:_i(new hi(t))}).then(function(t){return n.b.kb(e,t)}).then(function(){}))},t.Kc=function(t,e){return Pc(this,Eh(this,t,e,E(this.Sa,this)))},t.Jc=function(n,r){var i=this;return Pc(this,Yt().then(function(){var t=r||$n(),e=lo(n,t);if(!(t=po(t)))throw new Xr("argument-error","Invalid email link!");if(t.tenantId!==i.R())throw new Xr("tenant-id-mismatch");return i.Sa(e)}))},Rc.prototype.render=function(){},Rc.prototype.reset=function(){},Rc.prototype.getResponse=function(){},Rc.prototype.execute=function(){};var Dc=null;function xc(t,e){return(e=Lc(e))&&t.a[e]||null}function Lc(t){return(t=void 0===t?1e12:t)?t.toString():null}function Mc(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Wn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Qe(this.f,"click",this.i)}function Fc(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function jc(){}Oc.prototype.render=function(t,e){return this.a[this.b.toString()]=new Mc(t,e),this.b++},Oc.prototype.reset=function(t){var e=xc(this,t);t=Lc(t),e&&t&&(e.delete(),delete this.a[t])},Oc.prototype.getResponse=function(t){return(t=xc(this,t))?t.getResponse():null},Oc.prototype.execute=function(t){(t=xc(this,t))&&t.execute()},Mc.prototype.getResponse=function(){return Fc(this),this.b},Mc.prototype.execute=function(){Fc(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},Mc.prototype.delete=function(){Fc(this),this.g=!0,clearTimeout(this.a),this.a=null,ze(this.f,"click",this.i)},jc.prototype.g=function(){return Yt(Dc=Dc||new Oc)},jc.prototype.c=function(){};var Uc=null;function Vc(){this.b=d.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Wc=new Y($,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),qc=new kr(3e4,6e4);Vc.prototype.g=function(i){var o=this;return new qt(function(t,e){var r=setTimeout(function(){e(new Xr("network-request-failed"))},qc.get());!d.grecaptcha||i!==o.f&&!o.b?(d[o.a]=function(){if(d.grecaptcha){o.f=i;var n=d.grecaptcha.render;d.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(d.grecaptcha)}else clearTimeout(r),e(new Xr("internal-error"));delete d[o.a]},Yt(Ta(nt(Wc,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new Xr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(d.grecaptcha))})},Vc.prototype.c=function(){this.b--};var Hc=null;function Bc(t,e,n,r,i,o,a){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a=a?Uc=Uc||new jc:Hc=Hc||new Vc,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Gc])throw new Xr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[zc],!d.document)throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Wn(e)||!this.i&&Wn(e).hasChildNodes())throw new Xr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ra(t,o||null,i||null),this.v=r||function(){return null};var s=this;this.l=[];var u=this.a[Qc];this.a[Qc]=function(t){if(Yc(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=gr(u,d);"function"==typeof e&&e(t)}};var h=this.a[Kc];this.a[Kc]=function(){if(Yc(s,null),"function"==typeof h)h();else if("string"==typeof h){var t=gr(h,d);"function"==typeof t&&t()}}}var Qc="callback",Kc="expired-callback",Gc="sitekey",zc="size";function Yc(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Xc(t,e){return t.h.push(e),e.ka(function(){V(t.h,e)}),e}function Jc(t){if(t.B)throw new Xr("internal-error","RecaptchaVerifier instance has been destroyed.")}function $c(t,e,n){var r=!1;try{this.b=n||yl.default.app()}catch(t){throw new Xr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Xr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ca()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=yl.default.SDK_VERSION?vr(yl.default.SDK_VERSION,o):null,Bc.call(this,n,t,e,function(){try{var e=i.b.auth().ha()}catch(t){e=null}return e},o,Ai(Si),r)}function Zc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Xr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],i<0||i>=tl.length)throw new Xr("internal-error","Argument validator received an unsupported number of arguments.");n=tl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new Xr("argument-error",t+" failed: "+r)}(t=Bc.prototype).Da=function(){var e=this;return this.f?this.f:this.f=Xc(this,Yt().then(function(){if(br()&&!ur())return or();throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.v())}).then(function(t){return e.g=t,As(e.o,fs,{})}).then(function(t){e.a[Gc]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){Jc(this);var n=this;return Xc(this,this.Da().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=Wn(t);t=Bn("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){Jc(this);var i=this;return Xc(this,this.render().then(function(e){return new qt(function(r){var t=i.g.getResponse(e);if(t)r(t);else{i.l.push(function t(e){var n;e&&(n=t,W(i.l,function(t){return t==n}),r(e))}),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){Jc(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Jc(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Wn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},e($c,Bc);var tl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function el(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:c}}function nl(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:n}}function rl(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:g}}function il(t,e){return{name:t||"",M:"a function",optional:!!e,N:y}}function ol(t,e){return{name:t||"",M:"null",optional:!!e,N:i}}function al(n){return{name:n?n+"Credential":"credential",M:n?"a valid "+n+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.na||!e)}}}function sl(){return{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function ul(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&c(t.type)&&y(t.verify))}}}function hl(e,n,t,r){return{name:t||"",M:e.M+" or "+n.M,optional:!!r,N:function(t){return e.N(t)||n.N(t)}}}function cl(t,e){for(var n in e){var r=e[n].name;t[r]=dl(r,t[n],e[n].j)}}function ll(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:C(function(t){return this[t]},n),set:C(function(t,e,n,r){Zc(t,[n],[r],!0),this[e]=r},r,n,e[n].Za),enumerable:!0})}}function pl(t,e,n,r){t[e]=dl(e,n,r)}function dl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Zc(a,n,t),e.apply(this,t)}if(!n)return e;var i,o,a=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}cl(mc.prototype,{Ya:{name:"applyActionCode",j:[el("code")]},Ma:{name:"checkActionCode",j:[el("code")]},ab:{name:"confirmPasswordReset",j:[el("code"),el("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[el("email"),el("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[el("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[el("emailLink")]},wc:{name:"onAuthStateChanged",j:[hl(rl(),il(),"nextOrObserver"),il("opt_error",!0),il("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[hl(rl(),il(),"nextOrObserver"),il("opt_error",!0),il("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[el("email"),hl(rl("opt_actionCodeSettings",!0),ol(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[el("email"),rl("actionCodeSettings")]},mb:{name:"setPersistence",j:[el("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[al()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[al()]},Hc:{name:"signInWithCustomToken",j:[el("token")]},Ic:{name:"signInWithEmailAndPassword",j:[el("email"),el("password")]},Jc:{name:"signInWithEmailLink",j:[el("email"),el("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[el("phoneNumber"),ul()]},Lc:{name:"signInWithPopup",j:[sl()]},Mc:{name:"signInWithRedirect",j:[sl()]},Rc:{name:"updateCurrentUser",j:[hl({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Dh)}},ol(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[el(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[el("code")]}}),ll(mc.prototype,{lc:{name:"languageCode",Za:hl(el(),ol(),"languageCode")},ti:{name:"tenantId",Za:hl(el(),ol(),"tenantId")}}),(mc.Persistence=Cu).LOCAL="local",mc.Persistence.SESSION="session",mc.Persistence.NONE="none",cl(Dh.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[nl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[nl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[al()]},fb:{name:"linkWithCredential",j:[al()]},sc:{name:"linkWithPhoneNumber",j:[el("phoneNumber"),ul()]},tc:{name:"linkWithPopup",j:[sl()]},uc:{name:"linkWithRedirect",j:[sl()]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[al()]},hb:{name:"reauthenticateWithCredential",j:[al()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[el("phoneNumber"),ul()]},Cc:{name:"reauthenticateWithPopup",j:[sl()]},Dc:{name:"reauthenticateWithRedirect",j:[sl()]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[hl(rl("opt_actionCodeSettings",!0),ol(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[el(null,!0)]},Qc:{name:"unlink",j:[el("provider")]},rb:{name:"updateEmail",j:[el("email")]},sb:{name:"updatePassword",j:[el("password")]},Sc:{name:"updatePhoneNumber",j:[al("phone")]},tb:{name:"updateProfile",j:[rl("profile")]}}),cl(Oc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),cl(Rc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),cl(qt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),ll(bh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:nl("appVerificationDisabledForTesting")}}),cl(wh.prototype,{confirm:{name:"confirm",j:[el("verificationCode")]}}),pl(Hi,"fromJSON",function(t){t=c(t)?JSON.parse(t):t;for(var e,n=[Xi,ho,vo,Gi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[hl(el(),rl(),"json")]),pl(co,"credential",function(t,e){return new uo(t,e)},[el("email"),el("password")]),cl(uo.prototype,{A:{name:"toJSON",j:[el(null,!0)]}}),cl(to.prototype,{ya:{name:"addScope",j:[el("scope")]},Ga:{name:"setCustomParameters",j:[rl("customOAuthParameters")]}}),pl(to,"credential",eo,[hl(el(),rl(),"token")]),pl(co,"credentialWithLink",lo,[el("email"),el("emailLink")]),cl(no.prototype,{ya:{name:"addScope",j:[el("scope")]},Ga:{name:"setCustomParameters",j:[rl("customOAuthParameters")]}}),pl(no,"credential",ro,[hl(el(),rl(),"token")]),cl(io.prototype,{ya:{name:"addScope",j:[el("scope")]},Ga:{name:"setCustomParameters",j:[rl("customOAuthParameters")]}}),pl(io,"credential",oo,[hl(el(),hl(rl(),ol()),"idToken"),hl(el(),ol(),"accessToken",!0)]),cl(ao.prototype,{Ga:{name:"setCustomParameters",j:[rl("customOAuthParameters")]}}),pl(ao,"credential",so,[hl(el(),rl(),"token"),el("secret",!0)]),cl(Zi.prototype,{ya:{name:"addScope",j:[el("scope")]},credential:{name:"credential",j:[hl(el(),hl(rl(),ol()),"optionsOrIdToken"),hl(el(),ol(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[rl("customOAuthParameters")]}}),cl(zi.prototype,{A:{name:"toJSON",j:[el(null,!0)]}}),cl(Qi.prototype,{A:{name:"toJSON",j:[el(null,!0)]}}),pl(go,"credential",mo,[el("verificationId"),el("verificationCode")]),cl(go.prototype,{Wa:{name:"verifyPhoneNumber",j:[el("phoneNumber"),ul()]}}),cl(fo.prototype,{A:{name:"toJSON",j:[el(null,!0)]}}),cl(Xr.prototype,{toJSON:{name:"toJSON",j:[el(null,!0)]}}),cl(No.prototype,{toJSON:{name:"toJSON",j:[el(null,!0)]}}),cl(So.prototype,{toJSON:{name:"toJSON",j:[el(null,!0)]}}),cl($c.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),pl(ti,"parseLink",ui,[el("link")]),function(){if(void 0===yl.default||!yl.default.INTERNAL||!yl.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:mc,AuthCredential:Hi,Error:Xr};pl(t,"EmailAuthProvider",co,[]),pl(t,"FacebookAuthProvider",to,[]),pl(t,"GithubAuthProvider",no,[]),pl(t,"GoogleAuthProvider",io,[]),pl(t,"TwitterAuthProvider",ao,[]),pl(t,"OAuthProvider",Zi,[el("providerId")]),pl(t,"SAMLAuthProvider",$i,[el("providerId")]),pl(t,"PhoneAuthProvider",go,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof mc)}}]),pl(t,"RecaptchaVerifier",$c,[hl(el(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),rl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof yl.default.app.App)}}]),pl(t,"ActionCodeURL",ti,[]),yl.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new mc(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),yl.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:E((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:E(t.cc,t),addAuthTokenListener:E(t.Wb,t),removeAuthTokenListener:E(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),yl.default.registerVersion("@firebase/auth","0.13.4"),yl.default.INTERNAL.extendNamespace({User:Dh})}()}).apply(void 0!==fl?fl:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(39))},125:function(t,e,n){"use strict";var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,c=[],l=!1,p=-1;function d(){l&&h&&(l=!1,h.length?c=h.concat(c):p=-1,c.length&&f())}function f(){if(!l){var t=u(d);l=!0;for(var e=c.length;e;){for(h=c,c=[];++p<e;)h&&h[p].run();p=-1,e=c.length}h=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new v(t,e)),1!==c.length||l||u(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},16:function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var r,i,f=n(17),v=n(32),y=n(27),a=n(57),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),g=new v.ErrorFactory("app","Firebase",s),u="@firebase/app",m="[DEFAULT]",_=((i={})[u]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */),b=new a.Logger("@firebase/app"),h=(Object.defineProperty(c.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),c.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},c.prototype._getService=function(t,e){return void 0===e&&(e=m),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},c.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=m),this.container.getProvider(t).clearInstance(e)},c.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){b.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},c.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},c.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw g.create("app-deleted",{appName:this.name_})},c);function c(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=v.deepCopy(t),this.container=new y.ComponentContainer(e.name),this._addComponent(new y.Component("app",function(){return o},"PUBLIC"));try{for(var a=f.__values(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var w="7.7.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(u){var h={},c=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});if("object"!==(void 0===e?"undefined":o(e))||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=m);var r=n.name;if("string"!=typeof r||!r)throw g.create("bad-app-name",{appName:String(r)});if(v.contains(h,r))throw g.create("duplicate-app",{appName:r});var i=new u(t,n,l);return h[r]=i},app:p,registerVersion:function(t,e,n){var r,i=null!==(r=_[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var s=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&s.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&s.push("and"),a&&s.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void b.warn(s.join(" "))}d(new y.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},apps:null,SDK_VERSION:w,INTERNAL:{registerComponent:d,removeApp:function(t){delete h[t]},components:c,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function p(t){if(t=t||m,!v.contains(h,t))throw g.create("no-app",{appName:t});return h[t]}function d(n){var e,t,r=n.name;if(c.has(r))return b.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?l[r]:null;if(c.set(r,n),"PUBLIC"===n.type){var i=function(t){if(void 0===t&&(t=p()),"function"!=typeof t[r])throw g.create("invalid-app-argument",{appName:r});return t[r]()};void 0!==n.serviceProps&&v.deepExtend(i,n.serviceProps),l[r]=i,u.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])}}try{for(var o=f.__values(Object.keys(h)),a=o.next();!a.done;a=o.next()){var s=a.value;h[s]._addComponent(n)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[r]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(h).map(function(t){return h[t]})}}),p.App=u,l}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=function t(){var e=l(h);return e.INTERNAL=f.__assign(f.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){v.deepExtend(e,t)},createSubscribe:v.createSubscribe,ErrorFactory:v.ErrorFactory,deepExtend:v.deepExtend}),e}(),d=(E.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(n=t.getComponent(),"VERSION"!==(null===(e=n)||void 0===e?void 0:e.type))return null;var e,n,r=t.getImmediate();return r.library+"/"+r.version}).filter(function(t){return t}).join(" ")},E);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(t){this.container=t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(v.isBrowser()&&void 0!==self.firebase){b.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var C=self.firebase.SDK_VERSION;C&&0<=C.indexOf("LITE")&&b.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v.isNode()&&b.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,t)};var I,S,N=p;(I=N).INTERNAL.registerComponent(new y.Component("platform-logger",function(t){return new d(t)},"PRIVATE")),I.registerVersion(u,"0.5.2",S),I.registerVersion("fire-js",""),e.default=N,e.firebase=N},17:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a},e.__param=function(n,r){return function(t,e){r(t,e,n)}},e.__metadata=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(o,a,s,u){return new(s=s||Promise)(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})},e.__generator=function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=a,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},e.__spreadArrays=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},e.__await=l,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||s(r,n)})})}function s(t,e){try{(n=o[t](e)).value instanceof l?Promise.resolve(n.value.v).then(u,h):c(a[0][2],n)}catch(t){c(a[0][3],t)}var n}function u(t){s("next",t)}function h(t){s("throw",t)}function c(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}},e.__asyncDelegator=function(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:l(r[e](t)),done:"return"===e}:n?n(t):t}:n}},e.__asyncValues=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=o(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=u[s]&&function(a){return new Promise(function(t,e){var n,r,i,o;a=u[s](a),n=t,r=e,i=a.done,o=a.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}},e.__makeTemplateObject=function(t,e){Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e;return t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var i=function(){return e.__assign=i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t){return this instanceof l?(this.v=t,this):new l(t)}e.__assign=i},185:function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var i,o=(i=n(16))&&"object"===(void 0===i?"undefined":r(i))&&"default"in i?i.default:i;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
o.registerVersion("firebase","7.7.0","app"),t.exports=o},27:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n(17),i=n(32),r=(o.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},o.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},o.prototype.setServiceProps=function(t){return this.serviceProps=t,this},o);function o(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var l="[DEFAULT]",a=(s.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},s.prototype.getImmediate=function(t){var e=c.__assign({identifier:l,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},s.prototype.getComponent=function(){return this.component},s.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(l)}catch(t){}try{for(var r=c.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=c.__read(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(u);s.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},s.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},s.prototype.delete=function(){return c.__awaiter(this,void 0,void 0,function(){var e;return c.__generator(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},s.prototype.isComponentSet=function(){return null!=this.component},s.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===l?void 0:e),this.instances.set(t,n)),n||null},s.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:l},s);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u=(h.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},h.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},h.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},h.prototype.getProviders=function(){return Array.from(this.providers.values())},h);function h(t){this.name=t,this.providers=new Map}e.Component=r,e.ComponentContainer=u,e.Provider=a},32:function(t,N,A){"use strict";(function(t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(N,"__esModule",{value:!0});function s(t,e){if(!t)throw i(e)}function n(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function u(t){try{return o.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var e=A(17),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,c=o>>2,l=(3&o)<<4|s>>4,p=(15&s)<<2|h>>6,d=63&h;u||(d=64,a||(p=64)),r.push(n[c],n[l],n[p],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var h=o<<2|a>>4;if(r.push(h),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c=(l.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},l);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var d,f=(d=Error,e.__extends(v,d),v);function v(t,e){var n=d.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,y.prototype.create),n}var y=(g.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,a=this.errors[t],s=a?(r=i,a.replace(m,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})):"Error",u=this.serviceName+": "+s+" ("+o+").",h=new f(o,u),c=0,l=Object.keys(i);c<l.length;c++){var p=l[c];"_"!==p.slice(-1)&&(p in h&&console.warn('Overwriting FirebaseError base field "'+p+'" can cause unexpected behavior.'),h[p]=i[p])}return h},g);function g(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var m=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t){return JSON.parse(t)}function b(t){var e={},n={},r={},i="";try{var o=t.split(".");e=_(u(o[0])||""),n=_(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=(E.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},E.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],h=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=c^u&(h^c),1518500249):(o=u^h^c,1859775393):r<60?(o=u&h|c&(u|h),2400959708):(o=u^h^c,3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=c,c=h,h=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},E.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},E.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},E);function E(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}var C=(T.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},T.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},T.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},T.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"===(void 0===t?"undefined":a(t))&&null!==t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},T.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},T.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},T.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},T.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},T);function T(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function I(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}N.CONSTANTS=r,N.Deferred=c,N.ErrorFactory=y,N.FirebaseError=f,N.Sha1=w,N.assert=s,N.assertionError=i,N.async=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve(!0).then(function(){n.apply(void 0,t)}).catch(function(t){r&&r(t)})}},N.base64=o,N.base64Decode=u,N.base64Encode=function(t){var e=n(t);return o.encodeByteArray(e,!0)},N.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},N.createSubscribe=function(t,e){var n=new C(t,e);return n.subscribe.bind(n)},N.decode=b,N.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return h(void 0,t)},N.deepExtend=h,N.errorPrefix=S,N.getUA=p,N.isAdmin=function(t){var e=b(t).claims;return"object"===(void 0===e?"undefined":a(e))&&!0===e.admin},N.isBrowser=function(){return"object"===("undefined"==typeof self?"undefined":a(self))&&self.self===self},N.isBrowserExtension=function(){var t="object"===("undefined"==typeof chrome?"undefined":a(chrome))?chrome.runtime:"object"===("undefined"==typeof browser?"undefined":a(browser))?browser.runtime:void 0;return"object"===(void 0===t?"undefined":a(t))&&void 0!==t.id},N.isElectron=function(){return 0<=p().indexOf("Electron/")},N.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},N.isIE=function(){var t=p();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")},N.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},N.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},N.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},N.isReactNative=function(){return"object"===("undefined"==typeof navigator?"undefined":a(navigator))&&"ReactNative"===navigator.product},N.isUWP=function(){return 0<=p().indexOf("MSAppHost/")},N.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"===(void 0===e?"undefined":a(e))&&e.hasOwnProperty("iat")},N.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===(void 0===e?"undefined":a(e))&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&r<=n&&n<=i},N.issuedAtTime=function(t){var e=b(t).claims;return"object"===(void 0===e?"undefined":a(e))&&e.hasOwnProperty("iat")?e.iat:null},N.jsonEval=_,N.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,N.querystring=function(t){for(var n=[],e=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];e(o[0],o[1])}return n.length?"&"+n.join("&"):""},N.querystringDecode=function(t){var n={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n},N.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},N.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e},N.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;s(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},N.stringify=function(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,N.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},N.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},N.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!==(void 0===n?"undefined":a(n))||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,N.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}}).call(this,A(39))},57:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function o(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(e,"__esModule",{value:!0});var a,r,i=[];(r=a||(e.LogLevel=a={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";function s(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case a.DEBUG:case a.VERBOSE:console.log.apply(console,o(["["+i+"]  "+t.name+":"],n));break;case a.INFO:console.info.apply(console,o(["["+i+"]  "+t.name+":"],n));break;case a.WARN:console.warn.apply(console,o(["["+i+"]  "+t.name+":"],n));break;case a.ERROR:console.error.apply(console,o(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}var u=a.INFO,h=(Object.defineProperty(c.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),c.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,o([this,a.DEBUG],t))},c.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,o([this,a.VERBOSE],t))},c.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,o([this,a.INFO],t))},c.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,o([this,a.WARN],t))},c.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,o([this,a.ERROR],t))},c);function c(t){this.name=t,this._logLevel=u,this._logHandler=s,i.push(this)}e.LogLevel=a,e.Logger=h,e.setLogLevel=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){i.forEach(function(t){t.logLevel=e})}},83:function(t,e,n){"use strict";n(124)}}]);