(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{122:function(e,t){e.exports="/assets/images/danger.png"},15:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(a(185)).initializeApp({apiKey:"AIzaSyDdJjjkx2zXC_pIjlW7MtTgU2HvYFrqIqY",authDomain:"forwork-1579542004155.firebaseapp.com",databaseURL:"https://forwork-1579542004155.firebaseio.com",projectId:"forwork-1579542004155",storageBucket:"forwork-1579542004155.appspot.com",messagingSenderId:"591558800067",appId:"1:591558800067:web:41e749971b0784e9302876",measurementId:"G-BBCZS5L5MK"});t.default=n},182:function(e,t){e.exports="/assets/images/success.png"},183:function(e,s,l){"use strict";(function(e){Object.defineProperty(s,"__esModule",{value:!0});var t,a=l(65),n=l(35),r=l(15),o=(t=r)&&t.__esModule?t:{default:t};s.default=function(){return e.createElement("div",{className:"d-flex justify-content-between mb-3 p-2 align-items-center"},e.createElement("div",{className:"logo"},e.createElement("img",{src:l(184),alt:"Logo",className:"ml-3 logo-image"})),e.createElement("div",{className:"menu"},e.createElement(a.NavLink,{activeClassName:"active",className:"mr-3",to:"/profile"},"Профиль"),e.createElement(a.NavLink,{activeClassName:"active",className:"mr-3",to:"/history"},"История"),e.createElement(a.NavLink,{activeClassName:"active",to:"/dashboard",className:"mr-3"},"Доска объявлений"),e.createElement(a.NavLink,{to:"/",onClick:function(){o.default.auth().signOut().catch(function(e){return(0,n.showDangerMessage)(e.message)})},className:"mr-3"},"Выйти")))}}).call(this,l(5))},184:function(e,t){e.exports="/assets/images/logo.jpg"},35:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=document.querySelector("#message-window");function o(){r.classList.remove("show"),r.classList.remove("hide"),r.classList.remove("alert-success"),r.classList.remove("alert-danger"),n&&clearTimeout(n),n=setTimeout(function(){r.classList.add("hide")},5e3)}t.showSuccessMessage=function(e){o(),r.querySelector(".img").src=a(182),r.querySelector(".text").textContent=e,r.classList.add("alert-success"),r.classList.add("show")},t.showDangerMessage=function(e){o(),r.querySelector(".img").src=a(122),r.querySelector(".text").textContent=e,r.classList.add("alert-danger"),r.classList.add("show")}},403:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,l=a(86),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(l),u=a(35),c=a(15),d=(s=c)&&s.__esModule?s:{default:s};function f(e){return function(){var l=e.apply(this,arguments);return new Promise(function(o,s){return function t(e,a){try{var n=l[e](a),r=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}var h=[a(404),a(405),a(406),a(407)],p=[{lat:46.6716677,lng:32.6389526},{lat:46.66058779999999,lng:32.6554837},{lat:46.6625253,lng:32.6390332},{lat:46.654205,lng:32.5625972},{lat:46.6518956,lng:32.6144419},{lat:46.619408,lng:32.5900442},{lat:46.6264618,lng:32.6073008},{lat:46.662465,lng:32.6058125},{lat:46.6342376,lng:32.5742038},{lat:46.6569232,lng:32.5794143},{lat:46.6177539,lng:32.5787427}];a(87);var g,m,v=(n(O,[{key:"animateChange",value:function(e,t){var a=this;if(e.withOrder){if(t.status===i.ORDER_WAIT)e.status=i.AUTO_WAIT,e.path.loaded=!1,e.marker.setIcon(this.icons.car.wait),t.status=i.ORDER_AUTO,t.marker.setMap(null),this.updateAutoData(e.autoID,{status:i.AUTO_WAIT}).then(function(){return a.updateOrderData(t.orderID,{status:i.ORDER_AUTO})});else if(t.status===i.ORDER_MOVE)return e.withOrder=!1,t.status=i.ORDER_PAY,e.status=i.AUTO_PAY,t.marker.setMap(null),e.marker.setIcon(this.icons.car.wait),this.updateAutoData(e.autoID,{status:i.AUTO_PAY}).then(function(){return a.updateOrderData(t.orderID,{status:i.ORDER_PAY})}),!0}else{for(var n=p[Math.round(Math.random()*p.length)];n===e.path.coords;)n=p[Math.round(Math.random()*p.length)];e.path.dest=n}}},{key:"animateMove",value:function(){var n=this;this.auto.forEach(function(a){var e=n.orders.find(function(e){return e.orderID===a.orderID});if(!a.path||!a.path.steps||a.path.steps.length&&a.path.steps[0].distance.value||!a.path.loaded||!n.animateChange(a,e)){var t=a.coords;a.path&&a.path.steps&&(t=O.findNewPoint(a.coords,a.path.steps)),a.withOrder&&e.status===i.ORDER_MOVE&&(a.distance+=n.googleMaps.geometry.spherical.computeDistanceBetween(new n.googleMaps.LatLng(a.coords.lat,a.coords.lng),new n.googleMaps.LatLng(t.lat,t.lng))/1e3),a.marker.setPosition(t),a.coords=t,n.updateAutoData(a.autoID,{coords:a.coords,distance:a.distance}),[i.AUTO_PAY,i.AUTO_WAIT].includes(a.status)||(a.path.directionServ.route({origin:a.coords,destination:a.path.dest,travelMode:"DRIVING"},function(e,t){"OK"===t&&(a.path.steps=e.routes[0].legs[0].steps,a.path.directionRenderer.setDirections(e),a.path.directionRenderer.setOptions({suppressPolylines:!a.withOrder}),a.path.steps[0].distance.value&&(a.path.loaded=!0))}),a.messageWindow.setContent(n.createContentForAuto(a)))}})}},{key:"createMap",value:function(e){var a=this;this.map=new this.googleMaps.Map(e,{center:{lat:46.65,lng:32.58},zoom:12,mapTypeControl:!1}),this.areas=h.map(function(e){var t=new a.googleMaps.Polygon(r({paths:e.paths},e.style));return t.setMap(a.map),t}),this.makeAreaControl(),setInterval(this.animateMove.bind(this),3e3)}},{key:"createOrder",value:(m=f(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.ORDER_FINISHED===t.status)return e.abrupt("return");e.next=2;break;case 2:return a=this.icons.order.free,n=t.start,[i.ORDER_WAIT,i.ORDER_AUTO].includes(t.status)?a=this.icons.order.inWait:t.status!==i.ORDER_FREE&&(a=this.icons.order.withOrder,n=t.destination),e.next=6,this.geocode({address:n});case 6:r=e.sent,t.coords=r[0].geometry.location,t.marker=this.createMarker(t.coords,a),[i.ORDER_PAY,i.ORDER_AUTO].includes(t.status)&&t.marker.setMap(null),t.messageWindow=this.createWindow(O.createContentForOrder(t)),t.marker.addListener("click",this.orderMarkerListener.bind(this,t)),this.orders.push(t);case 13:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"createAuto",value:function(t){var e=this.icons.car.free;if([i.AUTO_WAIT,i.AUTO_PAY].includes(t.status)?e=this.icons.car.wait:t.status!==i.AUTO_FREE&&(e=this.icons.car.busy),t.marker=this.createMarker(t.coords,e),t.messageWindow=this.createWindow(this.createContentForAuto(t)),t.marker.addListener("click",this.autoMarkerClick.bind(this,t)),t.orderID){if(t.orderID&&i.AUTO_PAY!==t.status){var a=this.orders.find(function(e){return e.orderID===t.orderID});t.withOrder=!0,this.createPath(t,a.coords)}}else{var n=p[Math.round(Math.random()*p.length)];this.createPath(t,n)}this.auto.push(t)}},{key:"createWindow",value:function(e){return new this.googleMaps.InfoWindow({content:e})}},{key:"createPath",value:function(n,r){var o=this,s={dest:r};s.directionServ=new this.googleMaps.DirectionsService,s.directionRenderer=new this.googleMaps.DirectionsRenderer({map:this.map,suppressMarkers:!0,preserveViewport:!0}),s.directionRenderer.setOptions({suppressPolylines:!n.withOrder}),s.directionServ.route({origin:n.coords,destination:r,travelMode:"DRIVING"},function(e,t){if("OK"===t){if(n.path.steps=e.routes[0].legs[0].steps,n.path.loaded=!0,s.directionRenderer.setDirections(e),n.tax)return;var a=o.selectTax(r);n.tax=a,o.updateAutoData(n.autoID,{tax:a})}}),n.path=s}},{key:"createMarker",value:function(e,t){return new this.googleMaps.Marker({map:this.map,position:e,icon:t})}},{key:"createContentForAuto",value:function(e){var t="";if(window.onAutoButClick=this.autoButClick.bind(this),this.selectedAuto===e)return"<div>Выберите заказ</div>";if(e.orderID&&""!==e.orderID){var a=(e.distance*e.tax).toFixed(2);t="<div>Номер заказа: "+e.orderID+"</div>",e.status!==i.AUTO_MOVE&&e.status!==i.AUTO_PAY||(t+="<div>Проехано на: "+a+" грн.</div>"),e.status===i.AUTO_WAIT&&(t+=O.makeBut(i.EVENT_WAIT,e.nomer,"Пассажир прибыл")),e.status===i.AUTO_PAY&&(t+=O.makeBut(i.EVENT_PAY,e.nomer,"Оплачено"))}else t=O.makeBut(i.EVENT_TRAVEL,e.nomer,"В путь");return'\n        <div class = "justify-content-center">\n            <div>Номер машины: '+e.nomer+"</div>\n            <div>Статус: "+e.status+"</div>\n            "+t+"\n        </div>"}},{key:"eventTravelHandler",value:function(){this.selectedAuto&&this.selectedAuto.nomer===event.target.dataset.nomer?this.selectedAuto=null:(this.selectedAuto=this.auto.find(function(e){return e.nomer===event.target.dataset.nomer}),this.selectedAuto.messageWindow.setContent("<div>Выберите заказ</div>"))}},{key:"eventPayHandler",value:function(e,t){var a=this;this.updateAutoData(e.autoID,{status:i.AUTO_FREE,orderID:"",distance:0,tax:""}).then(function(){return a.updateOrderData(t.orderID,{status:i.ORDER_FINISHED,price:(e.distance*e.tax).toFixed(2),orderFinished:+new Date})}).then(function(){e.orderID="",e.tax=null,e.distance=0,e.withOrder=!1,e.status=i.AUTO_FREE,e.marker.setIcon(a.icons.car.free),e.messageWindow.close()})}},{key:"eventWaitHandler",value:function(t,a){var n=this;t.status=i.AUTO_MOVE,t.marker.setIcon(this.icons.car.busy),a.status=i.ORDER_MOVE,this.geocode({address:a.destination}).then(function(e){n.updateAutoData(t.autoID,{status:i.AUTO_MOVE}).then(function(){return n.updateOrderData(a.orderID,{status:i.ORDER_MOVE})}).then(function(){a.marker.setPosition(e[0].geometry.location),a.marker.setMap(n.map),a.marker.setIcon(n.icons.order.withOrder),t.path.dest=e[0].geometry.location,t.path.loaded=!1})})}},{key:"loadData",value:(g=f(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t.orders);case 1:if((e.t1=e.t0()).done){e.next=7;break}return a=e.t1.value,e.next=5,this.createOrder(r({orderID:a},t.orders[a]));case 5:e.next=1;break;case 7:t.auto.forEach(function(e,t){e&&n.createAuto(r({autoID:t},e))});case 8:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"orderMarkerListener",value:function(e){var t=this;if(this.selectedAuto)if(e.status!==i.ORDER_FREE)alert("Невозможно выбрать заказ который уже принят!");else{this.selectedAuto.marker.setIcon(this.icons.car.busy),e.marker.setIcon(this.icons.order.inWait),e.status=i.ORDER_WAIT,e.messageWindow.setContent(O.createContentForOrder(e));var a=this.auto.findIndex(function(e){return e===t.selectedAuto}),n={coords:this.auto[a].coords,status:i.AUTO_ORDER,autoID:this.auto[a].autoID,orderID:e.orderID,nomer:this.auto[a].nomer,name:this.auto[a].name,distance:0};this.auto[a].marker.setMap(null),this.auto.splice(a,1),this.createAuto(n),this.updateOrderData(e.orderID,{autoID:n.autoID,status:i.ORDER_WAIT,orderAccept:+new Date}).then(function(){return t.updateAutoData(t.selectedAuto.autoID,{orderID:e.orderID,status:i.AUTO_ORDER})}).then(function(){t.createPath(t.selectedAuto),t.selectedAuto=null})}else e.messageWindow.setContent(O.createContentForOrder(e)),e.messageWindow.open(this.map,e.marker)}},{key:"autoMarkerClick",value:function(e){if(this.selectedAuto===e)this.selectedAuto=null;else if(this.selectedAuto)return void(0,u.showDangerMessage)("Выберите заказ или отмените выбор заказа");e.messageWindow.setContent(this.createContentForAuto(e)),e.messageWindow.open(this.map,e.marker)}},{key:"autoButClick",value:function(t){var e=t.target.dataset.type,a=this.auto.find(function(e){return e.nomer==t.target.dataset.nomer}),n=this.orders.find(function(e){return e.orderID==a.orderID});e===i.EVENT_TRAVEL?this.eventTravelHandler():e===i.EVENT_WAIT?this.eventWaitHandler(a,n):e===i.EVENT_PAY&&this.eventPayHandler(a,n)}},{key:"geocode",value:function(e){var t=this;return new Promise(function(a,n){try{t.geodecoder.geocode(e,function(e,t){("OK"!==t?n:a)(e)})}catch(e){n(e)}}).catch(function(e){return(0,u.showDangerMessage)(e.message)})}},{key:"updateAutoData",value:function(e,t){return this.dbInfo.child("auto/"+e).update(t).catch(function(e){return(0,u.showDangerMessage)(e.message)})}},{key:"updateOrderData",value:function(e,t){return this.dbInfo.child("orders/"+e).update(t).catch(function(e){return(0,u.showDangerMessage)(e.message)})}},{key:"selectTax",value:function(t){var a=this,n=this.areas.find(function(e){return a.googleMaps.geometry.poly.containsLocation(t,e)});return n?this.auto.reduce(function(e,t){return a.googleMaps.geometry.poly.containsLocation(new a.googleMaps.LatLng(t.coords),n)?e+1:e},0)<3?l.COST_BUSY_PER_KM:l.COST_PER_KM:l.COST_OFFCITY_PER_KM}},{key:"makeAreaControl",value:function(){var t=this,e=document.createElement("div"),a=document.createElement("div"),n=document.createElement("input"),r=document.createElement("label");return e.append(a),a.append(n,r),e.className="p-3 bg-white",a.className="custom-control custom-checkbox",n.className="custom-control-input",n.style.zIndex="999",n.type="checkbox",n.name="showAreas",n.onchange=function(){t.areas.forEach(function(e){e.setMap(e.map?null:t.map)})},r.className="custom-control-label",r.setAttribute("for","showAreas"),r.textContent="Скрыть районы",this.map.controls[this.googleMaps.ControlPosition.TOP_RIGHT].push(e),e}}],[{key:"findNewPoint",value:function(e,t,a){for(var n=2<arguments.length&&void 0!==a?a:.005,r={lat:e.lat,lng:e.lng};0<n&&t.length;){var o=t[0].end_point,s=Math.sqrt(Math.pow(e.lat-o.lat(),2)+Math.pow(e.lng-o.lng(),2));if(n<s){r=o;for(var l=0;l<t[0].path.length;l++){var i=t[0].path[l];if(n<Math.sqrt(Math.pow(e.lat-i.lat(),2)+Math.pow(e.lng-i.lng(),2))){r={lat:t[0].path[l].lat(),lng:t[0].path[l].lng()};break}}n=0}else r={lat:o.lat(),lng:o.lng()},n-=s,t.shift()}return r}},{key:"createContentForOrder",value:function(e){var t=Math.ceil((new Date-e.orderCreate)/6e4),a="";return a+='\n        <div class = "justify-content-center">\n            <div>Номер заказа: '+e.orderID+"</div>\n            <div>Телефон: "+e.phone+"</div>\n            <div>Пункт назначения: "+e.destination+"</div>",e.status===i.ORDER_FREE&&(a+="<div>Время ожидания: "+t+" минут</div>"),a+="<div>Статус: "+e.status+"</div></div>"}},{key:"makeBut",value:function(e,t,a){return"<div \n                    onclick = \"onAutoButClick(event)\"\n                    class = 'btn btn-link'\n                    data-type = "+e+" \n                    data-nomer = "+t+">\n                        "+a+"\n                    </div>"}}]),O);function O(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),this.map=null,this.googleMaps=e,this.geodecoder=new e.Geocoder,this.database=d.default.database(),this.dbInfo=this.database.ref("/"),this.selectedAuto=null,this.orders=[],this.auto=[],this.icons={car:{free:a(408),wait:a(409),busy:a(410)},order:{free:a(411),inWait:a(412),withOrder:a(413)}},this.areas=[]}t.default=v},404:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#0000FF","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#0000FF","fillOpacity":0.2},"paths":[{"lat":46.62,"lng":32.615},{"lat":46.615,"lng":32.613},{"lat":46.61,"lng":32.606},{"lat":46.611,"lng":32.603},{"lat":46.604,"lng":32.597},{"lat":46.603,"lng":32.593},{"lat":46.601,"lng":32.592},{"lat":46.598,"lng":32.584},{"lat":46.599,"lng":32.57},{"lat":46.598,"lng":32.563},{"lat":46.593,"lng":32.549},{"lat":46.593,"lng":32.545},{"lat":46.599,"lng":32.541},{"lat":46.619365581504,"lng":32.55666374625817},{"lat":46.62596781555112,"lng":32.56713509025231},{"lat":46.62643937288847,"lng":32.57932304801598},{"lat":46.626321483939236,"lng":32.586189503094104},{"lat":46.62596781555112,"lng":32.59511589469567},{"lat":46.62431733252116,"lng":32.604900593181995},{"lat":46.62302048912441,"lng":32.612110371014026},{"lat":46.62160571544314,"lng":32.62206673087731}]}')},405:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#00FF00","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#00FF00","fillOpacity":0.2},"paths":[{"lat":46.686,"lng":32.561},{"lat":46.686,"lng":32.566},{"lat":46.692,"lng":32.568},{"lat":46.692,"lng":32.572},{"lat":46.69,"lng":32.574},{"lat":46.694,"lng":32.578},{"lat":46.694,"lng":32.591},{"lat":46.697,"lng":32.591},{"lat":46.7,"lng":32.594},{"lat":46.701,"lng":32.6},{"lat":46.707,"lng":32.601},{"lat":46.709,"lng":32.608},{"lat":46.709,"lng":32.61},{"lat":46.7,"lng":32.619},{"lat":46.705,"lng":32.631},{"lat":46.694,"lng":32.655},{"lat":46.68864300456689,"lng":32.66078713215195},{"lat":46.67254290671487,"lng":32.6401112299168},{"lat":46.66252996718983,"lng":32.62723662664531},{"lat":46.66005589640207,"lng":32.61865355779766},{"lat":46.659231180980775,"lng":32.61607863714336},{"lat":46.65881881855283,"lng":32.61487700750469}]}')},406:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#FF0000","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#FF0000","fillOpacity":0.2},"paths":[{"lat":46.686,"lng":32.561},{"lat":46.67362902313192,"lng":32.5548966288245},{"lat":46.66514776493996,"lng":32.55420998331669},{"lat":46.65030236077375,"lng":32.5548966288245},{"lat":46.63616009132673,"lng":32.560389792887},{"lat":46.62955910040463,"lng":32.55815819498661},{"lat":46.62448993590961,"lng":32.55884484049442},{"lat":46.6239079268685,"lng":32.55936109436536},{"lat":46.62437950214957,"lng":32.56103479279065},{"lat":46.625528949687606,"lng":32.5623222531178},{"lat":46.62608892810822,"lng":32.564339274297},{"lat":46.626737316937366,"lng":32.566141718755006},{"lat":46.62726781111186,"lng":32.56828748596692},{"lat":46.62747411299792,"lng":32.57030450714612},{"lat":46.62714325300521,"lng":32.57522300290908},{"lat":46.62702536558893,"lng":32.577797923563374},{"lat":46.627379027067626,"lng":32.58071616697158},{"lat":46.62705483746708,"lng":32.582261119364155},{"lat":46.62743797042277,"lng":32.583505664347065},{"lat":46.62720219661711,"lng":32.58517936277236},{"lat":46.62699589369475,"lng":32.588226352213276},{"lat":46.62681906199261,"lng":32.593247447489155},{"lat":46.62661275761005,"lng":32.59779396243404},{"lat":46.62577065204671,"lng":32.60256088463972},{"lat":46.6248600455151,"lng":32.607538790508556},{"lat":46.624506367578896,"lng":32.61037120322828},{"lat":46.623563215119155,"lng":32.612797882206124},{"lat":46.6251842482601,"lng":32.61786189282624},{"lat":46.626908541550314,"lng":32.621380324890055},{"lat":46.63504218852414,"lng":32.61700295977775},{"lat":46.64863743283586,"lng":32.609091283687924},{"lat":46.65607221120781,"lng":32.60525993116524},{"lat":46.65880204724848,"lng":32.61463022315341},{"lat":46.658868320014186,"lng":32.61470532500583},{"lat":46.65881881855283,"lng":32.61487700750469}]}')},407:function(e){e.exports=JSON.parse('{"style":{"strokeColor":"#FFFF00","strokeOpacity":0.8,"strokeWeight":2,"fillColor":"#FFFF00","fillOpacity":0.2},"paths":[{"lat":46.64863743283586,"lng":32.609091283687924},{"lat":46.65607221120781,"lng":32.60525993116524},{"lat":46.65881881855283,"lng":32.61487700750469},{"lat":46.66252996718983,"lng":32.62723662664531},{"lat":46.67254290671487,"lng":32.6401112299168},{"lat":46.68864300456689,"lng":32.66078713215195},{"lat":46.68133836098231,"lng":32.66643529969558},{"lat":46.6690042292498,"lng":32.6674716210217},{"lat":46.65991047311372,"lng":32.67250925078899},{"lat":46.655732561661445,"lng":32.658752405295424},{"lat":46.65452124219093,"lng":32.6560282361271},{"lat":46.65139871932914,"lng":32.65225168583413},{"lat":46.64705838390696,"lng":32.64773855762838},{"lat":46.64426835365248,"lng":32.64483425691426},{"lat":46.6441586437947,"lng":32.64422384157214},{"lat":46.64190877030884,"lng":32.64126859499513},{"lat":46.64013550110595,"lng":32.639815601940256},{"lat":46.63764080043684,"lng":32.636154552635425},{"lat":46.6340873379837,"lng":32.6325184513261},{"lat":46.630435813604784,"lng":32.6272134416386},{"lat":46.62886008282364,"lng":32.6247575153268},{"lat":46.628144596153746,"lng":32.62298222318123},{"lat":46.62695099628392,"lng":32.621587910680255},{"lat":46.626908541550314,"lng":32.621380324890055}]}')},408:function(e,t){e.exports="/assets/images/carFree.png"},409:function(e,t){e.exports="/assets/images/carWait.png"},410:function(e,t){e.exports="/assets/images/carBusy.png"},411:function(e,t){e.exports="/assets/images/peopleFree.png"},412:function(e,t){e.exports="/assets/images/peopleBusy.png"},413:function(e,t){e.exports="/assets/images/target.png"},414:function(e,f,h){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,l=h(35),r=h(15),i=(a=r)&&a.__esModule?a:{default:a};function o(e){return function(){var l=e.apply(this,arguments);return new Promise(function(o,s){return function t(e,a){try{var n=l[e](a),r=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}var u,c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,e.Component),t(d,[{key:"render",value:function(){return i.default.auth().currentUser.emailVerified?e.createElement("form",{onSubmit:this.addOrder,className:"align-items-center d-flex flex-column"},this.state.savingError?e.createElement("div",{className:"alert alert-danger"},this.state.savingError):null,e.createElement("h4",{className:"text-center"},"Добавить заказ"),e.createElement("input",{type:"text",name:"orderStart",onChange:this.onFormChange,value:this.state.fieldsValue.orderStart||"",className:"form-control",placeholder:"Введите начальный адресс"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.orderStart),e.createElement("input",{type:"text",name:"orderDestination",onChange:this.onFormChange,value:this.state.fieldsValue.orderDestination||"",className:"form-control",placeholder:"Введите конечный адресс"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.orderDestination),e.createElement("input",{type:"text",name:"orderPhone",onChange:this.onFormChange,value:this.state.fieldsValue.orderPhone||"",className:"form-control",placeholder:"Введите номер телефона"}),e.createElement("label",{className:"text-danger text-small"},this.state.fieldsError.orderPhone),e.createElement("button",{type:"submit",name:"create",className:"btn btn-primary mt-3 w-50"},"Создать")):e.createElement("div",{className:"text-center text-danger"},"Только пользователи с верифицированным аккаунтом могут делать заказы.")}},{key:"onFormChange",value:function(e){var r=e.target;this.setState(function(e){return{fieldsValue:s({},e.fieldsValue,(t={},a=r.name,n=r.value,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))};var t,a,n})}},{key:"addOrder",value:(u=o(regeneratorRuntime.mark(function e(t){var a,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.testForm(),this.setState({fieldsError:a}),Object.keys(a).length)return(0,l.showDangerMessage)("Ошибка заполнения формы заказа"),e.abrupt("return");e.next=6;break;case 6:return n={destination:this.state.fieldsValue.orderDestination,start:this.state.fieldsValue.orderStart,status:"Свободен",orderCreate:+new Date,phone:this.state.fieldsValue.orderPhone,user:i.default.auth().currentUser.uid},e.next=9,i.default.database().ref("/orders").push(n);case 9:(r=e.sent).set(n).then(function(){o.props.onCreate(s({orderID:r.key},n)),(0,l.showSuccessMessage)("Заказ добавлен"),o.setState({fieldsError:{},fieldsValue:{orderStart:"",orderDestination:"",orderPhone:""},savingError:null})},function(e){(0,l.showDangerMessage)("Ошибка сохранения формы"),o.setState({savingError:e.message})});case 11:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"testForm",value:function(){var e={};return new RegExp("\\+\\d{10}").test(this.state.fieldsValue.orderPhone)||(e.orderPhone="Введите корректный телефон(like +380501122333)"),this.state.fieldsValue.orderStart||(e.userName="Введите начальный адресс"),this.state.fieldsValue.orderDestination||(e.userName="Введите конечный адресс"),e}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e));return t.onFormChange=t.onFormChange.bind(t),t.addOrder=t.addOrder.bind(t),t.state={fieldsValue:{orderStart:"",orderDestination:"",orderPhone:""},fieldsError:{},savingError:null},t}f.default=c}).call(this,h(5))},415:function(e,t,a){"use strict";var s="__googleMapsApiOnLoadCallback",l=["channel","client","key","language","region","v"],n=null;e.exports=function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return n=n||new Promise(function(e,t){var a=setTimeout(function(){window[s]=function(){},t(new Error("Could not load the Google Maps API"))},o.timeout||1e4);window[s]=function(){null!==a&&clearTimeout(a),e(window.google.maps),delete window[s]};var n=document.createElement("script"),r=["callback="+s];l.forEach(function(e){o[e]&&r.push(e+"="+o[e])}),o.libraries&&o.libraries.length&&r.push("libraries="+o.libraries.join(",")),n.src=(o.apiUrl||"https://maps.googleapis.com/maps/api/js")+"?"+r.join("&"),document.body.appendChild(n)})}},421:function(e,f,h){"use strict";(function(e){Object.defineProperty(f,"__esModule",{value:!0});var t=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e};function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=i(h(403)),r=i(h(414)),o=i(h(84)),s=h(35),l=i(h(15));function i(e){return e&&e.__esModule?e:{default:e}}h(164);var u=h(415),c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,e.Component),t(d,[{key:"componentDidMount",value:function(){var t=this;u({key:"AIzaSyDdJjjkx2zXC_pIjlW7MtTgU2HvYFrqIqY"}).then(function(e){t.mapControll=new a.default(e),t.mapControll.createMap(t.mapElem)}),l.default.database().ref("/").once("value").then(function(e){t.mapControll.loadData(e.val()).catch(function(e){return(0,s.showDangerMessage)(e.message)})})}},{key:"render",value:function(){var t=this;return e.createElement(e.Fragment,null,e.createElement("div",{id:"map",ref:function(e){return t.mapElem=e}},"."),e.createElement("div",null,e.createElement("div",{className:"p-3 addOrderPopupBut bg-primary","data-toggle":"modal","data-target":"#addOrder"},"+"),e.createElement("div",{className:"modal",role:"dialog",id:"addOrder"},e.createElement("div",{className:"modal-dialog",role:"document"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-header d-flex justify-content-end"},e.createElement("span",{"data-dismiss":"modal",className:"cursor"},"×")),e.createElement("div",{className:"modal-body"},e.createElement(r.default,{onCreate:this.onOrderCreate})))))))}},{key:"onOrderCreate",value:function(e){this.mapControll.createOrder(e).catch(function(e){return(0,s.showDangerMessage)(e.message)})}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e));return t.mapControll=null,t.mapElem=null,t.onOrderCreate=t.onOrderCreate.bind(t),t}f.default=(0,o.default)(c)}).call(this,h(5))},84:function(e,t,i){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e};function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e(i(183)),s=e(i(15));i(83),i(186);var l=i(65);function e(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),n(t,[{key:"render",value:function(){return s.default.auth().currentUser?a.createElement(a.Fragment,null,a.createElement(o.default,null),a.createElement(e,null)):a.createElement(l.Redirect,{to:"/"})}}]),t;function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}}}).call(this,i(5))},86:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AUTO_FREE="Свободен",t.AUTO_ORDER="В пути к заказу",t.AUTO_WAIT="В ожидании",t.AUTO_MOVE="Движется",t.AUTO_PAY="Оплачивается",t.ORDER_FREE="Свободен",t.ORDER_WAIT="В ожидании",t.ORDER_AUTO="В пути к машине",t.ORDER_MOVE="Движется",t.ORDER_PAY="Оплачивается",t.ORDER_FINISHED="Завершен",t.EVENT_TRAVEL="InMove",t.EVENT_PAY="Pay",t.EVENT_WAIT="Wait",t.COST_PER_KM=10,t.COST_BUSY_PER_KM=12.5,t.COST_OFFCITY_PER_KM=20}}]);